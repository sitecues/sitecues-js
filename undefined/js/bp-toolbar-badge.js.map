{"version":3,"sources":["../../config-wrap-start-default.js","bp-toolbar-badge/bp-toolbar-badge.js","../../../../../../module-create.js"],"names":["sitecues","define","Promise","BP_CONST","state","helper","palette","baseView","TOOLBAR_HEIGHT","adjustFixedElementsBelowToolbar","resolve","require","positioner","scrollbars","init","initFromToolbar","toolbarElement","document","createElement","docElem","documentElement","setAttribute","appendChild","setAttributes","DEFAULT_TOOLBAR_ATTRS","set","then"],"mappings":"AAAA;;;;;;;ACMAA,SAAAC,OACA,uCACA,WACA,oBACA,sBACA,iBACA,uBACA,sBAEA,SACAC,SACAC,UACAC,OACAC,QACAC,SACAC;EAIA,IAAAC,iBAAA;EAEA,SAAAC;IACA,OAAA,IAAAP,QAAA,SAAAQ;MACAV,SAAAW,UAAA,8BAAA,8BAAA,SAAAC,YAAAC;;;QAGAA,WAAAC;QACAF,WAAAG,gBAAAL,SAAAF;;;;EAKA,SAAAM;IACA,IAAAE,iBAAAC,SAAAC,cAAA,OACAC,UAAAF,SAAAG;IAEAD,QAAAE,aAAA,yBAAA;;IACAF,QAAAG,YAAAN;IAEAX,OAAAkB,cAAAP,gBAAAb,SAAAqB;IAEApB,MAAAqB,IAAA,eAAA;IACArB,MAAAqB,IAAA,kBAAA;IAEA,OAAAnB,QAAAQ,KAAA,MACAY,KAAA;MACAnB,SAAAO,KAAAE;OAEAU,KAAAjB;;EAGA;IACAK,MAAAA;;;;ACzDAd,SAAAC,OAAA,oBAAA","file":"bp-toolbar-badge.js.map","sourcesContent":["\"use strict\";\n","/**\n * Toolbar -- a type of badge that stretches across the page and is fixed position\n * This is created when the page did not supply a #sitecues-badge or isToolbarMode was set to true in the config.\n */\n// TODO add a close button\n\nsitecues.define(\n  'bp-toolbar-badge/bp-toolbar-badge',[\n    'Promise',\n    'run/bp/constants',\n    'run/bp/model/state',\n    'run/bp/helper',\n    'run/bp/view/palette',\n    'run/bp/view/view'\n  ],\n  function (\n    Promise,\n    BP_CONST,\n    state,\n    helper,\n    palette,\n    baseView\n  ) {\n  'use strict';\n\n  var TOOLBAR_HEIGHT = 38;\n\n  function adjustFixedElementsBelowToolbar() {\n    return new Promise(function (resolve) {\n      require(['page/positioner/positioner', 'page/viewport/scrollbars'], function (positioner, scrollbars) {\n        // In the case of the toolbar, we must always move fixed position elements\n        // down, so that they are not obscured by our toolbar.\n        scrollbars.init();\n        positioner.initFromToolbar(resolve, TOOLBAR_HEIGHT);\n      });\n    });\n  }\n\n  function init() {\n    var toolbarElement = document.createElement('sc'),\n      docElem = document.documentElement;\n\n    docElem.setAttribute('data-sitecues-toolbar', ''); // Enable default.css rules\n    docElem.appendChild(toolbarElement);\n\n    helper.setAttributes(toolbarElement, BP_CONST.DEFAULT_TOOLBAR_ATTRS);\n\n    state.set('isPageBadge', false);\n    state.set('isToolbarBadge', true);\n\n    return palette.init(null)\n      .then(function() {\n        baseView.init(toolbarElement);\n      })\n      .then(adjustFixedElementsBelowToolbar);\n  }\n\n  return {\n    init: init\n  };\n\n});\n\n","\nsitecues.define(\"bp-toolbar-badge\", function(){});\n"]}