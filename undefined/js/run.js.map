{"version":3,"sources":["../../config-wrap-start-default.js","run/prereq/alameda-custom.js","run/util/object-utility.js","run/conf/preferences.js","run/conf/id.js","run/conf/site.js","run/data-map.js","run/locale.js","run/util/xhr.js","run/conf/urls.js","run/constants.js","run/platform.js","run/bp/model/classic-mode.js","run/has.js","run/ab-test/config.js","run/ab-test/ab-test.js","run/metric/metric.js","run/errors.js","run/events.js","run/exports.js","run/bp/constants.js","run/bp/model/state.js","run/bp/helper.js","run/bp/view/markup-finalizer.js","run/bp/view/styles.js","run/bp/view/svg.js","run/util/array-utility.js","run/inline-style/inline-style.js","run/bp/view/badge/placement.js","run/bp/view/size-animation.js","run/bp/view/panel/panel-classes.js","run/bp/view/badge/badge-classes.js","run/history-change-events.js","run/bp/view/view.js","run/dom-events.js","run/bp/controller/expand-controller.js","run/bp/view/palette.js","run/bp/view/badge/page-badge.js","run/bp/bp.js","run/modifier-key-state.js","run/shake/constants.js","run/shake/shake.js","run/run.js","../../../../../../module-create.js","../../../../../../module-insertRequire.js"],"names":["sitecues","exists","Error","Object","defineProperty","value","writable","define","_shared","nativeGlobal","pageView","session","site","user","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","_require","defaultErrback","error","dispatchEvent","waitSeconds","baseUrl","config","resourceFolderName","SC_RESOURCE_FOLDER_NAME","scriptUrl","script_url","folderOnly","substring","lastIndexOf","withVersionName","withLatestReplaced","replace","everywhereConfig","map","*","$","requirejs","require","global","Promise","undef","reportError","prim","waitingId","nextTick","waiting","callWaiting","w","length","shift","asyncTick","fn","push","setTimeout","isFunObj","x","type","notify","ary","forEach","item","callback","p","ok","yes","hasOwnProperty","v","errback","fail","no","e","promise","f","makeFulfill","f2","called","fulfill","prop","listeners","reject","TypeError","then","call","resolve","next","nextResolve","nextReject","finish","nextFn","bind","catch","err","cast","all","count","result","resolved","i","topReq","slice","hasOwn","bootstrapConfig","contexts","queue","commentRegExp","cjsRequireRegExp","jsSuffixRegExp","cacheNativeFnReferences","Array","commentReplace","match","multi","multiText","singlePrefix","hasProp","obj","getOwn","eachProp","func","mixin","target","source","force","deepStringMixin","isArray","RegExp","newContext","contextName","req","main","makeMap","callDep","handlers","checkingLater","load","context","defined","paths","bundles","pkgs","shim","mapCache","requireDeferreds","deferreds","calledDefine","calledPlugin","loadCount","startTime","Date","getTime","errCount","trackedErrors","urlFetched","bundlesMap","asyncResolve","trimDots","part","splice","normalize","name","baseName","applyMap","pkgMain","mapValue","nameParts","j","nameSegment","lastIndex","foundMap","foundI","foundStarMap","starI","baseParts","split","normalizedBaseParts","starMap","nodeIdCompat","test","charAt","concat","join","outerLoop","takeQueue","anonId","id","args","unshift","apply","deps","exportsFn","makeRequire","relName","topLevel","alt","cfg","arguments","isBrowser","navigator","nameToUrl","moduleName","ext","skipExt","syms","url","bundleId","urlArgs","toUrl","moduleNamePlusExt","index","segment","isRelative","specified","d","onResourceLoad","finished","rejected","makeNormalize","defineModule","factoryCalled","ret","factory","values","cjsModule","exports","usingExports","indexOf","depFinished","val","this","depDefined","depCount","depending","depMax","makeDefer","pr","getDefer","makeErrback","dynaId","requireModules","waitForDep","depMap","makeLoad","fromTextCalled","fromText","text","textAlt","n","plainId","exec","importScripts","script","createElement","setAttribute","scriptType","charset","async","addEventListener","pathConfig","parentNode","removeChild","src","head","appendChild","callPlugin","plugin","newMap","newId","splitPrefix","prefix","parts","cacheKey","module","uri","breakCycle","traced","processed","depId","dep","check","notFinished","waitInterval","expired","onError","delayedError","toString","depName","objs","eval","amd","jQuery","assign","keys","key","objectUtil","cachedPrefs","bindListener","listener","prefValue","getPref","defineHandler","handler","setPref","safeValue","unset","resetPrefs","hasPref","Boolean","init","prefs","get","set","has","reset","getId","userId","providedSiteConfig","getSiteId","siteId","site_id","trim","getProvidedSiteConfig","getEverywhereConfig","getSiteConfig","dataModuleName","data","dataMap","mainBrowserLocale","translations","DEFAULT_LOCALE","LOCALE_DATA_PREFIX","SUPPORTED_UI_LANGS","de","en","es","fr","pl","sv","COUNTRY_EXCEPTIONS","en-US","getLanguageFromLocale","locale","getPageLocale","validDocLocale","docElem","documentElement","docLocales","getTranslationLocale","lang","getAttribute","getMetaTagLocale","some","isValidLocale","getCookies","nameValSplit","chunks","cookie","cookies","googtrans","VALID_LOCALE_REGEX","metaLocale","META_LANG_SELECTOR","metaLocaleElement","querySelector","getLang","websiteLanguage","getSupportedUiLang","swapToPreferredRegion","countriesWhiteList","langsWhiteList","langWithCountry","langPrefix","prioritizedBrowserLocales","browserLocales","languages","extendLangWith","extendCode","translate","SC_DEV","console","log","localizeStrings","MATCH_KEY","capture","translateNumber","number","numDigits","translated","toLocaleString","getUiLocale","langOnly","toLowerCase","getBrowserLocale","getMainBrowserLocale","language","userLanguage","browserLanguage","langModuleName","getBrowserLang","initRequest","postData","requestObj","optionalContentTypeOverride","successFnOverride","xhr","XMLHttpRequest","contentType","open","setRequestHeader","onload","status","successFn","success","responseText","errorFn","statusText","send","getJSON","jsonText","JSON","parse","post","stringify","apiPrefix","scriptOrigin","BASE_RESOURCE_URL","getBaseResourceUrl","basis","SC_EXTENSION","getRawScriptUrl","unsecureBaseUrl","enforceHttps","absoluteUrl","getApiUrl","restOfUrl","getProxyApiUrl","proxyApi","resolveUrl","encodeURIComponent","getParsedLibraryURL","parseUrl","urlStr","pathname","lastSlashIndex","protocol","path","hostname","origin","port","parser","href","location","isValidLibraryUrl","resolveResourceUrl","paramsMap","addParam","isProduction","getScriptOrigin","ABSOLUTE_URL_REGEXP","URL","parsedUrl","parsedBaseUrl","absRegExpResult","isSameOrigin","isCrossOrigin","extname","domainEnding","constants","READY_STATE","UNINITIALIZED","INITIALIZING","COMPLETE","METRIC_NAME","BADGE_HOVER","ERROR","FEEDBACK","KEY_COMMAND","LENS_OPEN","MOUSE_SHAKE","PAGE_CLICK_FIRST","PAGE_SCROLL_FIRST","PAGE_UNLOAD","PANEL_CLICK","PANEL_CLOSE","PANEL_FOCUS_MOVE","SITECUES_READY","SLIDER_SETTING_CHANGE","TTS_REQUEST","ZOOM_CHANGE","KEY_CODE","MINUS_ALT1","MINUS_ALT2","MINUS_ALT3","EQUALS_ALT1","EQUALS_ALT2","PLUS","NUMPAD_SUBTRACT","NUMPAD_ADD","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","QUOTE","ESCAPE","SPACE","PAGE_UP","PAGE_DN","END","HOME","LEFT","UP","RIGHT","DOWN","LETTER_H","SHIFT","CTRL","F8","TAB","ENTER","ZOOM_OUT_CODES","ZOOM_IN_CODES","INIT_CODES","MIN_TIME_BETWEEN_KEYS","agent","isInitialized","isRetinaDisplay","browser","os","canUseRetinaCursors","cssPrefix","transitionEndEvent","nativeZoom","isRetina","isUnsupportedPlatform","platformWarning","getBrowserStr","getCssPrefix","currBrowser","isWebKit","isFirefox","isMS","getBrowser","version","browserStr","zoom","style","is","isIE","isEdge","isChrome","isOpera","isSafari","getVersion","charIndex","parseInt","getOSStr","getOS","osStr","isMac","isWin","versionString","UNKNOWN_VERSION","versionMatches","majorVersion","fullVersion","parseFloat","getNativeZoom","computedNativeZoom","outerWidth","innerWidth","screen","deviceXDPI","systemXDPI","devicePixelRatio","Math","round","getPlatformWarning","isStorageUnsupported","TEST_KEY","localStorage","sessionStorage","setItem","removeItem","ex","userAgent","featureSupport","themes","platform","CLASSIC_SITES","isClassicBrowser","isClassicSite","classicPref","isClassicMode","hasEvent","speechSynthesis","pointerEvents","touchEvents","lightEvents","proximityEvents","motionEvents","orientationEvents","batteryApi","getBattery","vibrateApi","vibrate","speechSynthApi","speechRecApi","SpeechRecognition","globalAbConfig","NONE","weight","extraSensitiveBadgeNewUser","moreButtonTimerV2","globalABConfig","userAbConfig","getLayerWeight","layer","total","selectKeyInLayer","seed","layerWeight","selectionIndex","weightAccumulator","numKeys","getArrayKeys","array","selectTests","layerValues","userIdParts","layerIndex","usesValuesArray","layerKeys","selectedKey","nextLayerValues","defaultVal","keyIndex","valueSlice","pref","urls","classicMode","abTest","doSuppressMetrics","doLogMetrics","platformData","sessionData","METRICS_VERSION","metricHistory","Metric","details","sent","settings","getSettings","clientTimeMs","Number","zoomLevel","ttsState","flattenData","logNameCollisions","bool","metricName","logFieldNameCollision","propName","SC_LOCAL","getMetricHistory","wrap","metricFn","create","constructor","isTester","isOldExtension","BLACKLIST","firstHighZoom","firstSpeechOn","ttsOn","reducedSettings","settingName","getSource","getPageUrl","targetUrl","search","hash","decodeURIComponent","initViewInfo","viewInfo","scVersion","metricVersion","sessionId","pageViewId","pageUrl","browserUserAgent","clientLanguage","osVersion","browserVersion","navPlatform","toggleLogMetrics","BadgeHover","Feedback","KeyCommand","LensOpen","MouseShake","PageClickFirst","PageScrollFirst","PageUnload","PanelClick","PanelClose","PanelFocusMove","SitecuesReady","SliderSettingChange","TtsRequest","ZoomChange","metric","isSitecuesError","logError","message","stack","filename","lineno","colno","onPrimRejection","onNativeRejection","reason","onRequireFailure","report","arr","manager","on","events","ev","list","tail","calls","_events","off","node","emit","rest","pop","state","isOn","getStatus","expandPanel","shrinkPanel","readyStates","expandController","shrinkController","statusFn","IS_BADGE","IS_PANEL","WANT_BADGE","WANT_PANEL","SMALL_A_ID","LARGE_A_ID","SPEECH_ID","MAIN_ID","MAIN_CONTENT_FILL_ID","MOUSEOVER_TARGET","SVG_ID","BADGE_ID","BP_CONTAINER_ID","HEAD_ID","SPEECH_LABEL_ID","ZOOM_LABEL_ID","SPEECH_TARGET_ID","WAVE_1_ID","WAVE_2_ID","WAVE_3_ID","VERT_DIVIDER_ID","BOTTOM_TEXT_ID","BOTTOM_MOUSETARGET_ID","BOTTOM_MORE_ID","CLOSE_BUTTON_ID","ZOOM_VALUE_ID","ZOOM_SLIDER_ID","ZOOM_SLIDER_BAR_ID","ZOOM_SLIDER_THUMB_ID","SHOW_ID","SECONDARY_ID","MORE_BUTTON_GROUP_ID","MORE_BUTTON_CONTAINER_ID","SHADOW_ID","OUTLINE_ID","MAIN_OUTLINE_ID","MAIN_OUTLINE_BORDER_ID","MORE_OUTLINE_ID","BUTTON_MENU_ID","TIPS_BUTTON_ID","SETTINGS_BUTTON_ID","FEEDBACK_BUTTON_ID","ABOUT_BUTTON_ID","ABOUT_ROTATE_HELPER_ID","TIPS_LABEL_ID","SETTINGS_LABEL_ID","FEEDBACK_LABEL_ID","ABOUT_LABEL_ID","ABOUT_CONTENT_ID","ABOUT_CONTENT_IMAGE_ID","FEEDBACK_CONTENT_ID","FEEDBACK_INPUT_RECT","FEEDBACK_TEXTAREA","FEEDBACK_SEND_BUTTON","FEEDBACK_SEND_LINK","RATING","RATING_STAR_CLASS","SETTINGS_CONTENT_ID","TIPS_CONTENT_ID","ARROWS_ID","NEXT_ID","PREV_ID","DEFAULT_BADGE_CLASS","DEMO_PAGE","DEMO_PAGE_CONTENTS","DEMO_PARA","DEMO_MOUSE","DEMO_SLIDER_THUMB","DEMO_ZOOM_PLUS","DEMO_ZOOM_MINUS","DEMO_LENS_SPACE","DEMO_SPEECH_SPACE","THEME_POWER_ID","THEME_TEXT_HUE_ID","MOUSE_SIZE_ID","HOVER_DELAY_NOMOVE_BADGE","HOVER_DELAY_STAY_INSIDE_BADGE","HOVER_DELAY_STAY_INSIDE_FIRST_TIME","MOUSELEAVE_DELAY_SHRINK_BP","TRANSFORMS","PANEL","BADGE","ABOUT_ENABLED","SETTINGS_ENABLED","FEEDBACK_ENABLED","TIPS_ENABLED","translateX","FAKE_BADGE_TRANSLATEX","scaleX","scaleY","translateY","PANEL_CONTAINER_ATTRS","role","tabindex","class","aria-label","BADGE_ATTRS","aria-busy","data-sc-reversible","DEFAULT_TOOLBAR_ATTRS","ZOOM_STATE_LABELS","ZOOM_OFF","PRE_ZOOM","POST_ZOOM","SPEECH_STATE_LABELS","ON","OFF","STRINGS","BADGE_LABEL","ZOOM_KEY_INCREMENT","FAKE_ZOOM_AMOUNT","EXPAND_ANIMATION_DURATION_MS","SHRINK_ANIMATION_DURATION_MS","NO_INPUT_TIMEOUT","FIREFOX_SLIDER_OFFSET","LARGE_SLIDER_WIDTH","SMALL_SLIDER_WIDTH","IDEAL_PANEL_WIDTH","IDEAL_PANEL_HEIGHT","ACTIVE_TOOLBAR_WIDTH","BADGE_VERTICAL_OFFSET","PALETTE_NAME_ADAPTIVE","PALETTE_NAME_NORMAL","PALETTE_NAME_REVERSE_BLUE","PALETTE_NAME_MAP","normal","adaptive","reverse-blue","reverse-yellow","ANIMATE_WAVES_OPACITY","ANIMATE_WAVES_STEP_DURATION","BADGE_MODE","PANEL_MODE","SECONDARY_PANEL_DISABLED","SECONDARY_PANEL_ENABLED","currentMode","transitionTo","isSecondaryPanel","secondaryPanelTransitionTo","scale","isRealSettings","isFirstBadgeUse","secondaryPanelName","isSecondaryExpanding","isSecondaryExpanded","isStickyPanel","doSuppressHovers","isKeyboardMode","isOpenedWithScreenReader","isMoreButtonVisible","isPageBadge","isToolbarBadge","wasMouseInPanel","paletteKey","defaultPaletteKey","isAdaptivePalette","isShrinkingFromKeyboard","isFeedbackSent","ratioOfSVGToVisibleBadgeSize","propValue","isPanel","isBadge","isPanelRequested","isExpanding","isSecondaryPanelRequested","isSecondaryFeaturePanel","panelName","getSecondaryPanelName","isShrinking","getPanelName","isButtonMenu","turnOnRealSettings","BP_CONST","elementByIdCache","byId","getElementById","invalidateId","getRect","element","rect","getBoundingClientRect","top","bottom","left","right","width","height","getRectById","setAttributes","attrs","attrName","getCurrentSVGElementTransforms","mapTranslate","transformAttrValue","getNumberFromString","sliderBar","sliderBarTransforms","splitter","sliderBarScale","sliderBarScaleX","sliderBarScaleY","str","getEventTarget","correspondingUseElement","cancelEvent","returnValue","preventDefault","stopImmediatePropagation","stopPropagation","fixTextAnchors","svg","elementsWithAnchors","parentElement","querySelectorAll","anchor","textWidthInPixels","getComputedTextLength","setX","DECIMAL_PLACES","toFixed","removeAttribute","getAriaOrNativeRole","elem","tag","localName","removeHash","loc","convertRelativeUrlsToAbsolute","MATCH_URLS","pageUrlMinusHash","totalMatch","attributeName","markup","withAllAbsoluteUrls","localized","helper","palette","hasCustomPalette","customBadgePalette","doWebKitPrefix","BASE_CSS","isAnimationDebuggingOn","MAX_ZINDEX","BASE_SHEET_ID","HIDE_IN_PRINT_MEDIA","toCSS","jsonObject","styles","isTransformPrefixNeeded","transform","selector","attribute","initBaseCss","#scp-bp-container,#scp-bp-container textarea","box-sizing","img#sitecues-badge, #sitecues-badge>img","visibility","opacity","#sitecues-badge>#scp-bp-container","position","#scp-bp-container","direction","z-index","transition","transform-origin","text-align","outline","-webkit-user-select","-moz-user-select","-ms-user-select","#scp-svg","max-width","overflow","#scp-bp-container.scp-loading,#sitecues-badge[aria-busy=\"false\"]>img","display","#scp-bp-container:not(.scp-loading)",".scp-toolbar","margin","box-shadow","padding","background-color","toolbar",".scp-toolbar > #scp-bp-container","html[data-sitecues-toolbar]","padding-top","#scp-main > *, .scp-wave","#scp-bottom-text",".scp-is-panel text","font-family","font-size","font-weight",".scp-is-panel #scp-bottom-text","#scp-shadow","background-image","#scp-shadow-container","pointer-events",".scp-want-panel #scp-shadow-container",".scp-is-panel #scp-shadow-container",".scp-want-panel > #scp-svg",".scp-want-panel:not(.scp-is-panel) .scp-hand-cursor",".scp-want-panel .scp-panel-only",".scp-want-panel #scp-mouseover-target",".scp-wave,.scp-head",".scp-realsettings #scp-speech[aria-checked=\"false\"]:not(.scp-dim-waves) > .scp-wave","fill",".scp-dim-waves> #scp-wave1",".scp-dim-waves > #scp-wave2",".scp-dim-waves > #scp-wave3",".scp-classic-true #scp-more-arrow",".scp-classic-false #scp-question","#scp-more-button-opacity",".scp-transition-opacity-fast","#scp-secondary, .scp-secondary-feature",".scp-hidden-target","#sitecues-badge:focus,#scp-bp-container:focus,#scp-bp-container *:focus","#sitecues-badge[aria-expanded=\"false\"]:focus > .scp-is-badge #scp-badge-focus-rect","stroke","stroke-width","#scp-focus-outline","border-radius",".scp-is-panel [data-show-focus=\"stroke-child\"]:not([data-own-focus-ring]) rect,.scp-is-panel [data-show-focus=\"stroke-child\"]:not([data-own-focus-ring])>.scp-hidden-target","filter",".scp-is-panel [data-show-focus=\"box-shadow\"]:not([data-own-focus-ring])",".scp-is-panel.scp-keyboard:not(.scp-secondary-expanding) > #scp-focus-outline[data-show]","#scp-feedback-input-rect[data-show-focus]","-webkit-filter","#scp-bp-container:not(.scp-is-badge)","clip","#scp-head",".scp-A-button","A","#scp-zoom-slider-thumb","sliderThumb","#scp-zoom-slider-bar","#scp-wave1","wave1On","#scp-wave2","wave2On","#scp-wave3","wave3On",".scp-palette-rb #scp-zoom-slider-thumb",".scp-palette-rb #scp-wave1",".scp-palette-rb #scp-wave2",".scp-palette-rb #scp-wave3",".scp-palette-rb .scp-A-button, .scp-palette-rb #scp-head, .scp-palette-rb #scp-zoom-slider-bar",".scp-palette-rb.scp-toolbar",".scp-palette-ry #scp-wave1",".scp-palette-ry #scp-wave2",".scp-palette-ry #scp-wave3",".scp-palette-ry #scp-zoom-slider-thumb",".scp-palette-ry .scp-A-button, .scp-palette-ry #scp-head, .scp-palette-ry #scp-zoom-slider-bar",".scp-palette-ry.scp-toolbar",".scp-want-panel .scp-A-button, .scp-want-panel #scp-head, .scp-want-panel  #scp-zoom-slider-bar",".scp-want-panel #scp-zoom-slider-thumb",".scp-want-panel #scp-wave1",".scp-want-panel #scp-wave2",".scp-want-panel #scp-wave3",".scp-is-panel .scp-A-button:hover",".scp-is-panel #scp-zoom-slider-thumb:hover",".sitecues-only","createStyleSheet","sheetId","cssDefs","sheet","innerHTML","badge","toggleSlowBPAnimations","finalizer","symmetricDifference","arr1","arr2","difference","array1","from","array2","member","union","Set","arrays","arrayCount","arraySize","add","fromSet","intersection","addUnique","unique","original","results","remove","arrayLike","arrayUtil","proxyMap","kebabCaseCache","assignmentDictionary","assignmentRecords","lastStyleMap","intendedStyleMap","updateTimer","styleParser","UPDATE_TIMEOUT","cssNumbers","animation-iteration-count","column-count","fill-opacity","flex-grow","flex-shrink","line-height","order","orphans","widows","fixUnits","property","arrayAssignment","styleInfo","styleField","toKebabCase","setProperty","objectAssignment","stringAssignment","cssText","overrideStyle","elmts","assignmentFn","getAssignmentFunction","elements","currentStyles","getCurrentStyles","isStyleProxied","updateLastStyles","insertStyleProxy","memoizedValue","g","getIntendedStyles","updateIntendedStyles","parseCss","getCssText","getLastStyles","getStyleType","setStyle","removeProperty","getStyle","clearStyle","styleProperty","getDirectStyleProperty","queueAssignmentRecord","lastStyles","styleType","styleObj","updateProperty","saveStyleValue","record","cssObject","isCssOverwritten","intendedStyles","stringifyCss","declaration","clearTimeout","restoreLast","props","properties","restoreStyleValue","cachedStyles","priority","getPropertyValue","getPropertyPriority","restore","_scStyle","_scStyleProxy","styleProxyGetter","styleProxySetter","proxy","createProxy","configurable","styleChain","styleProxy","proxiedProperties","interceptProperty","boundGetter","bindFn","boundSetter","getOwnPropertyNames","getPrototypeOf","propertyData","cssObj","WeakMap","object","string","override","clear","inlineStyle","currentBPParent","badgeElement","badgeGeometry","bpElement","svgElement","svgAspectRatio","SHOULD_FIX_USE_ELEMENTS","BADGE_PARENT","HTML_PARENT","badgeRect","currentZoom","disableAnimations","switchToBadgeParent","tranform","repositionBPOverBadge","fitSVGtoBadgeRect","switchToHtmlParent","insertBefore","childNodes","fixUseElementsInIE","useElement","useElements","getElementsByTagName","numUseElements","useIndex","newHref","substr","newBadgeRect","appliedZoom","getAppliedBPZoom","badgeComputedStyle","getComputedStyle","paddingLeft","getPadding","paddingTop","setBPProperty","rectHasNoArea","cachedRect","svgWidth","getRatioOfSVGToVisibleBadgeSize","svgHeight","getWaveHeight","waveHeight","badgeRectWidth","addClipRectStyleFix","EXTRA_PIXELS_HEIGHT","EXTRA_PIXELS_WIDTH","onZoomChange","isBPInBody","executeWhileElementIsRendered","isReparented","inlineTransform","nextSibling","parent","initBadgeGeometry","contentBox","computedStyle","paddingBottom","paddingRight","bpContainer","viewBoxRect","viewBox","baseVal","animationStartTime","animationId","panelScaleFromBadge","badgeScaleFromPanel","targetBadgeWidth","requestFrameFn","requestAnimationFrame","cancelFrameFn","cancelAnimationFrame","expandEasingFn","t","collapseEasingFn","MINIMUM_DISTANCE_FROM_EDGE","MINIMUM_DISTANCE_FROM_EDGE_TOP","ZOOM_MIN","ZOOM_RANGE","currentlyTransitioningFrom","currentlyTransitioningTo","MINIMUM_PANEL_SIZE_INCREASE","transformElementId","getSvgElement","getBadgeElement","getDifferenceObject","obj1","obj2","obj1Prop","obj2Prop","getPossibleOutlineRects","targetDimensions","possibleOutlineRects","currentSVGWidth","targetSVGWidth","increaseFactor","currentOutlineRect","remainingTime","center","getScaledRect","25%0%","topLeft","75%0%","topRight","botRight","botLeft","originX","originY","scaledWidth","scaledHeight","resultRect","isRectLeftOfViewport","isRectRightOfViewport","isRectAboveViewport","isRectBelowViewport","innerHeight","isRectOutsideViewport","moveRectIntoViewport","getTargetSize","getTargetPanelSize","getTargetBadgeSize","svgRect","portionRemaining","newPanelWidth","max","newPanelHeight","getAspectRatio","getAppliedBadgeZoom","getTargetBadgeWidth","zoomMult","badgeComputedStyles","extraWidth","getTargetBadgePosition","FUDGE_FACTOR","completedZoom","ceil","getTargetPanelPosition","currentRect","targetSize","outlineRects","getTargetTransformPosition","getTargetSVGElementTransforms","copyObj","transforms","sliderWidth","percentage","firstTimeRender","SLIDER_BAR_ID","SLIDER_THUMB_ID","badgeTransforms","TRANSFORM_STRING","TRANSLATE_STRING","SCALE_STRING","CLOSING_PAREN","sliderBarTransform","sliderThumbTranslateX","getTranslateX","setTransform","getCurrentTransformPosition","transformValues","translateLeft","translateTop","getCurrentSize","getCurrentScale","transformStyle","setSize","size","crispFactor","transformScale","setSVGElementTransforms","startingSVGElementTransforms","svgElementTransformDifference","animationTime","transformStr","currentStartingValue","currentDifferenceValue","getTargetScale","endingSizeToStartingSizeRatio","scalingFunction","BADGE_TO_PANEL","TWEEN_TO_PANEL_CRISPED","TWEEN_TO_PANEL_UNCRISPED","PANEL_TO_BADGE","TWEEN_TO_BADGE_CRISPED","TWEEN_TO_BADGE_UNCRISPED","performAnimation","startingScale","endingScale","scaleDifference","startCrispFactor","startingPosition","startingSize","endingPosition","endingSize","endingSVGElementTransforms","positionDifference","fullAnimationDuration","percentEnlarged","percentAnimationComplete","animationTick","timeSinceFirstAnimationTick","now","animationEasingFn","normalizedAnimationTime","min","isAnimationEnding","currentSize","ratioFromIdealSize","endAnimation","getStartCrispFactor","cancelAnimation","view","update","animate","getViewClasses","classBuilder","isSecondary","getSecondaryPanelClasses","className","getPaletteClass","paletteName","origPath","getPath","trigger","newPath","numListeners","triggerIfPathChanged","currPath","onClick","bpSVG","placement","sizeAnimation","panelClasses","badgeClasses","historyChange","getBpContainerElement","createBpContainer","bpContainerElem","getSVGElement","updateAria","hasSitecuesEverBeenOn","addLabel","badgeOrToolbarElement","badgeLabelElement","isNewSubpanel","isOrWillBePanel","classes","updateBadgePalette","currentBadgeClassAttr","newBadgeClassAttr","updateSvgHashes","oldPath","updateAttribute","oldValue","newValue","updateElements","badgePlacementElem","isPassiveSupported","getThirdParam","opts","isCapturing","isPassive","passive","removeEventListener","domEvents","hoverIfNoMoveTimer","hoverIfStayInsideTimer","sensitivity","doIgnoreNextMouseMove","DEFAULT_SENSITIVITY","isInBadgeArea","clientX","clientY","getVisibleBadgeRect","onWindowFocus","onMouseMove","cancelHoverIfNoMoveTimer","changeModeToPanel","getHoverDelayNoMove","getHoverDelayStayInside","getSensitivity","isFirstInteraction","isOpenedWithHover","setPanelExpandedState","ensureFutureRealSettings","isOpenedWithKeyboard","cancelHoverTimers","cancelHoverIfStayInsideTimer","clickToOpenPanel","badgeElem","isBadgeFocused","activeElement","isChildClicked","isClickInVisibleBadgeRect","body","focus","processBadgeActivationKeys","keyCode","didExpand","bpExpanded","didZoom","sliderController","didChangeSpeech","ttsButton","updateTTSStateView","toggleStickyPanel","isSticky","getSimplePaletteType","badgeFileName","paletteMap","fullNames","fullName","bpAdaptive","initAdaptivePalette","baseView","ensureNonStaticPositioning","existingPositionCss","initBadgeView","origBadgeElem","imagePlaceHolder","newBadge","origSrc","badgeInfo","pageBadgeView","badgeView","hasFixedBody","isToolbarUIRequested","initBPView","badgePlaceholderElem","toolbarView","initBPFeature","fixDimensionsOfBody","getViewInfo","isDocReady","readyState","docReady","onReadyStateChange","badgeReady","bodyReady","CHECK_BODY_INTERVAL","checkBody","initClassicMode","toggleClassicMode","bodyStyle","docStyle","botMargin","marginBottom","topMargin","marginTop","leftMargin","marginLeft","rightMargin","marginRight","isBadgeHidden","isToolbar","badgePalette","badgeHeight","badgeTop","pageYOffset","badgeLeft","pageXOffset","isCtrlKeyDownNow","CTRL_KEY_CODE","onKeyDown","onKeyUp","isCtrlKeyDown","SESSION_SHAKE_COUNT_KEY","MOUSE_POSITIONS_ARRAY_SIZE","MIN_DIR_SWITCHES_FOR_SHAKE","MIN_SHAKE_DIST","MAX_DIST_NON_SHAKE_AXIS","MIN_SHAKE_VIGOR_DECREASE","MAX_SHAKE_VIGOR_DECREASE","SHAKE_DECREASE_MULTIPLIER","SHAKE_INCREASE_POWER","MAX_SHAKE_VIGOR_INCREASE","MAX_SHAKE_VIGOR","MIN_MOVE_SIZE_FOR_SHAKE","MS_BETWEEN_SHAKE_EVENTS","MAX_TIME_BETWEEN_MOVES","METRIC_THRESHOLD_SHAKE_PERCENT_RESET","METRIC_THRESHOLD_SHAKE_PERCENT_FIRE","lastShakeTimeout","mousePositionsQueue","lastShakeVigor","lastShakeVigorPercent","canFireMetricAgain","fireNotifications","onMouseLeave","getMovementSummary","prevMove","xDir","yDir","y","totalDist","xDirectionSwitches","yDirectionSwitches","distanceRequirement","minX","minY","maxX","maxY","currMove","xDelta","xDist","abs","yDelta","yDist","xDirection","yDirection","xSwitches","ySwitches","totalXDist","totalYDist","getShakeVigorIncrease","isShakeX","isShakeY","movementSummary","isMouseShake","distanceFactor","pow","getShakeVigorDecrease","lastDistance","unboundedResult","boundedResult","processMouseMove","numMoves","lastMove","shakeVigorPercent","getDistanceBetweenMoves","shakeVigor","getShakeVigor","screenX","screenY","timeStamp","move1","move2","isShakeIncreaseAllowed","shakeVigorIncrease","shakeVigorDelta","floor","fireShakeVigorMetric","vigor","sessionCount","incrementSessionShakes","numShakes","getItem","bp","CORE_CONST","modifierKeyState","shake","areZoomEnhancementsInitialized","isZoomInitialized","isSpeechInitialized","isZoomOn","isSpeechOn","isKeyReleased","isKeyHandlingInitialized","wasSitecuesEverOn","startSitecuesLoad","isSitecuesOn","performInitialLoadZoom","initialZoom","zoomMod","initZoomEnhancingFeatures","hpan","positioner","cursor","initFromZoom","initSpeech","page","audio","initSitecuesOn","highlight","moveKeys","initThemes","theme","initMouse","onFeatureSettingChange","firePageVisitedMetric","initDetails","startSitecuesInteractive","getCurrentTime","performance","onSitecuesReady","onReady","createPageCssHook","initPageFeatureListeners","themeName","mouseSize","mouseHue","onPossibleTriggerKeyPress","onPossibleScreenPinch","isInitializerKey","ctrlKey","metaKey","altKey","onZoomInitialized","onKeyHandlingInitialized"],"mappings":"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","file":"run.js.map","sourcesContent":["if (sitecues && sitecues.exists) throw new Error(\"The sitecues library already exists on this page.\");\nObject.defineProperty(sitecues, \"version\", { value: \"20161018220841-LOCAL-AARON\", writable: false });\n\"use strict\";\n/**\n * These are modules that the minicore implements for us\n * IMPORTANT: they must be marked as 'empty:' in task/common/amd-config\n * sitecues._getHelperFrame must also be defined by the minicore\n */\nsitecues.define('mini-core/native-global', [], function () { return sitecues._shared.nativeGlobal; });\nsitecues.define('mini-core/page-view', [], function () { return sitecues._shared.pageView; });\nsitecues.define('mini-core/session', [], function () { return sitecues._shared.session; });\nsitecues.define('mini-core/site', [], function () { return sitecues._shared.site; });\nsitecues.define('mini-core/user', [], function () { return sitecues._shared.user; });\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n// Currently only needed for IE11\n// Used for SitecuesPromiseError events, which help log errors that occur inside Sitecues promises\n// Must be inserted before alameda by the build process\n(function () {\n\n  if ( typeof window.CustomEvent === \"function\" ) {\n    return false;\n  }\n\n  function CustomEvent ( event, params ) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent( 'CustomEvent' );\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n\n  window.CustomEvent = CustomEvent;\n})();\n\n// Alameda configuration\n// Must be inserted before alameda by the build process\n\n/* globals SC_RESOURCE_FOLDER_NAME  */\n\nsitecues._require = {\n  defaultErrback: function(error) {\n    var event = new CustomEvent('SitecuesRequireFailure', {detail: error});\n    window.dispatchEvent(event);\n  },\n  waitSeconds: 30,\n  baseUrl: (function(config) {\n    var resourceFolderName = SC_RESOURCE_FOLDER_NAME,\n      scriptUrl = config.scriptUrl || config.script_url, // Old load script sometimes used underscore names, which is deprecated but still supported\n      folderOnly = scriptUrl.substring(0, scriptUrl.lastIndexOf('/js/')),\n      withVersionName = folderOnly + '/' + resourceFolderName + '/js/',\n      withLatestReplaced = withVersionName.replace('/latest/', '/' + resourceFolderName + '/');  // The /latest/ means the current version\n\n    return withLatestReplaced;  // Includes version name so that cached resources are only used with the appropriately matching sitecues.js\n  })(sitecues.everywhereConfig || sitecues.config),\n  map: {\n    '*': {\n      '$': 'page/jquery/jquery'\n    }\n  }\n};\n","var sitecues;(function () { if (!sitecues || !sitecues.requirejs) {\nif (!sitecues) { sitecues = {}; } else { require = sitecues; }\n/**\n * @license alameda-sitecues 0.0.1 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, http://github.com/requirejs/alameda/LICENSE\n */\n// Going sloppy because loader plugin execs may depend on non-strict execution.\n/*jslint sloppy: true, nomen: true, regexp: true */\n/*global document, navigator, importScripts, Promise, setTimeout */\n\n// Supports IE 11, Edge, Safari 9+, modern Chrome, modern Firefox\n// Only uses prim for IE11\n// No support for certain config options: packages, bundles, shim, deps\n\n// ----- BEGIN SITECUES CUSTOM BLOCK -----\n// All custom sitecues code is marked this way\n/* globals -define, -require, importScripts */\n/* jshint proto: true */\n// TODO Once we kill off IE11 we can use alameda.js instead of alameda-prim.js (native promise only)\nvar require = sitecues._require;\n// ----- END SITECUES CUSTOM BLOCK -----\n\nvar requirejs, require, define;\n(function (global, Promise, undef) {\n\n  // ----- BEGIN SITECUES CUSTOM BLOCK -----\n  function reportError(error) {\n    var event = new CustomEvent('SitecuesUnhandledRejection', {detail: error});\n    window.dispatchEvent(event);\n  }\n  // ----- END SITECUES CUSTOM BLOCK -----\n\n  if (!Promise) {\n    //START prim 1.0.0\n    /**\n     * Changes from baseline prim\n     * - removed UMD registration\n     * - Assigns Promise = prim at the bottom.\n     */\n    (function () {\n      'use strict';\n\n      var prim, waitingId, nextTick,\n        waiting = [];\n\n      function callWaiting() {\n        waitingId = 0;\n        var w = waiting;\n        waiting = [];\n        while (w.length) {\n          w.shift()();\n        }\n      }\n\n      function asyncTick(fn) {\n        waiting.push(fn);\n        if (!waitingId) {\n          waitingId = setTimeout(callWaiting, 0);\n        }\n      }\n\n      function isFunObj(x) {\n        var type = typeof x;\n        return type === 'object' || type === 'function';\n      }\n\n      // ----- BEGIN SITECUES CUSTOM BLOCK -----\n      nextTick = asyncTick;\n      // The below code caused SC-3449\n      // Trying to call nextTick() in IE11 on some websites even with the . bind()\n      // caused SCRIPT65535: Invalid calling object\n      //Use setImmediate.bind() because attaching it (or setTimeout directly\n      //to prim will result in errors. Noticed first on IE10,\n      //issue requirejs/alameda#2)\n      //nextTick = typeof setImmediate === 'function' ? setImmediate.bind() :\n      //  (typeof process !== 'undefined' && process.nextTick ?\n      //    process.nextTick : (typeof setTimeout !== 'undefined' ?\n      //    asyncTick : syncTick));\n      // ----- END SITECUES CUSTOM BLOCK -----\n\n      function notify(ary, value) {\n        prim.nextTick(function () {\n          ary.forEach(function (item) {\n            item(value);\n          });\n        });\n      }\n\n      function callback(p, ok, yes) {\n        if (p.hasOwnProperty('v')) {\n          prim.nextTick(function () {\n            yes(p.v);\n          });\n        } else {\n          ok.push(yes);\n        }\n      }\n\n      function errback(p, fail, no) {\n        if (p.hasOwnProperty('e')) {\n          prim.nextTick(function () {\n            no(p.e);\n          });\n        } else {\n          fail.push(no);\n        }\n      }\n\n      prim = function prim(fn) {\n        var promise, f,\n          p = {},\n          ok = [],\n          fail = [];\n\n        function makeFulfill() {\n          var f, f2,\n            called = false;\n\n          function fulfill(v, prop, listeners) {\n            if (called) {\n              return;\n            }\n            called = true;\n\n            if (promise === v) {\n              called = false;\n              f.reject(new TypeError('value is same promise'));\n              return;\n            }\n\n            try {\n              var then = v && v.then;\n              if (isFunObj(v) && typeof then === 'function' &&\n                  // if error, keep on error pathway if a promise,\n                  // 2.2.7.2 tests.\n                prop !== 'e') {\n                f2 = makeFulfill();\n                then.call(v, f2.resolve, f2.reject);\n              } else {\n                p[prop] = v;\n                notify(listeners, v);\n              }\n            } catch (e) {\n              called = false;\n              // ----- BEGIN SITECUES CUSTOM BLOCK -----\n              reportError(e);\n              // ----- END SITECUES CUSTOM BLOCK -----\n              f.reject(e);\n            }\n          }\n\n          f = {\n            resolve: function (v) {\n              fulfill(v, 'v', ok);\n            },\n            reject: function(e) {\n              fulfill(e, 'e', fail);\n            }\n          };\n          return f;\n        }\n\n        f = makeFulfill();\n\n        promise = {\n          then: function (yes, no) {\n            var next = prim(function (nextResolve, nextReject) {\n\n              function finish(fn, nextFn, v) {\n                try {\n                  if (fn && typeof fn === 'function') {\n                    v = fn(v);\n                    nextResolve(v);\n                  } else {\n                    nextFn(v);\n                  }\n                } catch (e) {\n                  // ----- BEGIN SITECUES CUSTOM BLOCK -----\n                  reportError(e);\n                  // ----- END SITECUES CUSTOM BLOCK -----\n                  nextReject(e);\n                }\n              }\n\n              callback(p, ok, finish.bind(undefined, yes, nextResolve));\n              errback(p, fail, finish.bind(undefined, no, nextReject));\n\n            });\n            return next;\n          },\n\n          catch: function (no) {\n            return promise.then(null, no);\n          }\n        };\n\n        try {\n          fn(f.resolve, f.reject);\n        } catch (e) {\n          // ----- BEGIN SITECUES CUSTOM BLOCK -----\n          reportError(e);\n          // ----- END SITECUES CUSTOM BLOCK -----\n          f.reject(e);\n        }\n\n        return promise;\n      };\n\n      prim.resolve = function (value) {\n        return prim(function (yes) {\n          yes(value);\n        });\n      };\n\n      prim.reject = function (err) {\n        return prim(function (yes, no) {\n          no(err);\n        });\n      };\n\n      prim.cast = function (x) {\n        // A bit of a weak check, want \"then\" to be a function,\n        // but also do not want to trigger a getter if accessing\n        // it. Good enough for now.\n        if (isFunObj(x) && 'then' in x) {\n          return x;\n        } else {\n          return prim(function (yes, no) {\n            if (x instanceof Error) {\n              no(x);\n            } else {\n              yes(x);\n            }\n          });\n        }\n      };\n\n      prim.all = function (ary) {\n        return prim(function (yes, no) {\n          var count = 0,\n            length = ary.length,\n            result = [];\n\n          function resolved(i, v) {\n            result[i] = v;\n            count += 1;\n            if (count === length) {\n              yes(result);\n            }\n          }\n\n          if (!ary.length) {\n            yes([]);\n          } else {\n            ary.forEach(function (item, i) {\n              prim.cast(item).then(function (v) {\n                resolved(i, v);\n              }, function (err) {\n                no(err);\n              });\n            });\n          }\n        });\n      };\n\n      prim.nextTick = nextTick;\n      Promise = prim;\n    }());\n    //END prim\n\n  }\n\n  var topReq, setTimeout, slice, hasOwn,\n    bootstrapConfig = requirejs || require,\n    contexts = {},\n    queue = [],\n    // ----- BEGIN SITECUES CUSTOM BLOCK -----\n    //currDirRegExp = /^\\.\\//,\n    // ----- END SITECUES CUSTOM BLOCK -----\n    commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\n    cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g,\n    jsSuffixRegExp = /\\.js$/;\n\n  if (typeof requirejs === 'function') {\n    return;\n  }\n\n  // ----- BEGIN SITECUES CUSTOM BLOCK -----\n  function cacheNativeFnReferences() {\n    hasOwn     = Object.prototype.hasOwnProperty;\n    setTimeout = sitecues._shared.nativeGlobal.setTimeout;\n    slice      = Array.prototype.slice;\n  }\n  // ----- END SITECUES CUSTOM BLOCK -----\n\n  // Could match something like ')//comment', do not lose the prefix to comment.\n  function commentReplace(match, multi, multiText, singlePrefix) {\n    return singlePrefix || '';\n  }\n\n  function hasProp(obj, prop) {\n    return hasOwn.call(obj, prop);\n  }\n\n  function getOwn(obj, prop) {\n    return obj && hasProp(obj, prop) && obj[prop];\n  }\n\n  /**\n   * Cycles over properties in an object and calls a function for each\n   * property value. If the function returns a truthy value, then the\n   * iteration is stopped.\n   */\n  function eachProp(obj, func) {\n    var prop;\n    for (prop in obj) {\n      if (hasProp(obj, prop)) {\n        if (func(obj[prop], prop)) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * Simple function to mix in properties from source into target,\n   * but only if target does not already have a property of the same name.\n   */\n  function mixin(target, source, force, deepStringMixin) {\n    if (source) {\n      eachProp(source, function (value, prop) {\n        if (force || !hasProp(target, prop)) {\n          if (deepStringMixin && typeof value === 'object' && value &&\n            !Array.isArray(value) && typeof value !== 'function' &&\n            !(value instanceof RegExp)) {\n\n            if (!target[prop]) {\n              target[prop] = {};\n            }\n            mixin(target[prop], value, force, deepStringMixin);\n          } else {\n            target[prop] = value;\n          }\n        }\n      });\n    }\n    return target;\n  }\n\n  // ----- BEGIN SITECUES CUSTOM BLOCK -----\n  // Allow getting a global that expressed in\n  // dot notation, like 'a.b.c'.\n  // function getGlobal(value) {\n  //   if (!value) {\n  //     return value;\n  //   }\n  //   var g = global;\n  //   value.split('.').forEach(function (part) {\n  //     g = g[part];\n  //   });\n  //   return g;\n  // }\n  // ----- END SITECUES CUSTOM BLOCK -----\n\n  function newContext(contextName) {\n    var req, main, makeMap, callDep, handlers, checkingLater, load, context,\n      defined = {},\n    // ----- BEGIN SITECUES CUSTOM BLOCK -----\n    //We want Promises to be treated as a module, whether they are native or prim,\n    //so that they can be used via define() and we do not have to change\n    //the global definition of Promise when we do use prim\n      waiting = { Promise:  ['Promise', [], function () { return Promise; }] },\n    // ----- END SITECUES CUSTOM BLOCK -----\n      config = {\n        // Defaults. Do not set a default for map\n        // config to speed up normalize(), which\n        // will run faster if there is no default.\n        baseUrl: './',\n        paths: {},\n        bundles: {},\n        pkgs: {},\n        shim: {},\n        config: {}\n      },\n      mapCache = {},\n      requireDeferreds = [],\n      deferreds = {},\n      calledDefine = {},\n      calledPlugin = {},\n      loadCount = 0,\n      startTime = (new Date()).getTime(),\n      errCount = 0,\n      trackedErrors = {},\n      urlFetched = {},\n      bundlesMap = {},\n      asyncResolve = Promise.resolve();\n\n    /**\n     * Trims the . and .. from an array of path segments.\n     * It will keep a leading path segment if a .. will become\n     * the first path segment, to help with module name lookups,\n     * which act like paths, but can be remapped. But the end result,\n     * all paths that use this function should look normalized.\n     * NOTE: this method MODIFIES the input array.\n     * @param {Array} ary the array of path segments.\n     */\n    function trimDots(ary) {\n      var i, part, length = ary.length;\n      for (i = 0; i < length; i++) {\n        part = ary[i];\n        if (part === '.') {\n          ary.splice(i, 1);\n          i -= 1;\n        } else if (part === '..') {\n          // If at the start, or previous value is still ..,\n          // keep them so that when converted to a path it may\n          // still work when converted to a path, even though\n          // as an ID it is less than ideal. In larger point\n          // releases, may be better to just kick out an error.\n          if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\n            continue;\n          } else if (i > 0) {\n            ary.splice(i - 1, 2);\n            i -= 2;\n          }\n        }\n      }\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @param {Boolean} applyMap apply the map config to the value. Should\n     * only be done if this normalization is for a dependency ID.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName, applyMap) {\n      var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,\n        foundMap, foundI, foundStarMap, starI,\n        baseParts = baseName && baseName.split('/'),\n        normalizedBaseParts = baseParts,\n        map = config.map,\n        starMap = map && map['*'];\n\n\n      //Adjust any relative paths.\n      if (name) {\n        name = name.split('/');\n        lastIndex = name.length - 1;\n\n        // If wanting node ID compatibility, strip .js from end\n        // of IDs. Have to do this here, and not in nameToUrl\n        // because node allows either .js or non .js to map\n        // to same file.\n        if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n          name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n        }\n\n        // Starts with a '.' so need the baseName\n        if (name[0].charAt(0) === '.' && baseParts) {\n          //Convert baseName to array, and lop off the last part,\n          //so that . matches that 'directory' and not name of the baseName's\n          //module. For instance, baseName of 'one/two/three', maps to\n          //'one/two/three.js', but we want the directory, 'one/two' for\n          //this normalization.\n          normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n          name = normalizedBaseParts.concat(name);\n        }\n\n        trimDots(name);\n        name = name.join('/');\n      }\n\n      // Apply map config if available.\n      if (applyMap && map && (baseParts || starMap)) {\n        nameParts = name.split('/');\n\n        outerLoop: for (i = nameParts.length; i > 0; i -= 1) {\n          nameSegment = nameParts.slice(0, i).join('/');\n\n          if (baseParts) {\n            // Find the longest baseName segment match in the config.\n            // So, do joins on the biggest to smallest lengths of baseParts.\n            for (j = baseParts.length; j > 0; j -= 1) {\n              mapValue = getOwn(map, baseParts.slice(0, j).join('/'));\n\n              // baseName segment has config, find if it has one for\n              // this name.\n              if (mapValue) {\n                mapValue = getOwn(mapValue, nameSegment);\n                if (mapValue) {\n                  // Match, update name to the new value.\n                  foundMap = mapValue;\n                  foundI = i;\n                  break outerLoop;\n                }\n              }\n            }\n          }\n\n          // Check for a star map match, but just hold on to it,\n          // if there is a shorter segment match later in a matching\n          // config, then favor over this star map.\n          if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {\n            foundStarMap = getOwn(starMap, nameSegment);\n            starI = i;\n          }\n        }\n\n        if (!foundMap && foundStarMap) {\n          foundMap = foundStarMap;\n          foundI = starI;\n        }\n\n        if (foundMap) {\n          nameParts.splice(0, foundI, foundMap);\n          name = nameParts.join('/');\n        }\n      }\n\n      // If the name points to a package's name, use\n      // the package main instead.\n      pkgMain = getOwn(config.pkgs, name);\n\n      return pkgMain ? pkgMain : name;\n    }\n\n    // ----- BEGIN SITECUES CUSTOM BLOCK -----\n    // Shim is not supported\n    //function makeShimExports(value) {\n    //  function fn() {\n    //    var ret;\n    //    if (value.init) {\n    //      ret = value.init.apply(global, arguments);\n    //    }\n    //    return ret || (value.exports && getGlobal(value.exports));\n    //  }\n    //  return fn;\n    //}\n    // ----- END SITECUES CUSTOM BLOCK -----\n\n    function takeQueue(anonId) {\n      var i, id, args, shim;\n      for (i = 0; i < queue.length; i += 1) {\n        // Peek to see if anon\n        if (typeof queue[i][0] !== 'string') {\n          if (anonId) {\n            queue[i].unshift(anonId);\n            anonId = undef;\n          } else {\n            // Not our anon module, stop.\n            break;\n          }\n        }\n        args = queue.shift();\n        id = args[0];\n        i -= 1;\n\n        if (!hasProp(defined, id) && !hasProp(waiting, id)) {\n          if (hasProp(deferreds, id)) {\n            main.apply(undef, args);\n          } else {\n            waiting[id] = args;\n          }\n        }\n      }\n\n      // if get to the end and still have anonId, then could be\n      // a shimmed dependency.\n      if (anonId) {\n        shim = getOwn(config.shim, anonId) || {};\n        main(anonId, shim.deps || [], shim.exportsFn);\n      }\n    }\n\n    function makeRequire(relName, topLevel) {\n      var req = function (deps, callback, errback, alt) {\n        var name, cfg;\n\n        if (topLevel) {\n          takeQueue();\n        }\n\n        if (typeof deps === \"string\") {\n          if (handlers[deps]) {\n            return handlers[deps](relName);\n          }\n          // Just return the module wanted. In this scenario, the\n          // deps arg is the module name, and second arg (if passed)\n          // is just the relName.\n          // Normalize module name, if it contains . or ..\n          name = makeMap(deps, relName, true).id;\n          if (!hasProp(defined, name)) {\n            throw new Error('Not loaded: ' + name);\n          }\n          return defined[name];\n        } else if (deps && !Array.isArray(deps)) {\n          // deps is a config object, not an array.\n          cfg = deps;\n          deps = undef;\n\n          if (Array.isArray(callback)) {\n            // callback is an array, which means it is a dependency list.\n            // Adjust args if there are dependencies\n            deps = callback;\n            callback = errback;\n            errback = alt;\n          }\n\n          if (topLevel) {\n            // Could be a new context, so call returned require\n            return req.config(cfg)(deps, callback, errback);\n          }\n        }\n\n        // Support require(['a'])\n        callback = callback || function () {\n            // In case used later as a promise then value, return the\n            // arguments as an array.\n            return slice.call(arguments, 0);\n          };\n\n        // Complete async to maintain expected execution semantics.\n        return asyncResolve.then(function () {\n          // Grab any modules that were defined after a require call.\n          takeQueue();\n\n          return main(undef, deps || [], callback, errback, relName);\n        });\n      };\n\n      req.isBrowser = typeof document !== 'undefined' &&\n        typeof navigator !== 'undefined';\n\n      // ----- BEGIN SITECUES CUSTOM BLOCK -----\n      req.nameToUrl = function (moduleName, ext, skipExt) {\n        var syms, url, bundleId = moduleName.split('/')[0];\n\n        if (bundleId && bundleId !== 'locale-data') {  // locale-data is all in one subfolder\n          return config.baseUrl + bundleId + '.js';\n        }\n\n        //A module that needs to be converted to a path.\n        syms = moduleName.split('/');\n\n        // Join the path parts together, then figure out if baseUrl is needed.\n        url = syms.join('/');\n        url += (ext || (/^data\\:|^blob\\:|\\?/.test(url) || skipExt ? '' : '.js'));\n        url = (url.charAt(0) === '/' ||\n          url.match(/^[\\w\\+\\.\\-]+:/) ? '' : config.baseUrl) + url;\n\n        return config.urlArgs && !/^blob\\:/.test(url) ? url + config.urlArgs(moduleName, url) : url;\n      };\n      // ----- END SITECUES CUSTOM BLOCK -----\n\n      /**\n       * Converts a module name + .extension into an URL path.\n       * *Requires* the use of a module name. It does not support using\n       * plain URLs like nameToUrl.\n       */\n      req.toUrl = function (moduleNamePlusExt) {\n        var ext,\n          index = moduleNamePlusExt.lastIndexOf('.'),\n          segment = moduleNamePlusExt.split('/')[0],\n          isRelative = segment === '.' || segment === '..';\n\n        // Have a file extension alias, and it is not the\n        // dots from a relative path.\n        if (index !== -1 && (!isRelative || index > 1)) {\n          ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);\n          moduleNamePlusExt = moduleNamePlusExt.substring(0, index);\n        }\n\n        return req.nameToUrl(normalize(moduleNamePlusExt, relName), ext, true);\n      };\n\n      req.defined = function (id) {\n        return hasProp(defined, makeMap(id, relName, true).id);\n      };\n\n      req.specified = function (id) {\n        id = makeMap(id, relName, true).id;\n        return hasProp(defined, id) || hasProp(deferreds, id);\n      };\n\n      return req;\n    }\n\n    function resolve(name, d, value) {\n      if (name) {\n        defined[name] = value;\n        if (requirejs.onResourceLoad) {\n          requirejs.onResourceLoad(context, d.map, d.deps);\n        }\n      }\n      d.finished = true;\n      d.resolve(value);\n    }\n\n    function reject(d, err) {\n      d.finished = true;\n      d.rejected = true;\n      d.reject(err);\n    }\n\n    function makeNormalize(relName) {\n      return function (name) {\n        return normalize(name, relName, true);\n      };\n    }\n\n    function defineModule(d) {\n      d.factoryCalled = true;\n\n      var ret,\n        name = d.map.id;\n\n      try {\n        ret = d.factory.apply(defined[name], d.values);\n      } catch(err) {\n        return reject(d, err);\n      }\n\n      if (name) {\n        // Favor return value over exports. If node/cjs in play,\n        // then will not have a return value anyway. Favor\n        // module.exports assignment over exports object.\n        if (ret === undef) {\n          if (d.cjsModule) {\n            ret = d.cjsModule.exports;\n          } else if (d.usingExports) {\n            ret = defined[name];\n          }\n        }\n      } else {\n        // Remove the require deferred from the list to\n        // make cycle searching faster. Do not need to track\n        // it anymore either.\n        requireDeferreds.splice(requireDeferreds.indexOf(d), 1);\n      }\n      resolve(name, d, ret);\n    }\n\n    // This method is attached to every module deferred,\n    // so the \"this\" in here is the module deferred object.\n    function depFinished(val, i) {\n      if (!this.rejected && !this.depDefined[i]) {\n        this.depDefined[i] = true;\n        this.depCount += 1;\n        this.values[i] = val;\n        if (!this.depending && this.depCount === this.depMax) {\n          defineModule(this);\n        }\n      }\n    }\n\n    function makeDefer(name) {\n      var d = {};\n      d.promise = new Promise(function (resolve, reject) {\n        d.resolve = resolve;\n        d.reject = function(err) {\n          if (!name) {\n            requireDeferreds.splice(requireDeferreds.indexOf(d), 1);\n          }\n          reject(err);\n        };\n      });\n      d.map = name ? makeMap(name, null, true) : {};\n      d.depCount = 0;\n      d.depMax = 0;\n      d.values = [];\n      d.depDefined = [];\n      d.depFinished = depFinished;\n      if (d.map.pr) {\n        // Plugin resource ID, implicitly\n        // depends on plugin. Track it in deps\n        // so cycle breaking can work\n        d.deps = [makeMap(d.map.pr)];\n      }\n      return d;\n    }\n\n    function getDefer(name) {\n      var d;\n      if (name) {\n        d = hasProp(deferreds, name) && deferreds[name];\n        if (!d) {\n          d = deferreds[name] = makeDefer(name);\n        }\n      } else {\n        d = makeDefer();\n        requireDeferreds.push(d);\n      }\n      return d;\n    }\n\n    function makeErrback(d, name) {\n      return function (err) {\n        if (!d.rejected) {\n          if (!err.dynaId) {\n            err.dynaId = 'id' + (errCount += 1);\n            err.requireModules = [name];\n          }\n          reject(d, err);\n        }\n      };\n    }\n\n    function waitForDep(depMap, relName, d, i) {\n      d.depMax += 1;\n\n      // Do the fail at the end to catch errors\n      // in the then callback execution.\n      callDep(depMap, relName).then(function (val) {\n        d.depFinished(val, i);\n      }, makeErrback(d, depMap.id)).catch(makeErrback(d, d.map.id));\n    }\n\n    function makeLoad(id) {\n      var fromTextCalled;\n      function load(value) {\n        // Protect against older plugins that call load after\n        // calling load.fromText\n        if (!fromTextCalled) {\n          resolve(id, getDefer(id), value);\n        }\n      }\n\n      load.error = function (err) {\n        getDefer(id).reject(err);\n      };\n\n      load.fromText = function (text, textAlt) {\n        /*jslint evil: true */\n        var d = getDefer(id),\n          map = makeMap(makeMap(id).n),\n          plainId = map.id;\n\n        fromTextCalled = true;\n\n        // Set up the factory just to be a return of the value from\n        // plainId.\n        d.factory = function (p, val) {\n          return val;\n        };\n\n        // As of requirejs 2.1.0, support just passing the text, to reinforce\n        // fromText only being called once per resource. Still\n        // support old style of passing moduleName but discard\n        // that moduleName in favor of the internal ref.\n        if (textAlt) {\n          text = textAlt;\n        }\n\n        // Transfer any config to this other module.\n        if (hasProp(config.config, id)) {\n          config.config[plainId] = config.config[id];\n        }\n\n        try {\n          req.exec(text);\n        } catch (e) {\n          reject(d, new Error('fromText eval for ' + plainId +\n            ' failed: ' + e));\n        }\n\n        // Execute any waiting define created by the plainId\n        takeQueue(plainId);\n\n        // Mark this as a dependency for the plugin\n        // resource\n        d.deps = [map];\n        waitForDep(map, null, d, d.deps.length);\n      };\n\n      return load;\n    }\n\n    load = typeof importScripts === 'function' ?\n      function (map) {\n        var url = map.url;\n        if (urlFetched[url]) {\n          return;\n        }\n        urlFetched[url] = true;\n\n        // Ask for the deferred so loading is triggered.\n        // Do this before loading, since loading is sync.\n        getDefer(map.id);\n        importScripts(url);\n        takeQueue(map.id);\n      } :\n      function (map) {\n        var script,\n          id = map.id,\n          url = map.url;\n\n        if (urlFetched[url]) {\n          return;\n        }\n        urlFetched[url] = true;\n\n        script = document.createElement('script');\n        // ----- BEGIN SITECUES CUSTOM BLOCK -----\n        // We need this so that we have permission to log unhandled rejections/exceptions from our cross-origin scripts\n        script.setAttribute('crossorigin', 'anonymous');\n        // ----- END SITECUES CUSTOM BLOCK -----\n        script.setAttribute('data-requiremodule', id);\n        script.type = config.scriptType || 'text/javascript';\n        script.charset = 'utf-8';\n        script.async = true;\n\n        loadCount += 1;\n\n        script.addEventListener('load', function () {\n          loadCount -= 1;\n          takeQueue(id);\n        }, false);\n        script.addEventListener('error', function () {\n          loadCount -= 1;\n          var err,\n            pathConfig = getOwn(config.paths, id),\n            d = getOwn(deferreds, id);\n          if (pathConfig && Array.isArray(pathConfig) &&\n            pathConfig.length > 1) {\n            script.parentNode.removeChild(script);\n            // Pop off the first array value, since it failed, and\n            // retry\n            pathConfig.shift();\n            d.map = makeMap(id);\n            load(d.map);\n          } else {\n            err = new Error('Load failed: ' + id + ': ' + script.src);\n            err.requireModules = [id];\n            getDefer(id).reject(err);\n          }\n        }, false);\n\n        script.src = url;\n\n        document.head.appendChild(script);\n      };\n\n    function callPlugin(plugin, map, relName) {\n      plugin.load(map.n, makeRequire(relName), makeLoad(map.id), config);\n    }\n\n    callDep = function (map, relName) {\n      var args, bundleId,\n        name = map.id,\n        shim = config.shim[name];\n\n      if (hasProp(waiting, name)) {\n        args = waiting[name];\n        delete waiting[name];\n        main.apply(undef, args);\n      } else if (!hasProp(deferreds, name)) {\n        if (map.pr) {\n          // If a bundles config, then just load that file instead to\n          // resolve the plugin, as it is built into that bundle.\n          if ((bundleId = getOwn(bundlesMap, name))) {\n            map.url = req.nameToUrl(bundleId);\n            load(map);\n          } else {\n            return callDep(makeMap(map.pr)).then(function (plugin) {\n              // Redo map now that plugin is known to be loaded\n              var newMap = makeMap(name, relName, true),\n                newId = newMap.id,\n                shim = getOwn(config.shim, newId);\n\n              // Make sure to only call load once per resource. Many\n              // calls could have been queued waiting for plugin to load.\n              if (!hasProp(calledPlugin, newId)) {\n                calledPlugin[newId] = true;\n                if (shim && shim.deps) {\n                  req(shim.deps, function () {\n                    callPlugin(plugin, newMap, relName);\n                  });\n                } else {\n                  callPlugin(plugin, newMap, relName);\n                }\n              }\n              return getDefer(newId).promise;\n            });\n          }\n        } else if (shim && shim.deps) {\n          req(shim.deps, function () {\n            load(map);\n          });\n        } else {\n          load(map);\n        }\n      }\n\n      return getDefer(name).promise;\n    };\n\n    // Turns a plugin!resource to [plugin, resource]\n    // with the plugin being undefined if the name\n    // did not have a plugin prefix.\n    function splitPrefix(name) {\n      var prefix,\n        index = name ? name.indexOf('!') : -1;\n      if (index > -1) {\n        prefix = name.substring(0, index);\n        name = name.substring(index + 1, name.length);\n      }\n      return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName, applyMap) {\n      if (typeof name !== 'string') {\n        return name;\n      }\n\n      var plugin, url, parts, prefix, result,\n        cacheKey = name + ' & ' + (relName || '') + ' & ' + !!applyMap;\n\n      parts = splitPrefix(name);\n      prefix = parts[0];\n      name = parts[1];\n\n      if (!prefix && hasProp(mapCache, cacheKey)) {\n        return mapCache[cacheKey];\n      }\n\n      if (prefix) {\n        prefix = normalize(prefix, relName, applyMap);\n        plugin = hasProp(defined, prefix) && defined[prefix];\n      }\n\n      // Normalize according\n      if (prefix) {\n        if (plugin && plugin.normalize) {\n          name = plugin.normalize(name, makeNormalize(relName));\n        } else {\n          // If nested plugin references, then do not try to\n          // normalize, as it will not normalize correctly. This\n          // places a restriction on resourceIds, and the longer\n          // term solution is not to normalize until plugins are\n          // loaded and all normalizations to allow for async\n          // loading of a loader plugin. But for now, fixes the\n          // common uses. Details in requirejs#1131\n          name = name.indexOf('!') === -1 ?\n            normalize(name, relName, applyMap) :\n            name;\n        }\n      } else {\n        name = normalize(name, relName, applyMap);\n        parts = splitPrefix(name);\n        prefix = parts[0];\n        name = parts[1];\n\n        url = req.nameToUrl(name);\n      }\n\n      // Using ridiculous property names for space reasons\n      result = {\n        id: prefix ? prefix + '!' + name : name, // fullName\n        n: name,\n        pr: prefix,\n        url: url\n      };\n\n      if (!prefix) {\n        mapCache[cacheKey] = result;\n      }\n\n      return result;\n    };\n\n    handlers = {\n      require: function (name) {\n        return makeRequire(name);\n      },\n      exports: function (name) {\n        var e = defined[name];\n        if (typeof e !== 'undefined') {\n          return e;\n        } else {\n          return (defined[name] = {});\n        }\n      },\n      module: function (name) {\n        return {\n          id: name,\n          uri: '',\n          exports: handlers.exports(name),\n          config: function () {\n            return getOwn(config.config, name) || {};\n          }\n        };\n      }\n    };\n\n    function breakCycle(d, traced, processed) {\n      var id = d.map.id;\n\n      traced[id] = true;\n      if (!d.finished && d.deps) {\n        d.deps.forEach(function (depMap) {\n          var depId = depMap.id,\n            dep = !hasProp(handlers, depId) && getDefer(depId);\n\n          // Only force things that have not completed\n          // being defined, so still in the registry,\n          // and only if it has not been matched up\n          // in the module already.\n          if (dep && !dep.finished && !processed[depId]) {\n            if (hasProp(traced, depId)) {\n              d.deps.forEach(function (depMap, i) {\n                if (depMap.id === depId) {\n                  d.depFinished(defined[depId], i);\n                }\n              });\n            } else {\n              breakCycle(dep, traced, processed);\n            }\n          }\n        });\n      }\n      processed[id] = true;\n    }\n\n    function check(d) {\n      var err,\n        notFinished = [],\n        waitInterval = config.waitSeconds * 1000,\n      // It is possible to disable the wait interval by using waitSeconds 0.\n        expired = waitInterval &&\n          (startTime + waitInterval) < (new Date()).getTime();\n\n      if (loadCount === 0) {\n        // If passed in a deferred, it is for a specific require call.\n        // Could be a sync case that needs resolution right away.\n        // Otherwise, if no deferred, means it was the last ditch\n        // timeout-based check, so check all waiting require deferreds.\n        if (d) {\n          if (!d.finished) {\n            breakCycle(d, {}, {});\n          }\n        } else if (requireDeferreds.length) {\n          requireDeferreds.forEach(function (d) {\n            breakCycle(d, {}, {});\n          });\n        }\n      }\n\n      // If still waiting on loads, and the waiting load is something\n      // other than a plugin resource, or there are still outstanding\n      // scripts, then just try back later.\n      if (expired) {\n        // If wait time expired, throw error of unloaded modules.\n        eachProp(deferreds, function (d) {\n          if (!d.finished) {\n            notFinished.push(d.map.id);\n          }\n        });\n        err = new Error('Timeout for modules: ' + notFinished);\n        err.requireModules = notFinished;\n        req.onError(err);\n      } else\n      if (loadCount || requireDeferreds.length) {\n        // Something is still waiting to load. Wait for it, but only\n        // if a later check is not already scheduled. Using setTimeout\n        // because want other things in the event loop to happen,\n        // to help in dependency resolution, and this is really a\n        // last ditch check, mostly for detecting timeouts (cycles\n        // should come through the main() use of check()), so it can\n        // wait a bit before doing the final check.\n        if (!checkingLater) {\n          checkingLater = true;\n          setTimeout(function () {\n            checkingLater = false;\n            check();\n          }, 70);\n        }\n      }\n    }\n\n    // Used to break out of the promise try/catch chains.\n    function delayedError(e) {\n      setTimeout(function () {\n        if (!e.dynaId || !trackedErrors[e.dynaId]) {\n          trackedErrors[e.dynaId] = true;\n          req.onError(e);\n        }\n      });\n      return e;\n    }\n\n    main = function (name, deps, factory, errback, relName) {\n      // Only allow main calling once per module.\n      if (name && hasProp(calledDefine, name)) {\n        return;\n      }\n      calledDefine[name] = true;\n\n      var d = getDefer(name);\n\n      // This module may not have dependencies\n      if (deps && !Array.isArray(deps)) {\n        // deps is not an array, so probably means\n        // an object literal or factory function for\n        // the value. Adjust args.\n        factory = deps;\n        deps = [];\n      }\n\n      if (!errback) {\n        if (hasProp(config, 'defaultErrback')) {\n          if (config.defaultErrback) {\n            errback = config.defaultErrback;\n          }\n        } else {\n          errback = delayedError;\n        }\n      }\n\n      if (errback) {\n        d.promise.catch(errback);\n      }\n\n      // Use name if no relName\n      relName = relName || name;\n\n      // Call the factory to define the module, if necessary.\n      if (typeof factory === 'function') {\n\n        if (!deps.length && factory.length) {\n          // Remove comments from the callback string,\n          // look for require calls, and pull them into the dependencies,\n          // but only if there are function args.\n          factory\n            .toString()\n            .replace(commentRegExp, commentReplace)\n            .replace(cjsRequireRegExp, function (match, dep) {\n              deps.push(dep);\n            });\n\n          // May be a CommonJS thing even without require calls, but still\n          // could use exports, and module. Avoid doing exports and module\n          // work though if it just needs require.\n          // REQUIRES the function to expect the CommonJS variables in the\n          // order listed below.\n          deps = (factory.length === 1 ?\n            ['require'] :\n            ['require', 'exports', 'module']).concat(deps);\n        }\n\n        // Save info for use later.\n        d.factory = factory;\n        d.deps = deps;\n\n        d.depending = true;\n        deps.forEach(function (depName, i) {\n          var depMap;\n          deps[i] = depMap = makeMap(depName, relName, true);\n          depName = depMap.id;\n\n          // Fast path CommonJS standard dependencies.\n          if (depName === \"require\") {\n            d.values[i] = handlers.require(name);\n          } else if (depName === \"exports\") {\n            // CommonJS module spec 1.1\n            d.values[i] = handlers.exports(name);\n            d.usingExports = true;\n          } else if (depName === \"module\") {\n            // CommonJS module spec 1.1\n            d.values[i] = d.cjsModule = handlers.module(name);\n          } else if (depName === undefined) {\n            d.values[i] = undefined;\n          } else {\n            waitForDep(depMap, relName, d, i);\n          }\n        });\n        d.depending = false;\n\n        // Some modules just depend on the require, exports, modules, so\n        // trigger their definition here if so.\n        if (d.depCount === d.depMax) {\n          defineModule(d);\n        }\n      } else if (name) {\n        // May just be an object definition for the module. Only\n        // worry about defining if have a module name.\n        resolve(name, d, factory);\n      }\n\n      startTime = (new Date()).getTime();\n\n      if (!name) {\n        check(d);\n      }\n\n      return d.promise;\n    };\n\n    req = makeRequire(null, true);\n\n    /*\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n      if (cfg.context && cfg.context !== contextName) {\n        return newContext(cfg.context).config(cfg);\n      }\n\n      // Since config changed, mapCache may not be valid any more.\n      mapCache = {};\n\n      // Make sure the baseUrl ends in a slash.\n      if (cfg.baseUrl) {\n        if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {\n          cfg.baseUrl += '/';\n        }\n      }\n\n      // ----- BEGIN SITECUES CUSTOM BLOCK -----\n      // No support for urlArgs config\n      //// Convert old style urlArgs string to a function.\n      //if (typeof cfg.urlArgs === 'string') {\n      //  var urlArgs = cfg.urlArgs;\n      //  cfg.urlArgs = function(id, url) {\n      //    return (url.indexOf('?') === -1 ? '?' : '&') + urlArgs;\n      //  };\n      //}\n      // ----- END SITECUES CUSTOM BLOCK -----\n\n      // Save off the paths and packages since they require special processing,\n      // they are additive.\n      var // shim = config.shim,\n        objs = {\n          paths: true,\n          bundles: true,\n          config: true,\n          map: true\n        };\n\n      eachProp(cfg, function (value, prop) {\n        if (objs[prop]) {\n          if (!config[prop]) {\n            config[prop] = {};\n          }\n          mixin(config[prop], value, true, true);\n        } else {\n          config[prop] = value;\n        }\n      });\n\n      // ----- BEGIN SITECUES CUSTOM BLOCK -----\n      // Removing unused code for bundles, shim, packages, deps\n      // Reverse map the bundles\n      //if (cfg.bundles) {\n      //  eachProp(cfg.bundles, function (value, prop) {\n      //    value.forEach(function (v) {\n      //      if (v !== prop) {\n      //        bundlesMap[v] = prop;\n      //      }\n      //    });\n      //  });\n      //}\n      //\n      //// Merge shim\n      //if (cfg.shim) {\n      //  eachProp(cfg.shim, function (value, id) {\n      //    // Normalize the structure\n      //    if (Array.isArray(value)) {\n      //      value = {\n      //        deps: value\n      //      };\n      //    }\n      //    if ((value.exports || value.init) && !value.exportsFn) {\n      //      value.exportsFn = makeShimExports(value);\n      //    }\n      //    shim[id] = value;\n      //  });\n      //  config.shim = shim;\n      //}\n      //\n      //// Adjust packages if necessary.\n      //if (cfg.packages) {\n      //  cfg.packages.forEach(function (pkgObj) {\n      //    var location, name;\n      //\n      //    pkgObj = typeof pkgObj === 'string' ? { name: pkgObj } : pkgObj;\n      //\n      //    name = pkgObj.name;\n      //    location = pkgObj.location;\n      //    if (location) {\n      //      config.paths[name] = pkgObj.location;\n      //    }\n      //\n      //    // Save pointer to main module ID for pkg name.\n      //    // Remove leading dot in main, so main paths are normalized,\n      //    // and remove any trailing .js, since different package\n      //    // envs have different conventions: some use a module name,\n      //    // some use a file name.\n      //    config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')\n      //        .replace(currDirRegExp, '')\n      //        .replace(jsSuffixRegExp, '');\n      //  });\n      //}\n      //\n      //// If a deps array or a config callback is specified, then call\n      //// require with those args. This is useful when require is defined as a\n      //// config object before require.js is loaded.\n      //if (cfg.deps || cfg.callback) {\n      //  req(cfg.deps, cfg.callback);\n      //}\n      // ----- END SITECUES CUSTOM BLOCK -----\n\n      return req;\n    };\n\n    req.onError = function (err) {\n      throw err;\n    };\n\n    context = {\n      id: contextName,\n      defined: defined,\n      waiting: waiting,\n      config: config,\n      deferreds: deferreds\n    };\n\n    contexts[contextName] = context;\n\n    return req;\n  }\n\n  // ----- BEGIN SITECUES CUSTOM BLOCK -----\n  cacheNativeFnReferences();\n  // ----- END SITECUES CUSTOM BLOCK -----\n\n  requirejs = topReq = newContext('_');\n\n  if (typeof require !== 'function') {\n    require = topReq;\n  }\n\n  /**\n   * Executes the text. Normally just uses eval, but can be modified\n   * to use a better, environment-specific call. Only used for transpiling\n   * loader plugins, not for plain JS modules.\n   * @param {String} text the text to execute/evaluate.\n   */\n  topReq.exec = function (text) {\n    /*jslint evil: true */\n    return eval(text);\n  };\n\n  topReq.contexts = contexts;\n\n  define = function () {\n    queue.push(slice.call(arguments, 0));\n  };\n\n  define.amd = {\n    jQuery: true\n  };\n\n  if (bootstrapConfig) {\n    topReq.config(bootstrapConfig);\n  }\n\n  // ----- BEGIN SITECUES CUSTOM BLOCK -----\n  // Removing data-main support as it is not needed. In fact it is not acceptable because we are a 3rd party\n  // application and customers have no reason to assume we would run data-main scripts.\n  //// data-main support.\n  //if (topReq.isBrowser && !contexts._.config.skipDataMain) {\n  //  dataMain = document.querySelectorAll('script[data-main]')[0];\n  //  dataMain = dataMain && dataMain.getAttribute('data-main');\n  //  if (dataMain) {\n  //    // Strip off any trailing .js since dataMain is now\n  //    // like a module name.\n  //    dataMain = dataMain.replace(jsSuffixRegExp, '');\n  //\n  //    // Set final baseUrl if there is not already an explicit one,\n  //    // but only do so if the data-main value is not a loader plugin\n  //    // module ID.\n  //    if ((!bootstrapConfig || !bootstrapConfig.baseUrl) &&\n  //      dataMain.indexOf('!') === -1) {\n  //      // Pull off the directory of data-main for use as the\n  //      // baseUrl.\n  //      src = dataMain.split('/');\n  //      dataMain = src.pop();\n  //      subPath = src.length ? src.join('/')  + '/' : './';\n  //\n  //      topReq.config({baseUrl: subPath});\n  //    }\n  //\n  //    topReq([dataMain]);\n  //  }\n  //}\n// ----- END SITECUES CUSTOM BLOCK -----\n}(this, (typeof Promise !== 'undefined' ? Promise : undefined)));\n\nsitecues.requirejs = requirejs;sitecues.require = require;sitecues.define = define;\n}\n}());\nsitecues.define(\"run/prereq/alameda-custom\", function(){});\n\n","sitecues.define(\n  'run/util/object-utility',[],\n  function () {\n  'use strict';\n\n  // Using the MDN polyfill for IE11\n  var assign = typeof Object.assign === 'function' ? Object.assign : function assign(target) {\n    if (target === undefined || target === null) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    target = Object(target);\n    Array.prototype.slice.call(arguments, 1).forEach(function (source) {\n      if (source !== undefined && source !== null) {\n        Object.keys(source).forEach(function (key) {\n          target[key] = source[key];\n        });\n      }\n    });\n\n    return target;\n  };\n\n  return {\n    assign : assign\n  };\n});\n","sitecues.define(\n  'run/conf/preferences',[\n    'mini-core/user',\n    'run/util/object-utility'\n  ],\n  function (\n    user,\n    objectUtil\n  ) {\n  'use strict';\n\n  var cachedPrefs,\n      handlers  = {},\n      listeners = {};\n\n  // Listeners are passed new preference values once they've been handled\n  function bindListener(key, listener) {\n    var prefValue = getPref(key);\n\n    if (typeof prefValue !== 'undefined') {\n      // Here we're perpetuating a pattern from the previous module design, if the\n      // value has already been defined when we bind this listener, call the listener\n      // with the current value. It's a little funky\n      listener(prefValue);\n    }\n\n    listeners[key] = listeners[key] || [];\n    listeners[key].push(listener);\n  }\n\n  // Handlers are passed new preference values, and the return value is saved and passed to\n  // listeners to the preference\n  function defineHandler(key, handler) {\n    // set handler for key\n    if (typeof handler === 'function') {\n      handlers[key] = handler;\n    }\n  }\n\n  // If callback is defined,\n  function getPref(key) {\n    if (!key) {\n      return objectUtil.assign({}, cachedPrefs);\n    }\n    return cachedPrefs[key];\n  }\n\n  function setPref(key, value) {\n    var safeValue;\n\n    if (handlers[key]) {\n      safeValue = handlers[key](value);\n    }\n    else {\n      safeValue = value;\n    }\n\n    if (listeners[key]) {\n      listeners.forEach(function (listener) {\n        listener(safeValue);\n      });\n    }\n\n    cachedPrefs[key] = safeValue;\n\n    user.setPref(cachedPrefs);\n  }\n\n  function unset(key) {\n    setPref(key, undefined);\n  }\n\n  // Reset all settings as if it is a new user\n  function resetPrefs() {\n    // Undefine all settings and call setting notification callbacks\n    Object.keys(cachedPrefs).forEach(unset);\n  }\n\n  function hasPref(key) {\n    return Boolean(cachedPrefs[key]);\n  }\n\n  function init() {\n    return user.getPref().then(function (prefs) {\n      cachedPrefs = prefs;\n    });\n  }\n\n  return {\n    get           : getPref,\n    set           : setPref,\n    has           : hasPref,\n    reset         : resetPrefs,\n    defineHandler : defineHandler,\n    bindListener  : bindListener,\n    init          : init\n  };\n});\n\n","sitecues.define(\n  'run/conf/id',[\n    'mini-core/user',\n    'mini-core/session',\n    'mini-core/page-view',\n    'mini-core/site'\n  ],\n  function(\n    user,\n    session,\n    pageView,\n    site\n  ) {\n  'use strict';\n\n  var exports = { init: init };\n\n  function init() {\n    return user.getId().then(function (userId) {\n      // Only the user id needs to be fetch asynchronously (it is retrieved from global storage)\n      exports.session  = session.getId();\n      exports.pageView = pageView.getId();\n      exports.user     = userId;\n      exports.site     = site.getId();\n    });\n  }\n\n  return exports;\n});\n\n","/**\n * This module is responsible for handling site configuration. This configuration can be supplied in\n * two ways:\n *   1) The 'window.sitecues.config' object:\n *         This object is required and must have at least the 'siteId' and 'scriptUrl' properties. This\n *         requirement is validated by core.js\n *   2) The web services server\n *         This configuration is currently not required, and inability to fetch these setting should be handled\n *         gracefully by the library (e.g., disable TTS, do not crash the web page).\n *\n *   All properties provided in 'window.sitecues.config' currently take precedence over the server configuration.\n *   However, in the future this will be updated so that a customer can not, for example, override the TTS provider\n *   with one that is not available to them.\n */\nsitecues.define('run/conf/site',[], function() {\n\n  var\n    providedSiteConfig,\n    everywhereConfig;\n\n  // Get the site configuration property\n  function get(key) {\n    return everywhereConfig[key] || providedSiteConfig[key];\n  }\n\n  // Names with underscores deprecated.\n  // Here is the order of precedence:\n  // 1. sitecues everywhere siteId\n  // 2. sitecues.config.siteId (camelCase is the new way)\n  // 3. sitecues.config.site_id (underscore in config field names is deprecated)\n  function getSiteId() {\n    var siteId = everywhereConfig.siteId || providedSiteConfig.siteId || providedSiteConfig.site_id;\n    return siteId && siteId.trim();\n  }\n\n  // Get the entire site config object\n  function getProvidedSiteConfig() {\n    return sitecues.config || {};\n  }\n\n  // Configuration for sitecues everywhere, if it exists\n  // TODO Should go away once we go to the new extension which is entirely in a content script\n  function getEverywhereConfig() {\n    return sitecues.everywhereConfig || {};\n  }\n\n  function init() {\n    providedSiteConfig = getProvidedSiteConfig();\n    everywhereConfig = getEverywhereConfig();\n  }\n\n  return {\n    init : init,\n    get: get,\n    getSiteId: getSiteId,\n    getSiteConfig: getProvidedSiteConfig,\n    getEverywhereConfig: getEverywhereConfig\n  };\n});\n\n","/**\n * data-map implementation for the IN-PAGE library (not extension)\n * This returns the data for a data module name.\n * Data is retrieved from the network as needed\n * Example of data folder is locale-data\n * See source-folders.json to get a list of data folders\n */\nsitecues.define('run/data-map',[], function() {\n  // Hack: sitecues.require() is used instead of require() so that we can use it with a variable name\n  function get(dataModuleName, callback) {\n    sitecues.require([ dataModuleName ], function(data) {\n      callback(data);\n    });\n  }\n\n  return {\n    get: get\n  };\n});\n","/**\n * Localization / language functions, such as:\n * - Get the current language for the document or an element\n * - Provide localized strings for current language\n * - Translate text with {{keys}} in it\n * - Localize a number string\n *\n * Definitions:\n * - lang is a 2 letter code such as 'en'\n * - locale is either a lang or can include more info, such as 'en-GB'\n */\nsitecues.define('run/locale',[ 'run/data-map', 'Promise' ], function(dataMap, Promise) {\n  var translations = {},\n    DEFAULT_LOCALE = 'en-us',\n    LOCALE_DATA_PREFIX = 'locale-data/',\n    SUPPORTED_UI_LANGS = {'de':1, 'en':1, 'es':1, 'fr':1, 'pl':1, 'sv':1 },\n    // Countries which have localization files that are different from the default for that language\n    // For example, en-us files use 'color' instead of the worldwide standard 'colour'\n    COUNTRY_EXCEPTIONS = { 'en-US': 1 },\n    mainBrowserLocale;\n\n  // Get the language but not the regional differences\n  // For example, return just 'en' but not 'en-US'.\n  function getLanguageFromLocale(locale) {\n    return locale.split('-')[0];\n  }\n\n  // The the full xx-XX code for the web page\n  function getPageLocale() {\n    var\n      docElem = document.documentElement,\n      docLocales = [getTranslationLocale(), docElem.lang, docElem.getAttribute('xml:lang'), getMetaTagLocale()],\n      validDocLocale;\n\n    docLocales.some(function (locale) {\n      if (isValidLocale(locale)) {\n        validDocLocale = locale;\n        return true;\n      }\n    });\n\n    return validDocLocale || mainBrowserLocale || DEFAULT_LOCALE;\n  }\n\n  function getCookies() {\n    var chunks = document.cookie.split('; '),\n      cookies = {}, index = chunks.length, nameValSplit;\n\n    while (index--) {\n      nameValSplit = chunks[index].split('=');\n      cookies[nameValSplit[0]] = nameValSplit[1];\n    }\n\n    return cookies;\n  }\n\n  // TODO bing translator\n  function getTranslationLocale() {\n    var googtrans = getCookies().googtrans;\n    // In format of /fromlang/tolang\n    return googtrans && googtrans.substring(googtrans.lastIndexOf('/') + 1);\n  }\n\n  function isValidLocale(locale) {\n    // Regex from http://stackoverflow.com/questions/3962543/how-can-i-validate-a-culture-code-with-a-regular-expression\n    var VALID_LOCALE_REGEX = /^[a-z]{2,3}(?:-[A-Z]{2,3}(?:-[a-zA-Z]{4})?)?$/;\n    return locale && locale.match(VALID_LOCALE_REGEX);\n  }\n\n  function getMetaTagLocale() {\n    var META_LANG_SELECTOR = 'meta[name=language],meta[http-equiv=language],meta[name=Content-Language],meta[http-equiv=Content-Language]',\n      // TODO Once we kill off Firefox < 47 and Chrome < 49 we can do a case insensitive check:\n      // 'meta[name=language i],meta[http-equiv=language i],meta[name=Content-Language i],meta[http-equiv=Content-Language i]',\n      metaLocaleElement = document.querySelector(META_LANG_SELECTOR),\n      metaLocale;\n\n    if (metaLocaleElement) {\n      metaLocale = metaLocaleElement.getAttribute('content').split(',')[0].trim();  // Can be comma-separated\n      // Validate the format of the attribute -- some docs online use invalid strings such as 'Spanish'\n      return isValidLocale(metaLocale) && metaLocale;\n    }\n  }\n\n  /**\n   * Represents website language.\n   * For example, returns 'en', 'de'\n   * If there are country-specific translation exceptions, such as 'en-US', we strip the last part and return only 'en'\n   * @returns String\n   */\n  function getLang() {\n    var websiteLanguage = getPageLocale();\n    return getLanguageFromLocale(websiteLanguage);\n  }\n\n  function getSupportedUiLang() {\n    var lang = getLang();\n\n    return SUPPORTED_UI_LANGS[lang] ? lang : DEFAULT_LOCALE;\n  }\n\n  // If document is in the same language as the browser, then\n  // we should prefer to use the browser's country-specific version of that language.\n  // This helps make sure UK users get a UK accent on all English sites, for example.\n  // We now check all the preferred languages of the browser.\n  // @param countriesWhiteList -- if provided, it is the list of acceptable fully country codes, e.g. en-US.\n  // If not provided, all countries and langs are acceptable\n  // @param langsWhiteList -- if provided, it is the list of acceptable languages.\n  function swapToPreferredRegion(locale, countriesWhiteList, langsWhiteList) {\n\n    var langPrefix = getLanguageFromLocale(locale),\n      prioritizedBrowserLocales = (function() {\n        var browserLocales = (navigator.languages || [ ]).slice();\n        // Put the mainBrowserLang at the start of the prioritized list of languages\n        if (!browserLocales.length) {\n          browserLocales = [ mainBrowserLocale ];\n        }\n        return browserLocales;\n      })(),\n      langWithCountry,\n      index = 0;\n\n    function extendLangWith(extendCode) {\n      if (extendCode.indexOf('-') > 0 && langPrefix === getLanguageFromLocale(extendCode)) {\n        if (!countriesWhiteList || countriesWhiteList.hasOwnProperty(extendCode)) {\n          return extendCode;\n        }\n        if (langsWhiteList[langPrefix]) {\n          return langPrefix;  // Use without a country\n        }\n      }\n    }\n\n    for (; index < prioritizedBrowserLocales.length; index ++) {\n      langWithCountry = extendLangWith(prioritizedBrowserLocales[index]);\n      if (langWithCountry) {\n        return langWithCountry; // Matched one of the preferred accents\n      }\n    }\n\n    return locale;\n  }\n\n  // Return the translated text for the key\n  function translate(key) {\n    var lang = getLang(),\n      text = translations[key];\n\n    if (typeof text === 'undefined') {\n      if (SC_DEV) { console.log('Unable to get translation for text code: \"'+ key + '\" and language: \"' + lang + '\".'); }\n      return '-';\n    }\n\n    return text;\n  }\n\n  // Globally replace all instances of the pattern {{keyname}} with the translation using that key\n  // Key names can container lower case letters, numbers and underscores\n  function localizeStrings(text) {\n    var MATCH_KEY = /\\{\\{([a-z0-9\\_]+)\\}\\}/g;\n    return text.replace(MATCH_KEY, function (match, capture) { return translate(capture); });\n  }\n\n  /**\n   * Translate a number\n   * @param number  Number to translate\n   * @param numDigits (optional)\n   */\n  function translateNumber(number, numDigits) {\n    var lang = getLang();\n    //Number.toLocaleString locale parameter is unsupported in Safari\n    var translated = number.toLocaleString(lang);\n    return numDigits ? translated.slice(0, numDigits + 1) : translated;\n  }\n\n  // The language of user interface text:\n  // In most cases, just returns 'en', 'de', etc.\n  // However, when there are special files for a country translation, returns a longer name like 'en-us' for the U.S.\n  // The language is based on the page, but the country is based on the browser (if the lang is the same)\n  function getUiLocale() {\n    var langOnly = getSupportedUiLang();\n\n    return swapToPreferredRegion(langOnly, COUNTRY_EXCEPTIONS, SUPPORTED_UI_LANGS).toLowerCase();\n  }\n\n  // The preferred language of the current browser\n  function getBrowserLocale() {\n    return mainBrowserLocale;\n  }\n\n  function getMainBrowserLocale() {\n    return navigator.language || navigator.userLanguage || navigator.browserLanguage || DEFAULT_LOCALE;\n  }\n\n  function init() {\n    return new Promise(function(resolve, reject) {\n      mainBrowserLocale = getMainBrowserLocale();\n\n      // On load fetch the translations only once\n      var lang = getSupportedUiLang(),\n        langModuleName = LOCALE_DATA_PREFIX + lang;\n\n      dataMap.get(langModuleName, function (data) {\n        translations = data;\n        if (translations) {\n          resolve();\n        }\n        else {\n          // TODO solve this mystery error (this info should help)\n          reject(new Error('Translation not found for ' + lang));\n        }\n      });\n    });\n  }\n\n  return {\n    getLang: getLang,\n    getBrowserLang: getBrowserLocale,\n    getPageLocale: getPageLocale,\n    getUiLocale: getUiLocale,\n    getTranslationLocale: getTranslationLocale,\n    isValidLocale: isValidLocale,\n    swapToPreferredRegion: swapToPreferredRegion,\n    translate: translate,\n    localizeStrings: localizeStrings,\n    translateNumber: translateNumber,\n    init: init\n  };\n});\n\n\n","// Cheap, extremely minimal XHR\n// Takes subset of $.ajax params -- data, contentType, headers, cache, dataType, url, success, error\n\nsitecues.define(\n  'run/util/xhr',[\n    'mini-core/native-global'\n  ],\n  function (\n    nativeGlobal\n  ) {\n  'use strict';\n\n  // -- PRIVATE --\n\n  // Cross-browser XHR requests\n  function initRequest(postData, requestObj, optionalContentTypeOverride, successFnOverride) {\n    var xhr = new XMLHttpRequest(),\n      type = postData ? 'POST' : 'GET',\n      contentType = optionalContentTypeOverride || requestObj.contentType;\n\n    xhr.open(type, requestObj.url, true);\n    if (contentType) {\n      // If post, the content type is what we're sending, if get it's what we're receiving\n      xhr.setRequestHeader(postData ? 'Content-Type' : 'Accept', contentType);\n    }\n\n    xhr.onload = function() {\n      if (xhr.status < 400) {\n        var successFn = successFnOverride || requestObj.success;\n        if (successFn) {\n          successFn(xhr.responseText);\n        }\n      }\n      else {\n        var errorFn = requestObj.error;\n        if (errorFn) {\n          errorFn(xhr.statusText);\n        }\n      }\n    };\n\n    // Send it!\n    xhr.send(postData);\n  }\n\n  // -- PUBLIC ---\n\n  // Gets the JSON text and returns a JS object\n  function getJSON(requestObj) {\n    initRequest(null, requestObj, 'application/json', function(jsonText) {\n      requestObj.success(nativeGlobal.JSON.parse(jsonText));\n    });\n  }\n\n  function get(requestObj) {\n    initRequest(null, requestObj, null);\n  }\n\n  function post(requestObj) {\n    // Sending with text/plain instead of application/json avoids the extra CORS preflight requests\n    // This is called a \"Simple CORS Request\" and has a number of requirements.\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests\n    initRequest(nativeGlobal.JSON.stringify(requestObj.data), requestObj, 'text/plain');\n  }\n\n  return {\n    getJSON: getJSON,\n    get: get,\n    post: post\n  };\n});\n\n\n","sitecues.define(\n  'run/conf/urls',[\n    'run/conf/site'\n  ],\n  function (\n    site\n  ) {\n  'use strict';\n\n  var apiPrefix,  // Either ws.sitecues.com/ or ws.dev.sitecues.com/\n    scriptOrigin,  // Either http[s]://js.sitecues.com/ or http[s]://js.dev.sitecues.com/\n    BASE_RESOURCE_URL;\n\n  function getBaseResourceUrl() {\n    var basis = SC_EXTENSION ? getRawScriptUrl() : sitecues.require.toUrl(''),\n      unsecureBaseUrl = basis.substring(0, basis.lastIndexOf('/js/') + 1);\n\n    return enforceHttps(unsecureBaseUrl);\n  }\n\n  // Change http:// or protocol-relative (just //) urls to use https\n  // TODO Occasionally the sitecues.js core is loaded with http -- we will change that in the minicore. Remove this once we do that.\n  function enforceHttps(absoluteUrl) {\n    return 'https:' + absoluteUrl.replace(/^https?:/, '');\n  }\n\n  // URL string for API calls\n  function getApiUrl(restOfUrl) {\n    return 'https://' + apiPrefix + 'sitecues/api/' + restOfUrl;\n  }\n\n  // Get an API like http://ws.sitecues.com/sitecues/api/css/passthrough/?url=http%3A%2F%2Fportal.dm.gov.ae%2FHappiness...\n  // We use this for the image and CSS proxy services\n  // Pass in the proxyApi, e.g. 'image/invert' or 'css/passthrough'\n  function getProxyApiUrl(proxyApi, url) {\n    var absoluteUrl = resolveUrl(url);\n\n    return getApiUrl(proxyApi + '/?url=' + encodeURIComponent(absoluteUrl)); // If testing with production: .replace('//ws.dev', '//ws');\n  }\n\n  // URL string for sitecues.js\n  // Enforces https so that all the resources we fetch and origin checking also uses https\n  function getRawScriptUrl() {\n    return enforceHttps(site.get('scriptUrl') || site.get('script_url'));\n  }\n\n  // Parsed URL object for sitecues.js\n  function getParsedLibraryURL() {\n    // Underscore names deprecated\n    var url = getRawScriptUrl();\n    return url && parseUrl(url);\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  //\n  //  URL Processing\n  //\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  // Parse a URL into { protocol, hostname, origin, path }\n  // Does not support mailto links (or anything where the protocol isn't followed by //)\n  // TODO After we kill IE11, we can move to new URL(), but be careful of IE incompatibilities (e.g. port, origin, host)\n  function parseUrl(urlStr) {\n    if (typeof urlStr !== 'string') {\n      return;\n    }\n\n    var parser = document.createElement('a'),\n      pathname,\n      lastSlashIndex,\n      protocol,\n      path,\n      hostname,\n      origin,\n      port;\n\n    // Set up parser\n    parser.href = urlStr;\n\n    // Extract the path of the pathname.\n    pathname = parser.pathname;\n\n    // Ensure pathname begins with /\n    // TODO is this necessary in any browser? Used to be for IE9\n    if (pathname.indexOf('/') > 0) {\n      pathname = '/' + pathname;\n    }\n    lastSlashIndex = pathname.lastIndexOf('/') + 1;\n\n    protocol = parser.protocol || document.location.protocol;  // IE does not include protocol unless it was specified. If not specified, get from current document.\n    path = pathname.substring(0, lastSlashIndex);\n    hostname = parser.hostname;\n    origin = parser.origin;\n    if (!origin) {  // IE didn't give us the origin, so we construct it from the protocol, hostname and maybe the port\n      origin = protocol + '//' + hostname;\n      port = parser.port;\n      // Fallback approach for IE -- note this doesn't include @username or password info\n      // Add the port if it's specified in the url (80/443 is the default port, so only add that if it's really present in the url)\n      if (port && urlStr.indexOf(':' + port + '/') > 0) {\n        origin += ':' + port;  // Add :portnumber but only if it exists in urlstr\n      }\n    }\n\n    return {\n      protocol: protocol,\n      path: path,\n      hostname: hostname,\n      origin: origin\n    };\n  }\n\n  function isValidLibraryUrl() {\n    return !! getParsedLibraryURL().hostname;\n  }\n\n  // Resolve a URL as relative to the main script URL.\n  // Add a version parameter so that new versions of the library always get new versions of files we use, rather than cached versions.\n  function resolveResourceUrl(urlStr, paramsMap) {\n    var url = BASE_RESOURCE_URL + urlStr,\n      params = paramsMap && Object.keys(paramsMap);\n\n    function addParam(name) {\n      url += name + '=' + encodeURIComponent(paramsMap[name]) + '&';\n    }\n\n    if (params) {\n      url += '?';\n      params.forEach(addParam);\n    }\n\n    return url;\n  }\n\n  // Is this production sitecues?\n  function isProduction() {\n    return getParsedLibraryURL().hostname === 'js.sitecues.com';\n  }\n\n  // Most sitecues scripts are loaded with https\n  function getScriptOrigin() {\n    if (!scriptOrigin) {\n      scriptOrigin = getParsedLibraryURL().origin;\n    }\n    return scriptOrigin;\n  }\n\n  // The regular expression for an absolute URL. There is a capturing group for\n  // the protocol-relative portion of the URL.\n  var ABSOLUTE_URL_REGEXP = /^[a-zA-Z0-9-]+:(\\/\\/.*)$/i;\n\n  // Return an absolute URL. If the URL was relative, return an absolute URL that is relative to a base URL.\n  // @optional parsedBaseUrl If not provided, will use the current page.\n  function resolveUrl(urlStr, baseUrl) {\n    if (typeof URL === 'function') {\n      // URL object exists in IE11 but \"new URL()\" throws error \"Object doesn’t support this action\"\n      // TODO Strangely, saw an exception in Firefox 38: -- Illegal constructor\n      // {\"eventId\":\"87611cd9-5e0c-4ad9-b338-f4ce5b312e09\",\"serverTs\":1463709667327,\"clientIp\":\"10.235.39.83\",\"siteKey\":\"s-1e3f787a\",\"isTest\":false,\"userId\":null,\"clientData\":{\"scVersion\":\"4.0.73-RELEASE\",\"metricVersion\":12,\"sessionId\":\"12d5eb35-2f8b-4dd3-8006-722f6cfec4a5\",\"pageViewId\":\"ac606acb-b05c-42b8-adba-13a764ee7372\",\"siteId\":\"s-1e3f787a\",\"userId\":\"cdbb986e-29e2-4a27-b07f-c1f253b2c645\",\"pageUrl\":\"http://bestfriends.org/sanctuary/animals-special-needs/current/harvard?utm_medium=email&utm_source=bsd&utm_campaign=newsletter&utm_content=20160519&utm_term=2016national\",\"browserUserAgent\":\"Mozilla/5.0 (Windows NT 6.1; rv:38.9) Gecko/20100101 Goanna/2.0 Firefox/38.9 PaleMoon/26.1.1\",\"isClassicMode\":false,\"clientLanguage\":\"en-US\",\"source\":\"page\",\"isTester\":false,\"name\":\"error\",\"clientTimeMs\":1463709666975,\"zoomLevel\":1,\"ttsState\":false,\"details\":{\"message\":\"Illegal constructor.\",\"stack\":\".resolveUrl@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:28\\nr@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\na@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\no@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\nh@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\ns@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\n.each@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:1\\nZ.prototype.each@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:1\\nx@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\nZ.Callbacks/c@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:1\\nZ.Callbacks/f.add@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:1\\nZ.fn.ready@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:1\\ny@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\nc@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\nv@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\ng@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\nm@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/page.js:4\\nr/<@https://js.sitecues.com/l/s;id=s-1e3f787a/4.0.73-RELEASE/js/bp-toolbar-badge.js:1\\nW@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:8\\nO@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:9\\nP/<@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:10\\nk@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:20\\nO/k.then/</<@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:21\\nc/</<@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:19\\nc/<@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:19\\na@https://js.sitecues.com/l/s;id=s-1e3f787a/js/sitecues.js:19\\n\"}}}\n      var parsedUrl = new URL(urlStr, baseUrl || document.location);\n      return parsedUrl.toString();\n    }\n\n    // IE 9-11 polyfill (also Edge 12)\n    // TODO remove if IE11 ever goes away!!\n    var parsedBaseUrl = parseUrl(baseUrl || '.');\n\n    var absRegExpResult = ABSOLUTE_URL_REGEXP.exec(urlStr);\n    if (absRegExpResult) {\n      // We have an absolute URL, with protocol. That's a no-no, so, convert to a\n      // protocol-relative URL.\n      urlStr = urlStr;\n    } else if (urlStr.indexOf('//') === 0) {\n      // Protocol-relative. Add parsedBaseUrl's protocol.\n      urlStr = parsedBaseUrl.protocol + urlStr;\n    } else if (urlStr.indexOf('/') === 0) {\n      // Host-relative URL.\n      urlStr = parsedBaseUrl.origin + urlStr;\n    } else {\n      // A directory-relative URL.\n      urlStr = parsedBaseUrl.origin + parsedBaseUrl.path + urlStr;\n    }\n\n    // Replace ../ at beginning of path with just / as there is no parent folder to go to\n    urlStr = urlStr.replace(/(^http[^\\/]+\\/\\/[^\\/]+\\/)(?:\\.\\.\\/)/, '$1', 'i');\n\n    return urlStr;\n  }\n\n  function isSameOrigin(url) {\n    return parseUrl(url).origin === window.location.origin;\n  }\n\n  // Will cross-origin restrictions possibly burn us?\n  function isCrossOrigin(url) {\n    return !isSameOrigin(url);\n  }\n\n  // Returns the resource file extension, or an empty string if one isn't found\n  function extname(url) {\n    var index = url.lastIndexOf('.');\n    return index >= 0 ? url.substring(index) : '';\n  }\n\n  function init() {\n    var domainEnding = isProduction() ? '.sitecues.com' : '.dev.sitecues.com';\n    BASE_RESOURCE_URL = getBaseResourceUrl();\n    apiPrefix = 'ws' + domainEnding + '/';\n  }\n\n  return {\n    init: init,\n    getApiUrl: getApiUrl,\n    getProxyApiUrl: getProxyApiUrl,\n    getScriptOrigin: getScriptOrigin,\n    isValidLibraryUrl: isValidLibraryUrl,\n    getRawScriptUrl: getRawScriptUrl,\n    resolveResourceUrl: resolveResourceUrl,\n    parseUrl: parseUrl,\n    isSameOrigin: isSameOrigin,\n    isCrossOrigin: isCrossOrigin,\n    isProduction: isProduction,\n    resolveUrl: resolveUrl,\n    extname: extname\n  };\n});\n\n","sitecues.define('run/constants',[], function () {\n\n  var constants = {};\n\n  constants.READY_STATE = {\n    UNINITIALIZED: 0,\n    INITIALIZING: 1,\n    COMPLETE: 2\n  };\n\n  constants.METRIC_NAME = {\n    BADGE_HOVER: 'badge-hovered',\n    ERROR: 'error',\n    FEEDBACK: 'feedback-sent',\n    KEY_COMMAND: 'key-command',\n    LENS_OPEN: 'hlb-opened',\n    MOUSE_SHAKE: 'mouse-shake',\n    PAGE_CLICK_FIRST: 'page-clicked-first',\n    PAGE_SCROLL_FIRST: 'page-scrolled-first',\n    PAGE_UNLOAD: 'page-unloaded',\n    PANEL_CLICK: 'panel-clicked',\n    PANEL_CLOSE: 'panel-closed',\n    PANEL_FOCUS_MOVE: 'panel-focus-moved',\n    SITECUES_READY: 'sc-ready',\n    SLIDER_SETTING_CHANGE: 'slider-setting-changed',\n    TTS_REQUEST: 'tts-requested',\n    ZOOM_CHANGE: 'zoom-changed'\n  };\n\n  constants.KEY_CODE = {\n    MINUS_ALT1: 173,\n    MINUS_ALT2: 45,\n    MINUS_ALT3: 189,\n    EQUALS_ALT1: 187,\n    EQUALS_ALT2: 61,\n    PLUS: 43,\n    NUMPAD_SUBTRACT: 109,\n    NUMPAD_ADD: 107,\n    NUMPAD_0: 48,\n    NUMPAD_1: 97,\n    NUMPAD_2: 98,\n    NUMPAD_3: 99,\n    NUMPAD_4: 100,\n    NUMPAD_6: 102,\n    NUMPAD_7: 103,\n    NUMPAD_8: 104,\n    NUMPAD_9: 105,\n    QUOTE: 222,\n    ESCAPE: 27,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DN: 34,\n    END: 35,\n    HOME: 36,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    LETTER_H: 72,\n    SHIFT: 16,\n    CTRL: 17,\n    F8: 119,\n    TAB: 9,\n    ENTER: 13\n  };\n\n  constants.ZOOM_OUT_CODES = [\n    constants.KEY_CODE.MINUS_ALT1,\n    constants.KEY_CODE.MINUS_ALT2,\n    constants.KEY_CODE.MINUS_ALT3,\n    constants.KEY_CODE.NUMPAD_SUBTRACT\n  ];\n\n  constants.ZOOM_IN_CODES = [\n    constants.KEY_CODE.EQUALS_ALT1,\n    constants.KEY_CODE.EQUALS_ALT2,\n    constants.KEY_CODE.PLUS,\n    constants.KEY_CODE.NUMPAD_ADD\n  ];\n\n  constants.INIT_CODES = [constants.KEY_CODE.QUOTE]\n    .concat(constants.ZOOM_IN_CODES, constants.ZOOM_OUT_CODES);\n\n  constants.MIN_TIME_BETWEEN_KEYS = 80; // How quickly might humans reasonably repeat keys\n\n  return constants;\n\n});\n","/**\n * platform.js\n * Determines the Browser Version and Operating System version constants\n */\nsitecues.define('run/platform',[], function() {\n\n  // Store the agent and platform variables for later use\n  var exports = {\n    browser: null,\n    os: null,\n    canUseRetinaCursors: null,\n    cssPrefix: null,\n    transitionEndEvent: null,\n    nativeZoom: null,\n    isRetina: isRetina,\n    isUnsupportedPlatform: false,\n    platformWarning: null,\n    init: init\n  },\n  agent,\n  isInitialized,\n  isRetinaDisplay;    // Is the current display a retina display?\n\n\n    // Determine which browser is being used\n  function getBrowserStr(agent) {\n    return (agent.indexOf(' MSIE') > 0 || agent.indexOf(' Trident') > 0 || agent.indexOf(' Edge') > 0) ? 'IE' :\n        agent.indexOf(' Firefox/') > 0 ? 'Firefox' :\n        agent.indexOf(' Chrome') > 0 ? 'Chrome' :\n        agent.indexOf(' Safari') > 0 ? 'Safari' :\n        (agent.indexOf(' Opera/') > 0 || agent.indexOf(' Presto/') > 0) ? 'Opera' :\n      '';\n  }\n\n  // If a vendor prefix is needed for a CSS property, what would it be?\n  function getCssPrefix(currBrowser) {\n    return currBrowser.isWebKit  ?\n      '-webkit-'        :\n      currBrowser.isFirefox ?\n        '-moz-'         :\n        currBrowser.isMS    ?\n          '-ms-'        :\n          '';\n  }\n\n  // Set globally accessible browser constants\n  function getBrowser(agent) {\n    var browserStr = getBrowserStr(agent),\n      isMS = browserStr === 'IE',\n      version,\n      browser = {\n        zoom: 'zoom' in document.createElement('div').style,\n        is: browserStr,\n        isFirefox: browserStr === 'Firefox',\n        //Evaluates true for Internet Explorer and Edge (there is a lot of overlap in browser specific logic)\n        isMS: isMS, // Includes Edge\n        isIE: isMS && version < 12,  // Does not include Edge\n        isEdge: isMS && version >= 12,\n        isChrome: browserStr === 'Chrome',\n        isOpera: browserStr === 'Opera',\n        isSafari: browserStr === 'Safari',\n        isWebKit: browserStr === 'Chrome' || browserStr === 'Opera' || browserStr === 'Safari'\n      };\n\n    browser.version = version = getVersion(agent, browser);\n    browser.isIE = isMS && version < 12;\n    browser.isEdge = isMS && version >= 12;\n\n    return browser;\n  }\n\n  // Set globally accessible version constants\n  function getVersion(agent, browser) {\n    var charIndex = -1;\n  \n    // If IE is being used, determine which version\n    if (browser.isChrome) {\n      charIndex = agent.indexOf('Chrome/');\n      if (charIndex > 0) {\n        charIndex += 7;\n      }\n    }\n    else if (browser.isSafari) {\n      charIndex = agent.indexOf('Version/');\n      if (charIndex > 0) {\n        charIndex += 8;\n      }\n    }\n    else if (browser.isMS) {\n      // Use MSIE XX.X\n      charIndex = agent.indexOf('MSIE');\n      if (charIndex < 0) {\n        charIndex = agent.indexOf('Edge');\n      }\n      if (charIndex > 0) {\n        charIndex += 5;  // MSIE #\n      }\n    }\n    if (charIndex < 0) {\n      charIndex = agent.indexOf('rv:');\n      if (charIndex > 0) {\n        charIndex += 3;   // rv:#\n      }\n    }\n\n    return charIndex < 0 ? 0 : parseInt(agent.substring(charIndex));  // Returns 0 for unknown version\n  }\n\n  // Determine which operating system is being used\n  function getOSStr(agent) {\n    return agent.indexOf('Mac OS X ') > -1 ? 'mac' :\n        agent.indexOf('Windows NT') > -1 ? 'win' :\n        agent.indexOf('Linux') > -1 ? 'linux' :\n      'other';\n  }\n\n  // Set globally accessible operating system constants\n  function getOS(agent) {\n    var osStr = getOSStr(agent);\n    var os = {\n      is: osStr,\n      isMac: osStr === 'mac',\n      isWin: osStr === 'win',\n      // Set globally accessible version constants\n      versionString: (function () {\n        // If IE is being used, determine which version\n        var charIndex = agent.indexOf(osStr === 'win' ? 'Windows NT' : 'Mac OS X '),\n          UNKNOWN_VERSION = '0';\n        if (charIndex === -1) {\n          return UNKNOWN_VERSION; // Unknown version\n        }\n\n        var versionMatches = agent.slice(charIndex)\n          .replace(/^\\D*/, '')\n          .replace('_', '.')  // Mac OS X 10_4_3 -> 10.4_3   (we will be parsing this as a float)\n          .match(/[\\d\\.]+/);\n\n        return versionMatches ? versionMatches[0] : UNKNOWN_VERSION;\n      })()\n    };\n\n    // Windows versions are weird:\n    // 5.1, 5.2 = Windows XP\n    // 5 = Windows Vista, Windows Server 2008\n    // 6.1 = Windows 7\n    // 6.2 = Windows 8\n    // 6.3 = Windows 8.1\n    // 10 = Windows 10\n    // For more details see https://en.wikipedia.org/?title=Windows_NT\n    os.majorVersion = parseInt(os.versionString);\n    os.fullVersion = parseFloat(os.versionString);\n\n    // Restore if needed\n    // os.minorVersion = parseInt(platformModule.os.versionString.split(/\\D/)[1]);\n\n    return os;\n  }\n\n\n  // Retrieve and store the user's intentional amount of native browser zoom\n  function getNativeZoom() {\n    var browser = exports.browser,\n        computedNativeZoom = 1;\n\n    if (browser.isWebKit) {\n      computedNativeZoom = outerWidth / innerWidth;\n    }\n    else if (browser.isMS) {\n      // Note: on some systems the default zoom is > 100%. This happens on our Windows 7 + IE10 Dell Latitude laptop\n      // See http://superuser.com/questions/593162/how-do-i-change-the-ctrl0-zoom-level-in-ie10\n      // This means the actual zoom may be 125% but the user's intentional zoom is only 100%\n      // To get the user's actual zoom use screen.deviceXDPI / screen.logicalXDPI\n      computedNativeZoom = screen.deviceXDPI / screen.systemXDPI; // User's intentional zoom\n    }\n    else if (browser.isFirefox) {\n      // Since isRetina() is not 100% accurate, neither will this be\n      computedNativeZoom = isRetina() ? devicePixelRatio / 2 : devicePixelRatio;\n    }\n\n    return computedNativeZoom;\n  }\n\n  // Retrieve and store whether the current window is on a Retina display\n  function isRetina() {\n    var browser         = exports.browser,\n        nativeZoom      = exports.nativeZoom;\n\n    if (typeof isRetinaDisplay !== 'undefined') {\n      return isRetinaDisplay;\n    }\n\n    isRetinaDisplay = false;\n\n    // Safari doesn't alter devicePixelRatio for native zoom\n    if (browser.isSafari) {\n      isRetinaDisplay = devicePixelRatio === 2;\n    }\n    else if (browser.isChrome) {\n      isRetinaDisplay = Math.round(devicePixelRatio / nativeZoom) === 2;\n    }\n    else if (browser.isFirefox) {\n      // This is only a guess, unfortunately\n      // The following devicePixelRatios can be either on a retina or not:\n      // 2, 2.4000000953674316, 3\n      // Fortunately, these would correspond to a relatively high level of zoom on a non-Retina display,\n      // so hopefully we're usually right (2x, 2.4x, 3x)\n      // We can check the Firefox zoom metrics to see if they are drastically different from other browsers.\n      isRetinaDisplay = devicePixelRatio >= 2;\n    }\n\n    return isRetinaDisplay;\n  }\n\n  // Returns a string if the current OS/browser combo is not supported.\n  // The reason string is human-readable description as to why the platform is not supported\n  // TODO localize\n  function getPlatformWarning(os, browser) {\n    if (!os.isWin && !os.isMac) {\n      return 'Microsoft Windows or Mac OS X is required';\n    }\n\n\n    var version = browser.version;\n    if (browser.isIE) {\n      return version !== 11 && 'for Internet Explorer, version 11 is required';\n    }\n    if (browser.isEdge) {\n      return version < 13 && 'for Microsoft Edge, version 13 or later is required';\n    }\n    if (browser.isFirefox) {\n      return version < 34 && 'for Firefox, version 34 or later is required';\n    }\n    if (browser.isSafari) {\n      return version < 9 && 'for Safari, version 9 or later is required';\n    }\n    if (browser.isChrome) {\n      return version < 41 && 'for Chrome, version 41 or later is required';\n    }\n\n    return 'IE, Firefox, Chrome or Safari is required';\n  }\n\n  function isStorageUnsupported() {\n    var TEST_KEY = '-sc-storage-test';\n    if (localStorage.length === 0 && sessionStorage.length === 0) {\n      try {\n        sessionStorage.setItem(TEST_KEY, '');\n        sessionStorage.removeItem(TEST_KEY);\n      }\n      catch(ex) {\n        return true;\n      }\n    }\n  }\n\n  // return truthy if platform is supported\n  function init() {\n    if (isInitialized) {\n      return;\n    }\n\n    isInitialized = true;\n\n    agent = navigator.userAgent || '';\n    exports.browser = getBrowser(agent);\n    exports.os = getOS(agent);\n    exports.nativeZoom = getNativeZoom();\n\n    var platformWarning = getPlatformWarning(exports.os, exports.browser);\n    if (platformWarning) {\n      throw new Error(platformWarning);\n    }\n\n    exports.isStorageUnsupported = isStorageUnsupported();\n    exports.canUseRetinaCursors = exports.browser.isChrome;\n    exports.cssPrefix = getCssPrefix(exports.browser);\n    exports.transitionEndEvent = exports.browser.isWebKit ? 'webkitTransitionEnd' : 'transitionend';\n    exports.featureSupport = {\n      themes: !exports.browser.isMS\n    };\n\n    // Invalidate cached retina info on window resize, as it may have moved to another display.\n    // When a window moves to another display, it can change whether we're on a retina display.\n    // Kinda evil that we have a listener in this module, but it helps keep things efficient as we need this info cached.\n    addEventListener('resize', function () {\n      isRetinaDisplay = undefined;\n    });\n  }\n\n  return exports;\n});\n","/**\n * Does the current site/browser require classic mode?\n * Classic mode is where the ? shows up instead of the down arrow. This can be necessary if themes aren't working.\n */\n\nsitecues.define('run/bp/model/classic-mode',['run/conf/site', 'run/platform'], function(site, platform) {\n  var CLASSIC_SITES = {\n    // 's-b737790f': 1  // http://www.window-eyes.at\n  };\n\n  function isClassicBrowser() {\n    // Edge is too, at least for now\n    return platform.browser.isEdge;\n  }\n\n  function isClassicSite() {\n    var classicPref = site.get('classicMode');\n    if (typeof classicPref !== 'undefined') {\n      return classicPref;\n    }\n    return CLASSIC_SITES[site.getSiteId()];\n  }\n\n  function isClassicMode() {\n    return Boolean(isClassicSite() || isClassicBrowser());\n  }\n\n  return isClassicMode;\n});\n","sitecues.define(\n    'run/has',[],\n    function () {\n        function hasEvent(name) {\n            return ('on' + name) in window;\n        }\n\n        // TODO: Remove this when issue is resolved:\n        // https://github.com/jshint/jshint/issues/3014\n        var speechSynthesis = window.speechSynthesis;\n\n        return {\n            pointerEvents     : hasEvent('pointerdown'),\n            touchEvents       : hasEvent('touchstart'),\n            lightEvents       : hasEvent('devicelight'),\n            proximityEvents   : hasEvent('deviceproximity'),\n            motionEvents      : hasEvent('devicemotion'),\n            orientationEvents : hasEvent('deviceorientation'),\n            batteryApi        : typeof navigator.getBattery === 'function',\n            vibrateApi        : typeof navigator.vibrate === 'function',\n            speechSynthApi    : typeof speechSynthesis === 'object' && Boolean(speechSynthesis),\n            speechRecApi      : typeof SpeechRecognition === 'function'\n        };\n    }\n);\n\n","/**\n * Global configuration for A/B testing for this version of Sitecues\n * Wiki: https://equinox.atlassian.net/wiki/display/EN/AB+Testing\n * Provided in layers, weight in one layer are separate from other layers and implicitly add to 100%\n * If the weight field is not provided it is assumed to be 1\n * If an array is provided for layer, then all values get weight of 1, e.g. timer values [0, 1000, 2000]\n */\nsitecues.define('run/ab-test/config',[], function () {\n  'use strict';\n\n  // Maximum layer depth is 5 (because of 5 sections of user id)\n  // TODO this is just an example of what's possible, let's actually use it\n\n  var globalAbConfig = {\n    NONE: {  // Special value meaning no A/B test is occurring\n      weight: 3\n    },\n    // Commented but kept in source as an example of what's possible\n    // 'iconTest': {\n    //   weight: 10,\n    //   values: {\n    //     'settingsIconTest': {\n    //       values: [\n    //         'gear',\n    //         'sliders'\n    //       ]\n    //     },\n    //     'tipsIconTest': {\n    //       values: [\n    //         'question',\n    //         'lightbulb'\n    //       ]\n    //     }\n    //   }\n    // },\n    'extraSensitiveBadgeNewUser': {\n      // Test Marc's idea to have an extra sensitive badge for first time users\n      weight: 1\n    },\n    'moreButtonTimerV2': {\n      weight: 1,\n      values: [\n        0,\n        1000,\n        2000,\n        3000,\n        4000,\n        5000,\n        6000,\n        7000\n      ]\n    }\n  };\n\n  return globalAbConfig;\n});\n\n\n","/**\n * Sitecues A/B test switch for the current user\n * Wiki: https://equinox.atlassian.net/wiki/display/EN/AB+Testing\n *\n * Input: user id + ab-test/config\n * Output: something like undefined for no test, or 'icontest.settingsTest.gear'\n *\n * Terminology:\n * - Layer: a scope in the tests corresponding to the config or a sub-object of the config\n *   In the example 'icontest.settingsTest.gear', there are 3 layers\n * - Weight: how likely a test outcome in one of the layers is, relative to other outcomes in the same layer\n */\nsitecues.define(\n  'run/ab-test/ab-test',[\n    'run/conf/id',\n    'run/ab-test/config'\n  ],\n  function (\n    id,\n    globalABConfig\n  ) {\n  'use strict';\n\n  var userAbConfig = [];\n\n  function getLayerWeight(layer, keys) {\n    var total = 0;\n    keys.forEach(function(key) {\n      total += layer[key].weight || 1; // If weight is not specified, defaults to 1\n    });\n    return total;\n  }\n\n  function selectKeyInLayer(seed, layer, keys) {\n    var\n      layerWeight = getLayerWeight(layer, keys),\n      selectionIndex = seed % layerWeight,\n      weightAccumulator = 0,\n      index = 0,\n      numKeys = keys.length,\n      key;\n\n    for (; index < numKeys - 1; index ++) {\n      key = keys[index];\n      weightAccumulator += layer[key].weight || 1;\n      if (selectionIndex < weightAccumulator) {\n        return key;\n      }\n    }\n\n    return keys[numKeys - 1];\n  }\n\n  function getArrayKeys(array) {\n    return array.map(function(value, index) {\n      return index;\n    });\n  }\n\n  function selectTests(layerValues, userIdParts, layerIndex) {\n    var\n      usesValuesArray = Array.isArray(layerValues),  // Otherwise Object map of key: value\n      layerKeys = usesValuesArray ? getArrayKeys(layerValues) : Object.keys(layerValues),\n      seed = parseInt(userIdParts[layerIndex], 16),   // Choose an option in the layer based on this part of the user id\n      selectedKey = selectKeyInLayer(seed, layerValues, layerKeys),\n      nextLayerValues = layerValues[selectedKey].values;\n\n    // If array is provided, use the simple value provided, otherwise the key\n    userAbConfig[layerIndex] = usesValuesArray ? layerValues[selectedKey] : selectedKey;\n    if (nextLayerValues) {\n      ++ layerIndex;\n      if (layerIndex > userIdParts.length) {  // Realistically this is always 5\n        if (SC_DEV) {\n          console.log('Too much depth in A/B test config'); // Very unlikely!\n        }\n        return;\n      }\n      selectTests(nextLayerValues, userIdParts, layerIndex);\n    }\n  }\n\n  // Return a value for the key\n  // Input: a key\n  // The key can be simple, e.g. 'moreButtonTimer' or\n  // you can string keys together, such as 'iconTest.settingsIconTest'\n  // No key will return the user's entire ab test configuration array\n  //\n  // Returns:\n  // Values are together with . (or just true if there are no remaining keys)\n  //\n  // Examples (where userAbConfig = ['iconTest', 'settingsIconTest', 'lightbulb']) :\n  // get() => 'iconTest.settingsIconTest.lightbulb'\n  // get('iconTest') => 'settingsIconTest.lightbulb'\n  // get('iconTest.settingsIconTest') => 'lightbulb'\n  // get('iconTest.settingsIconTest.lightbulb') => true\n  // get('qqqq') => undefined   (not a current A/B test)\n  // get('iconText.qqq') => undefined (not a current A/B test)\n  function get(key, defaultVal) {\n    if (!userAbConfig.length ||  // Occurs when AB testing was never initialized (e.g. when not a supported platform)\n      userAbConfig[0] === 'NONE') {\n      return defaultVal;\n    }\n\n    var keyIndex = 0,\n      keys = key ? key.split('.') : [],\n      numKeys = keys.length;\n\n    for (; keyIndex < numKeys; keyIndex ++) {\n      if (keys[keyIndex] !== userAbConfig[keyIndex]) {\n        return defaultVal;\n      }\n    }\n\n    // Remaining keys make up te value\n    // or true is returned\n    var valueSlice = userAbConfig.slice(keyIndex);\n    return valueSlice.length ? valueSlice.join('.') : true;\n  }\n\n  function init() {\n    var userId = id.user,\n      userIdParts = userId.split('-');\n\n    selectTests(globalABConfig, userIdParts, 0);\n\n    if (SC_DEV) {\n      console.log('A/B test: ' + get());\n    }\n  }\n\n  return {\n    init: init,\n    get: get\n  };\n});\n\n","/**\n * Basic metrics logger\n */\nsitecues.define(\n  'run/metric/metric',[\n    'run/conf/preferences',\n    'run/conf/id',\n    'run/conf/site',\n    'run/locale',\n    'run/util/xhr',\n    'run/conf/urls',\n    'run/constants',\n    'run/bp/model/classic-mode',\n    'run/platform',\n    'run/has',\n    'run/ab-test/ab-test',\n    'mini-core/native-global'\n  ],\n  function (\n    pref,\n    id,\n    site,\n    locale,\n    xhr,\n    urls,\n    constants,\n    classicMode,\n    platform,\n    has,\n    abTest,\n    nativeGlobal\n  ) {\n  'use strict';\n\n    // IMPORTANT! Increment METRICS_VERSION this every time metrics change in any way\n    // IMPORTANT! Have the backend team review all metrics changes!!!\n    var METRICS_VERSION = 20,\n        isInitialized,\n        doSuppressMetrics,\n        doLogMetrics,\n        name = constants.METRIC_NAME,\n        metricHistory = [],\n        platformData,\n        sessionData;\n\n    function Metric(name, details) {\n      if (doLogMetrics) {\n        console.log('Metric / %s', name + (details ? ' / ' + nativeGlobal.JSON.stringify(details) : ''));\n      }\n\n      this.sent = false;\n\n      var data = this.data = {};\n      var settings = getSettings(); // Gets all prefs\n\n      // Session data\n      assign(data, sessionData);\n\n      // Common fields\n      data.name = name;\n      data.clientTimeMs = Number(new Date()); // Epoch time in milliseconds  when the event occurred\n      data.zoomLevel = pref.get('zoom') || 1;\n      data.ttsState = pref.get('ttsOn') || false;\n\n      // Platform data -- goes into details field for historical reason\n      details = details || {};\n      assign(details, platformData);\n\n      // Ensure data we send has simple types\n      flattenData(data);\n      flattenData(details);\n      flattenData(settings);  // Should already be flat, but we're being extra careful about superfluous fields\n\n      // Log errors -- check for field name collisions and type errors in details\n      if (SC_DEV) {\n        logNameCollisions(name, data, details);\n      }\n\n      data.details = details;\n      data.settings = settings;\n      data.has = (function () {\n        var bool = {};\n        Object.keys(has).forEach(function (key) {\n          // In the future, some has tests might be functions (may have side effects),\n          // here we are careful to not copy those, ensuring no downstream code can\n          // accidentally stringify them and send source code with the metric.\n          if (typeof has[key] === 'boolean') {\n            bool[key] = has[key];\n          }\n        });\n        return bool;\n      }());\n    }\n\n    // In dev, log field name collisions because the backend is going to flatten the metrics object\n    function logNameCollisions(metricName, data, details) {\n      function logFieldNameCollision(propName) {\n        if (data.hasOwnProperty(propName)) {\n          // TODO: Sadly, we do not currently throw an error here, because our errors.js module sends an error metric\n          // for exceptions, which could then lead to an infinite loop. This could be solved by having errors.js\n          // skip sending a metric when it is the metrics code that is borked anyway.\n          console.error('Sitecues error: name collision for metric ' + metricName + ' field name ' + propName);\n        }\n      }\n\n      if (details) {\n        Object.keys(details).forEach(logFieldNameCollision);\n      }\n    }\n\n    // Data must be of simple types.\n    function flattenData(data) {\n      Object.keys(data).forEach(function (propName) {\n        var value = data[propName];\n        var type = typeof value;\n\n        if (value !== null && type !== 'boolean' && type !== 'number' && type !== 'string' && type !== 'undefined') {\n          data[propName] = nativeGlobal.JSON.stringify(data[propName]);\n        }\n      });\n    }\n\n    // TODO: Delete this and use Object.assign() when we drop IE support.\n    function assign(target, source) {\n      if (source) {\n        Object.keys(source).forEach(function (key) {\n          target[key] = source[key];\n        });\n      }\n    }\n\n    Metric.prototype.send = function send() {\n      /*jshint validthis: true */\n      if (SC_LOCAL || doSuppressMetrics) {   // No metric events in local mode\n        return;\n      }\n\n      xhr.post({\n        url  : urls.getApiUrl('metrics/site/' + this.data.siteId + '/notify.json?name=' + this.data.name),\n        data : this.data\n      });\n\n      metricHistory.push(this);\n      /*jshint validthis: false */\n    };\n\n    function getMetricHistory(){\n      return metricHistory;\n    }\n\n    function wrap(metricName) {\n      function metricFn(details) {\n        /*jshint validthis: true */\n        Metric.call(this, metricName, details);\n        /*jshint validthis: false */\n      }\n      metricFn.prototype = Object.create(Metric.prototype);\n      metricFn.prototype.constructor = metricFn;\n      return metricFn;\n    }\n\n    function isTester() {\n      if (pref.get('isTester')) {\n        // Once a tester, always a tester\n        return true;\n      }\n\n      if (site.get('isTester') || !urls.isProduction()) {\n        pref.set('isTester', true);  // Remember this tester\n        return true;\n      }\n\n      return false;\n    }\n\n    // TODO Should go away once we go to the new extension which is entirely in a content script\n    function isOldExtension() {\n      return Boolean(sitecues.everywhereConfig);\n    }\n\n    // Return settings we care about\n    function getSettings() {\n      var settings = pref.get(),\n        BLACKLIST = {\n          'firstHighZoom': 1, // Not interesting\n          'firstSpeechOn': 1, // Not interesting\n          'isTester': 1,  // Redundant with field on main object\n          'ttsOn': 1,  // Redundant with field on main object\n          'zoom': 1  // Redundant with field on main object\n        },\n        reducedSettings = {};\n\n      Object.keys(settings).forEach(function(settingName){\n        if (!BLACKLIST[settingName]) {\n          reducedSettings[settingName] = settings[settingName];\n        }\n      });\n      return reducedSettings;\n    }\n\n    function getSource() {\n      if (SC_EXTENSION || isOldExtension()) {\n        return 'extension';\n      }\n      var hostname = window.location.hostname;\n      if (hostname.indexOf('proxy.') === 0 && hostname.indexOf('.sitecues.com') > 0) {\n        return 'reverse-proxy';\n      }\n      if (document.querySelector('script[data-provider=\"sitecues-proxy\"]')) {\n        return 'forward-proxy';\n      }\n      return 'page';\n    }\n\n    function getPageUrl(source) {\n      if (source === 'reverse-proxy') {\n        // We want the viewed page's target url, not the url for the proxy itself\n        var targetUrl = location.pathname + location.search + location.hash;\n        // TODO: Remove page/ replacement once the proxy stops using this route prefix in Fall 2016. We'll still need to remove the extra / at the start.\n        targetUrl = targetUrl.replace(/^\\/(?:page\\/)?/, '');\n        targetUrl = decodeURIComponent(targetUrl);  // In case target url was escaped\n        return targetUrl;\n      }\n\n      return location.href;\n    }\n\n    // This info is not available right away -- we add to session data as soon as available\n    function initViewInfo(viewInfo) {\n      assign(sessionData, viewInfo);\n    }\n\n    function init() {\n      if (isInitialized) {\n        return;\n      }\n      isInitialized = true;\n\n      doSuppressMetrics = site.get('suppressMetrics');\n\n      var source = getSource();\n\n      sessionData = {\n        scVersion: sitecues.getVersion(),\n        metricVersion: METRICS_VERSION,\n        sessionId: id.session,\n        pageViewId: id.pageView,\n        siteId: id.site,\n        userId: id.user,\n        abTest: abTest.get(),\n        pageUrl: getPageUrl(source),\n        browserUserAgent: navigator.userAgent,\n        isClassicMode: classicMode(),\n        clientLanguage: locale.getBrowserLang(),\n        source: source,\n        isTester: isTester()\n      };\n\n      platform.init();\n      platformData = {\n        os: platform.os.is,\n        osVersion: platform.os.fullVersion,\n        browser: platform.browser.is,\n        browserVersion: platform.browser.version,\n        navPlatform: navigator.platform // For debugging -- we no longer use it to determine OS\n      };\n    }\n\n    sitecues.toggleLogMetrics = function toggleLogMetrics() {\n      doLogMetrics = !doLogMetrics;\n      return doLogMetrics;\n    };\n\n    return {\n      init: init,\n      initViewInfo: initViewInfo,\n      getMetricHistory: getMetricHistory,\n      BadgeHover: wrap(name.BADGE_HOVER),\n      Error: wrap(name.ERROR),\n      Feedback: wrap(name.FEEDBACK),\n      KeyCommand: wrap(name.KEY_COMMAND),\n      LensOpen: wrap(name.LENS_OPEN),\n      MouseShake: wrap(name.MOUSE_SHAKE),\n      PageClickFirst: wrap(name.PAGE_CLICK_FIRST),\n      PageScrollFirst: wrap(name.PAGE_SCROLL_FIRST),\n      PageUnload: wrap(name.PAGE_UNLOAD),\n      PanelClick: wrap(name.PANEL_CLICK),\n      PanelClose: wrap(name.PANEL_CLOSE),\n      PanelFocusMove: wrap(name.PANEL_FOCUS_MOVE),\n      SitecuesReady: wrap(name.SITECUES_READY),\n      SliderSettingChange: wrap(name.SLIDER_SETTING_CHANGE),\n      TtsRequest: wrap(name.TTS_REQUEST),\n      ZoomChange: wrap(name.ZOOM_CHANGE)\n    };\n  });\n\n\n","/**\n * Error logger -- sends errors to Sitecues servers for analysis. Requires <script crossorigin=\"anonymous\">\n * - Not currently used in extension\n * - Does not require init() so that it's easier to add/remove in different builds\n */\nsitecues.define('run/errors',['run/metric/metric', 'run/conf/urls'], function(metric, urls) {\n  function isSitecuesError(source) {\n    return urls.parseUrl(source).origin === urls.getScriptOrigin();\n  }\n\n  function logError(detail) {\n    console.log('%cSitecues Error %s', 'color: orange', detail.message);\n    if (detail.stack) {\n      console.log(detail.stack);\n    }\n\n    // detail object contains everything we need (message, line, col, etc.)\n    metric.init();\n    new metric.Error(detail).send();\n  }\n\n  function onError(event) {\n    var error = event.error,\n      filename = event.filename;\n\n    if (!error || !filename || !isSitecuesError(filename)) {\n      // We only care about Sitecues errors\n      return;\n    }\n\n    logError({\n      type: 'exception',\n      message: error.message,\n      filename: filename, // JS file with error\n      lineno: event.lineno,\n      colno: event.colno,\n      stack: error.stack\n    });\n  }\n\n\n  function onPrimRejection(event) {\n    var detail = event.detail;\n    logError( {\n      type: 'prim rejection',\n      message: detail.message,\n      stack: detail.stack\n    }, true);\n  }\n\n  function onNativeRejection(event) {\n    // event.reason can be an object or value\n    var reason = event.reason || {};\n    logError({\n      type: 'native promise rejection',\n      message: reason.message || reason,\n      stack: reason.stack\n    });\n  }\n\n  function onRequireFailure(event) {\n    var detail = event.detail;\n    logError({\n      type: 'require error',\n      stack: detail.stack,\n      message: 'Could not find module: ' + detail.requireModules\n    });\n  }\n\n  function report(error) {\n    logError({\n      type: 'non-fatal error',\n      stack: error.stack,\n      message: error.message\n    });\n  }\n\n  window.addEventListener('error', onError);   // May get both JS and resource errors\n  window.addEventListener('SitecuesUnhandledRejection', onPrimRejection);   // Thrown from prim library\n  window.addEventListener('unhandledrejection', onNativeRejection);\n  window.addEventListener('rejectionhandled', onNativeRejection);\n  window.addEventListener('SitecuesRequireFailure', onRequireFailure);   // Thrown from prim library\n\n  return {\n    report: report\n  };\n});\n\n","sitecues.define('run/events',[], function () {\n  \"use strict\";\n  var arr     = Array.prototype,\n      manager = {};\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  //\n  //  Event Management\n  //\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  // bind an event, specified by a string name, `events`, to a `callback`\n  // function. passing `'*'` will bind the callback to all events fired\n  function on(events, callback, context) {\n    /* jshint validthis: true */\n    var ev, list, tail;\n    events = events.split(/\\s+/);\n    var calls = this._events || (this._events = {});\n    // The events.length check before events.shift() protects us against prototype.js\n    while (events.length && (ev = events.shift())) {\n      // create an immutable callback list, allowing traversal during\n      // modification. the tail is an empty object that will always be used\n      // as the next node\n      list = calls[ev] || (calls[ev] = {});\n      tail = list.tail || (list.tail = list.next = {});\n      tail.callback = callback;\n      tail.context = context;\n      list.tail = tail.next = {};\n    }\n    return this;\n  }\n\n  // remove one or many callbacks. if `context` is null, removes all callbacks\n  // with that function. if `callback` is null, removes all callbacks for the\n  // event. if `events` is null, removes all bound callbacks for all events\n  function off(events, callback, context) {\n    /* jshint validthis: true */\n    var ev,\n      calls = this._events,\n      node;\n\n    if (!events) {\n      delete this._events;\n    } else if (calls) {\n      events = events.split(/\\s+/);\n      while (events.length && (ev = events.shift())) {\n        node = calls[ev];\n        delete calls[ev];\n        if (!callback || !node) {\n          continue;\n        }\n\n        // create a new list, omitting the indicated event/context pairs\n        while ((node = node.next) && node.next) {\n          if (node.callback === callback && (!context || node.context === context)) {\n            continue;\n          }\n          this.on(ev, node.callback, node.context);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  // emit an event, firing all bound callbacks. callbacks are passed the\n  // same arguments as `emit` is, apart from the event name.\n  function emit(events) {\n    /* jshint validthis: true */\n    var event, node, calls, tail, args, rest;\n    if (!(calls = this._events)) {\n      return this;\n    }\n\n    (events = events.split(/\\s+/)).push(null);\n\n    // save references to the current heads & tails\n    while (events.length && (event = events.shift())) {\n      if (!(node = calls[event])) {\n        continue;\n      }\n      events.push({\n        next: node.next,\n        tail: node.tail\n      });\n    }\n\n    // traverse each list, stopping when the saved tail is reached.\n    rest = arr.slice.call(arguments, 1);\n    while ((node = events.pop())) {\n      tail = node.tail;\n      args = node.event ? [node.event].concat(rest) : rest;\n      while ((node = node.next) !== tail) {\n        node.callback.apply(node.context || this, args);\n      }\n    }\n\n    return this;\n  }\n\n  manager.on = function () {\n    var args = Array.prototype.slice.call(arguments);\n    on.apply(manager, args);\n  };\n  manager.off = function () {\n    var args = Array.prototype.slice.call(arguments);\n    off.apply(manager, args);\n  };\n  manager.emit = function () {\n    var args = Array.prototype.slice.call(arguments);\n    emit.apply(manager, args);\n  };\n\n  return {\n    on   : manager.on,\n    off  : manager.off,\n    emit : manager.emit\n  };\n});\n","sitecues.define(\n  'run/exports',[\n    'run/constants',\n    'run/events'\n  ],\n  function (\n    constants,\n    events\n  ) {\n  'use strict';\n\n  // Enums for sitecues loading state\n  var state = constants.READY_STATE;\n\n  // This function is called when we are sure that no other library already exists in the page. Otherwise,\n  // we risk overwriting the methods of the live library.\n  function init(isOn) {\n    // Events\n    //Currently used on Chicago Lighthouse, we should discourage customer use of public event API\n    //in preparation for changing it in the future\n    sitecues.on   = events.on;     // Start listening for an event.\n    sitecues.emit = events.emit;   // Tell listeners about an event.\n    sitecues.off  = events.off;    // Stop listening for an event.\n\n    // Get info about the currently running sitecues client\n    sitecues.status = getStatus;\n    sitecues.getVersion = getVersion;\n    sitecues.isOn = isOn;\n\n    // Control BP expansion\n    sitecues.expandPanel = expandPanel;\n    sitecues.shrinkPanel = shrinkPanel;\n\n    // Sitecues reset\n    sitecues.reset = function() {};  // noop unless page module is loaded (if not loaded, there is nothing to reset)\n\n    //Loading state enumerations\n    sitecues.readyStates = state;\n\n    // 'Plant our flag' on this page.\n    sitecues.exists = true;\n  }\n\n  function expandPanel() {\n    require(['run/bp/controller/expand-controller'], function(expandController) {\n      expandController.expandPanel();\n    });\n  }\n\n  function shrinkPanel() {\n    require(['bp-expanded/controller/shrink-controller'], function(shrinkController) {\n      shrinkController.shrinkPanel();\n    });\n  }\n\n  function getVersion() {\n    return sitecues.version;\n  }\n\n  function getStatus() {\n    var args = arguments;\n    require(['status/status'], function(statusFn) {\n      statusFn.apply(this, args);\n    });\n  }\n\n  return {\n    init: init\n  };\n});\n\n","//jshint -W071\nsitecues.define('run/bp/constants',[], function() {\n\n  var constants = {};\n\n  // TODO don't repeat this in styles.js\n\n  constants.IS_BADGE        = 'scp-is-badge';      // BP is already badge and not animating\n  constants.IS_PANEL        = 'scp-is-panel';      // BP is already panel and not animating (used to be called scp-ready)\n  constants.WANT_BADGE      = 'scp-want-badge';     // BP is already badge or shrinking into one\n  constants.WANT_PANEL      = 'scp-want-panel';    // BP is already panel or expanding into one\n\n  // IDs\n\n  constants.SMALL_A_ID               = 'scp-small-A';\n  constants.LARGE_A_ID               = 'scp-large-A';\n\n  constants.SPEECH_ID                = 'scp-speech';\n\n  constants.MAIN_ID                  = 'scp-main';\n  constants.MAIN_CONTENT_FILL_ID     = 'scp-main-content-fill';\n\n  constants.MOUSEOVER_TARGET         = 'scp-mouseover-target'; // Mousing over this element causes BP to expand\n\n  constants.SVG_ID                   = 'scp-svg';\n  constants.BADGE_ID                 = 'sitecues-badge';\n  constants.BP_CONTAINER_ID          = 'scp-bp-container';\n\n  // Speech\n  constants.HEAD_ID                  = 'scp-head';\n  constants.SPEECH_LABEL_ID          = 'scp-speech-label';\n  constants.ZOOM_LABEL_ID            = 'scp-zoom-label';\n  constants.SPEECH_TARGET_ID         = 'scp-speech-target';\n  constants.WAVE_1_ID                = 'scp-wave1';\n  constants.WAVE_2_ID                = 'scp-wave2';\n  constants.WAVE_3_ID                = 'scp-wave3';\n\n  constants.VERT_DIVIDER_ID          = 'scp-vert-divider';\n  constants.BOTTOM_TEXT_ID           = 'scp-bottom-text';\n  constants.BOTTOM_MOUSETARGET_ID    = 'scp-bottom-mousetarget';\n  constants.BOTTOM_MORE_ID           = 'scp-bottom-secondary';\n\n  constants.CLOSE_BUTTON_ID          = 'scp-close-button';\n\n  constants.ZOOM_VALUE_ID            = 'scp-zoom-value';\n  constants.ZOOM_SLIDER_ID           = 'scp-zoom-slider-target';\n  constants.ZOOM_SLIDER_BAR_ID       = 'scp-zoom-slider-bar';\n  constants.ZOOM_SLIDER_THUMB_ID     = 'scp-zoom-slider-thumb';\n\n  constants.SHOW_ID                  = 'scp-show';\n\n  constants.SECONDARY_ID             = 'scp-secondary';\n  constants.MORE_BUTTON_GROUP_ID     = 'scp-more-button-group';\n  constants.MORE_BUTTON_CONTAINER_ID = 'scp-more-button-container';\n\n  constants.SHADOW_ID                = 'scp-shadow';\n  constants.OUTLINE_ID               = 'scp-focus-outline';\n  constants.MAIN_OUTLINE_ID          = 'scp-main-outline';\n  constants.MAIN_OUTLINE_BORDER_ID   = 'scp-outline-def';\n  constants.MORE_OUTLINE_ID          = 'scp-secondary-outline';\n\n  constants.BUTTON_MENU_ID           = 'scp-button-menu';\n  constants.TIPS_BUTTON_ID           = 'scp-tips-button';\n  constants.SETTINGS_BUTTON_ID       = 'scp-settings-button';\n  constants.FEEDBACK_BUTTON_ID       = 'scp-feedback-button';\n  constants.ABOUT_BUTTON_ID          = 'scp-about-button';\n  constants.ABOUT_ROTATE_HELPER_ID   = 'scp-about-rotate-helper';\n  constants.TIPS_LABEL_ID            = 'scp-tips-label';\n  constants.SETTINGS_LABEL_ID        = 'scp-settings-label';\n  constants.FEEDBACK_LABEL_ID        = 'scp-feedback-label';\n  constants.ABOUT_LABEL_ID           = 'scp-about-label';\n\n  constants.ABOUT_CONTENT_ID         = 'scp-about';\n  constants.ABOUT_CONTENT_IMAGE_ID   = 'scp-logo-text';\n\n  constants.FEEDBACK_CONTENT_ID      = 'scp-feedback';\n  constants.FEEDBACK_INPUT_RECT      = 'scp-feedback-input-rect';\n  constants.FEEDBACK_TEXTAREA        = 'scp-feedback-textarea';\n  constants.FEEDBACK_SEND_BUTTON     = 'scp-feedback-send-button'; // Looks like a button\n  constants.FEEDBACK_SEND_LINK       = 'scp-feedback-send-link';  // Actual active link child with click handler\n  constants.RATING                   = 'scp-rating';\n  constants.RATING_STAR_CLASS        = 'scp-rating-star';\n\n  constants.SETTINGS_CONTENT_ID      = 'scp-settings';\n  constants.TIPS_CONTENT_ID          = 'scp-tips';\n\n  constants.ARROWS_ID                = 'scp-arrows';\n  constants.NEXT_ID                  = 'scp-next-card';\n  constants.PREV_ID                  = 'scp-prev-card';\n\n  constants.DEFAULT_BADGE_CLASS      = 'scp-default-badge';\n\n  // Tips panel gadgets\n  constants.DEMO_PAGE                = 'scp-demo-page';\n  constants.DEMO_PAGE_CONTENTS       = 'scp-demo-page-contents';\n  constants.DEMO_PARA                = 'scp-demo-para';\n  constants.DEMO_MOUSE               = 'scp-demo-mouse';\n  constants.DEMO_SLIDER_THUMB        = 'scp-demo-slider-thumb';\n  constants.DEMO_ZOOM_PLUS           = 'scp-demo-zoom-plus';\n  constants.DEMO_ZOOM_MINUS          = 'scp-demo-zoom-minus';\n  constants.DEMO_LENS_SPACE          = 'scp-demo-lens-spacebar';\n  constants.DEMO_SPEECH_SPACE        = 'scp-demo-speech-spacebar';\n\n  // Settings panel gadgets\n  constants.THEME_POWER_ID           = 'scp-theme-power-group';\n  constants.THEME_TEXT_HUE_ID        = 'scp-theme-text-hue-group';\n  constants.MOUSE_SIZE_ID            = 'scp-mouse-size';\n\n  constants.HOVER_DELAY_NOMOVE_BADGE = 30;        // If mouse stays still inside badge for this long, open\n  constants.HOVER_DELAY_STAY_INSIDE_BADGE = 150;  // If mouse stays inside badge or toolbar for this long, open\n  constants.HOVER_DELAY_STAY_INSIDE_FIRST_TIME = 40;  // First time users get more sensitive badge\n  constants.MOUSELEAVE_DELAY_SHRINK_BP = 2000;\n\n\n  constants.TRANSFORMS = {\n    'PANEL'           : {},\n    'BADGE'           : {},\n    'ABOUT_ENABLED'   : {},\n    'SETTINGS_ENABLED': {},\n    'FEEDBACK_ENABLED': {},\n    'TIPS_ENABLED'    : {}\n  };\n\n  constants.TRANSFORMS.PANEL[constants.VERT_DIVIDER_ID] = {translateX:44};\n  constants.TRANSFORMS.BADGE[constants.VERT_DIVIDER_ID] = {translateX:-98};\n\n  constants.TRANSFORMS.PANEL[constants.SMALL_A_ID]      = {translateX:27};\n  constants.TRANSFORMS.BADGE[constants.SMALL_A_ID]      = {translateX:0};\n\n  constants.TRANSFORMS.PANEL[constants.LARGE_A_ID]      = {translateX:27};\n  constants.TRANSFORMS.BADGE[constants.LARGE_A_ID]      = {translateX:-115};\n\n  constants.TRANSFORMS.PANEL[constants.SPEECH_ID]       = {translateX:54};\n  constants.TRANSFORMS.BADGE[constants.SPEECH_ID]       = {translateX:-100};\n\n  constants.TRANSFORMS.PANEL[constants.ZOOM_SLIDER_THUMB_ID] = {translateX:44};\n  constants.TRANSFORMS.BADGE[constants.ZOOM_SLIDER_THUMB_ID] = {translateX:8};\n  constants.TRANSFORMS.FAKE_BADGE_TRANSLATEX = 116;\n\n  constants.TRANSFORMS.PANEL[constants.ZOOM_SLIDER_BAR_ID] = {\n    translateX: 27,\n    scaleX    : 1,\n    scaleY    : 1\n  };\n  constants.TRANSFORMS.BADGE[constants.ZOOM_SLIDER_BAR_ID] = {\n    translateX: 19,\n    scaleX    : 0.65,\n    scaleY    : 1\n  };\n\n  constants.TRANSFORMS[constants.SECONDARY_ID]             = {translateY: -198};\n  constants.TRANSFORMS[constants.MORE_BUTTON_CONTAINER_ID] = { };\n  constants.TRANSFORMS[constants.TIPS_BUTTON_ID]           = {translateX: 25};\n  constants.TRANSFORMS[constants.SETTINGS_BUTTON_ID]       = {translateX: 235};\n  constants.TRANSFORMS[constants.FEEDBACK_BUTTON_ID]       = {translateX: 465};\n  constants.TRANSFORMS[constants.ABOUT_BUTTON_ID]          = {translateX: 675};\n\n  // Elements that are only shown when panel is expanded\n  // Attributes\n  constants.PANEL_CONTAINER_ATTRS = {\n    'id'       : constants.BP_CONTAINER_ID,\n    // First role \"application\" tells screen reader to go into focus (not browse) mode\n    // Second role \"dialog\" gives more detail\n    'role'     : 'dialog',\n    'tabindex' : -1,\n    'class'    : 'scp-loading',\n    'aria-label': 'Sitecues'\n  };\n\n  constants.BADGE_ATTRS = {\n    'role'      : 'button',\n    'tabindex'  : 0,\n    'aria-busy' : 'false',\n    'data-sc-reversible': 'false'\n  };\n\n  constants.DEFAULT_TOOLBAR_ATTRS = {\n    'id'   : constants.BADGE_ID,\n    'class': 'scp-toolbar'\n  };\n\n  // Labels\n  constants.ZOOM_STATE_LABELS = {\n    'ZOOM_OFF': 'zoom_off',\n    'PRE_ZOOM': 'pre_zoom',\n    'POST_ZOOM': 'post_zoom'\n  };\n\n  constants.SPEECH_STATE_LABELS = {\n    'ON' : 'on',\n    'OFF': 'off'\n  };\n\n  constants.STRINGS = {\n    'BADGE_LABEL': 'badge_label'\n  };\n\n  // Zoom\n  constants.ZOOM_KEY_INCREMENT   = 0.1;   // When arrow key pressed zoom is changed by this amount\n  constants.FAKE_ZOOM_AMOUNT     = 2.2;   // If sitecues was never used, badge pretends zoom is here, to enhance attractiveness\n\n  // Other\n  constants.EXPAND_ANIMATION_DURATION_MS  = 1500;   // Time it takes to expand from badge to panel -- no hovers during this time\n  constants.SHRINK_ANIMATION_DURATION_MS  = 750;  // Time it takes to shrink panel to badge -- no hovers during this time\n  constants.NO_INPUT_TIMEOUT     = 7000;  // Show more button if no activity for this amount of time\n\n  // TODO is this still needed? It's fixed in Firefox\n  constants.FIREFOX_SLIDER_OFFSET = 69; // Hardcoded because of https://bugzilla.mozilla.org/show_bug.cgi?id=479058\n\n  // TODO compute this ratio\n  // It's used to set the slider thumb properly\n  constants.LARGE_SLIDER_WIDTH = 256;\n  constants.SMALL_SLIDER_WIDTH = 160;\n\n  // Ideal panel size for correct formatting of all contents.\n  // We may need to use a larger size if the badge was already large\n  // In that case we will make up the extra size using transform scale, so as not to disturb the HTML formatting\n  constants.IDEAL_PANEL_WIDTH = 506;\n  constants.IDEAL_PANEL_HEIGHT = 148;\n\n  // Amount toolbar space that will open badge\n  constants.ACTIVE_TOOLBAR_WIDTH = 500;\n\n  // Amount of pixels of whitespace at the top of the badge\n  // (This whitespace exists for a reason -- it turns into the top border when the panel opens)\n  constants.BADGE_VERTICAL_OFFSET = 2;\n\n  // Common palettes\n  constants.PALETTE_NAME_ADAPTIVE = 'adaptive';\n  constants.PALETTE_NAME_NORMAL = 'normal';\n  constants.PALETTE_NAME_REVERSE_BLUE = 'reverse-blue';\n\n  // Map legal full palette names to short names, used to create a class e.g. .scp-palette-rb\n  constants.PALETTE_NAME_MAP = {\n    'normal': '-n',\n    'adaptive': '*',\n    'reverse-blue': '-rb',\n    'reverse-yellow': '-ry'\n  };\n\n  // Wave animation (on hover over TTS button)\n  constants.ANIMATE_WAVES_OPACITY = [\n    [0.2, 0.4, 0.6, 0.8, 0.8, 0.6, 0.4, 0.2, 0.2, 0.2, 0.2, 0.4, 0.6, 0.8, 0.8, 0.6, 0.4, 0.2, 0.2, 0.2],  // Wave 1\n    [0.2, 0.2, 0.4, 0.6, 0.8, 0.8, 0.6, 0.4, 0.2, 0.2, 0.2, 0.2, 0.4, 0.6, 0.8, 0.8, 0.6, 0.4, 0.2, 0.4],  // Wave 2\n    [0.2, 0.2, 0.2, 0.4, 0.6, 0.8, 0.8, 0.6, 0.4, 0.2, 0.2, 0.2, 0.2, 0.4, 0.6, 0.8, 0.8, 0.6, 0.4, 0.6]   // Wave 3\n  ];\n  constants.ANIMATE_WAVES_STEP_DURATION = 100;\n\n  constants.BADGE_MODE = 0;\n  constants.PANEL_MODE = 1;\n  constants.SECONDARY_PANEL_DISABLED = 0;\n  constants.SECONDARY_PANEL_ENABLED  = 1;\n\n  return constants;\n});\n\n","// TODO we can save a lot of bytes by setting these directly on the state object (instead of inside .data)\nsitecues.define(\n  'run/bp/model/state',[],\n  function () {\n  'use strict';\n\n  var data = {\n    currentMode             : 0,     // 0 - 1, 0 is badge, 1 is panel, anything in between means its currently transitioning\n    transitionTo            : 0,     // 0 or 1, 0 is badge, 1 is panel, it cannot be anything in between (doesn't seem to make sense to transition to anything other than the badge or panel state)\n    isSecondaryPanel        : false,  // Are we currently in the secondary panel\n    secondaryPanelTransitionTo: 0,\n    scale                   : 1, // How much transform scale used on expanded BP\n    isRealSettings          : true, // Are we currently showing the actual settings or fake settings?\n    isFirstBadgeUse         : true, // Is this a first time user?\n    secondaryPanelName      : 'button-menu', // 'button-menu', 'tips', 'settings', 'feedback', 'about'\n    isSecondaryExpanding    : false, // Is secondary panel currently expanding to accommodate new contents?\n    isSecondaryExpanded     : false, // Is secondary panel fully expanded?\n    isStickyPanel           : false, // Sticky panel is for debugging -- mouseout doesn't close the panel\n    isClassicMode           : false, // Use question mark if browser support is weak or site is incompatible with themes\n    doSuppressHovers        : false, // Suppress mouse hovers until next mousemove, because browser won't recompute them until then (useful for animations)\n    isKeyboardMode          : false, // Show focus in this mode, support tab navigation\n    isOpenedWithScreenReader: false, // If opened with screen reader, be careful of spurious click events outside panel\n    isMoreButtonVisible     : false, // Should the more button be shown?\n    isPageBadge             : true,  // Is set to false if default badge is inserted\n    isToolbarBadge          : false, // Set to true if using a badge toolbar. This may eventually become redundant with isPageBadge (the opposite of it) if we only use toolbar default badges.\n    wasMouseInPanel         : false, // Was the mouse inside the panel since last expansion\n    paletteKey              : '',    // Current palette See BP_CONST.PALETTE_NAME_MAP for possible keys.\n    defaultPaletteKey       : '',    // Palette to use if sitecues theme determines that default palette should be used based on the background behind the badge.\n    isAdaptivePalette       : false, // Is an adaptive palette name\n    isShrinkingFromKeyboard : false, // Is the panel shrinking because of a keyboard command?\n    isFeedbackSent          : false, // Is the feedback sent?\n    ratioOfSVGToVisibleBadgeSize: undefined // ratio of svg to visible badge size\n  };\n\n  /*\n  Public accessors.\n   */\n\n  /**\n   * Get state model value specified by the property name given.\n   * @param propName String\n   * @returns {*}\n   */\n  function get(propName) {\n    if (data.hasOwnProperty(propName)) {\n      return data[propName];\n    }\n    if (SC_DEV) { console.log('ERROR: Cannot get property with name ' + propName + '.'); }\n  }\n\n  /**\n   * Set state model value specified by the property name given\n   * @param propName String\n   * @param propValue String or Number\n   */\n  function set(propName, propValue) {\n    if (data.hasOwnProperty(propName)) {\n      data[propName] = propValue;\n    } else {\n      if (SC_DEV) { console.log('ERROR: Cannot set property with name ' + propName + '.'); }\n    }\n  }\n\n  /*\n  Some of the most popular getters are listed below.\n   */\n  function isPanel() {\n    return data.currentMode === 1;\n  }\n\n  function isBadge() {\n    return data.currentMode === 0;\n  }\n\n  function isPanelRequested() {\n    return data.transitionTo === 1;\n  }\n\n  function isExpanding() {\n    return data.transitionTo === 1 && data.currentMode !== 1;\n  }\n\n  function isSecondaryPanelRequested() {\n    return data.secondaryPanelTransitionTo === 1;\n  }\n\n  function isSecondaryFeaturePanel() {\n    var panelName = getSecondaryPanelName();\n    return panelName && panelName !== 'button-menu';\n  }\n\n  function isShrinking() {\n    return data.transitionTo === 0 && data.currentMode !== 0;\n  }\n\n  /**\n   * Returns 'button-menu' or name of secondary panel\n   * @returns {string}\n   */\n  function getSecondaryPanelName() {\n    return data.secondaryPanelName;\n  }\n\n  function getPanelName() {\n    if (isPanel() && isSecondaryPanelRequested()) {\n      return data.secondaryPanelName;\n    }\n    return 'main';\n  }\n\n  function isButtonMenu() {\n    return isPanel() && data.secondaryPanelName === 'button-menu';\n  }\n\n  function turnOnRealSettings() {\n    set('isRealSettings', true);    // Always use real settings once expanded\n  }\n\n  return {\n    get: get,\n    set: set,\n    isPanel: isPanel,\n    isBadge: isBadge,\n    isPanelRequested: isPanelRequested,\n    isExpanding: isExpanding,\n    isSecondaryPanelRequested: isSecondaryPanelRequested,\n    isSecondaryFeaturePanel: isSecondaryFeaturePanel,\n    isShrinking: isShrinking,\n    getSecondaryPanelName: getSecondaryPanelName,\n    isButtonMenu: isButtonMenu,\n    turnOnRealSettings: turnOnRealSettings,\n    getPanelName: getPanelName\n  };\n});\n","// It is too similar to utils.js which is confusing\nsitecues.define(\n  'run/bp/helper',[\n    'run/bp/constants'\n  ],\n  function(\n    BP_CONST\n  ) {\n  'use strict';\n  /**\n   *** Getters ***\n   */\n\n  var elementByIdCache = {};\n\n  function byId(id) {\n    var result = elementByIdCache[id];\n    if (!result) {\n      result = document.getElementById(id);\n      elementByIdCache[id] = result;\n    }\n    return result;\n  }\n\n  function invalidateId(id) {\n    elementByIdCache[id] = undefined;\n  }\n\n  /**\n   * getRect returns the bounding client rect for the given element.\n   * It copies the values because this gets around Safari issue with where values otherwise appear undefined.\n   * @param element\n   * @returns {Object} rectangle\n   */\n  function getRect(element) {\n    var rect = element.getBoundingClientRect();\n    return {\n      top: rect.top,\n      bottom: rect.bottom,\n      left: rect.left,\n      right: rect.right,\n      width: rect.width,\n      height: rect.height\n    };\n  }\n\n  /**\n   * getRectById returns the bounding client rect for the given ID.\n   * It copies the values because this gets around Safari issue with where values otherwise appear undefined.\n   * @param id\n   * @returns {Object} rectangle\n   */\n  function getRectById(id) {\n    return getRect(byId(id));\n  }\n\n  /**\n   *** Setters ***\n   */\n\n  // Leave this method here rather than take it out to 'util / common' to avoid extra modules deps.\n  // In the end, we only want to load badge on the page w/o any other modules.\n  // Important note: do not use this function to set inline styles on original (non-Sitecues) elements\n  function setAttributes(element, attrs) {\n    for (var attrName in attrs) {\n      if (attrs.hasOwnProperty(attrName)) {\n        element.setAttribute(attrName, attrs[attrName]);\n      }\n    }\n  }\n\n  function getCurrentSVGElementTransforms() {\n\n    var result = {};\n\n    function mapTranslate(id) {\n      var transformAttrValue = byId(id).getAttribute('transform') || '';\n      result[id] = {\n        'translateX': getNumberFromString(transformAttrValue) || 0\n      };\n    }\n\n    // Everything except slider\n    mapTranslate(BP_CONST.SMALL_A_ID);\n    mapTranslate(BP_CONST.LARGE_A_ID);\n    mapTranslate(BP_CONST.SPEECH_ID);\n    mapTranslate(BP_CONST.VERT_DIVIDER_ID);\n    mapTranslate(BP_CONST.ZOOM_SLIDER_THUMB_ID);\n\n    // Slider bar is special because it stretches\n\n    var\n      sliderBar   = byId(BP_CONST.ZOOM_SLIDER_BAR_ID),\n      // translate(19) scale(.65, 1) -> ['translate(19)' , '(.65, 1)']\n      sliderBarTransforms = sliderBar.getAttribute('transform').split('scale'),\n      splitter            = sliderBarTransforms[1].indexOf(',') >= 0 ? ',' : ' ', // IE fix\n      sliderBarScale      = sliderBarTransforms[1].split(splitter),\n      sliderBarScaleX     = sliderBarScale[0],\n      sliderBarScaleY     = sliderBarScale.length > 1 ? sliderBarScale[1] : sliderBarScaleX;\n\n    result[BP_CONST.ZOOM_SLIDER_BAR_ID] = {\n      'translateX':getNumberFromString(sliderBarTransforms[0]),\n      'scaleX'    :getNumberFromString(sliderBarScaleX),\n      'scaleY'    :getNumberFromString(sliderBarScaleY)\n    };\n\n    return result;\n  }\n\n  function getNumberFromString(str) {\n    return +(str.match(/[0-9\\.\\-]+/));\n  }\n\n  // Fix for events in SVG in IE:\n  // IE sometimes gives us the <defs> element for the event, and we need the <use> element\n  function getEventTarget(evt) {\n    return evt.target.correspondingUseElement || evt.target;\n  }\n\n  function cancelEvent(evt) {\n    evt.returnValue = false;\n    evt.preventDefault();\n    evt.stopImmediatePropagation();\n    evt.stopPropagation();\n    return false;\n  }\n\n  //Edge can't handle text anchors during transformations, so we manually fix the x position of text within SVGs\n  // A text anchor in SVG allows text to be centered, right-justified, etc.\n  //TODO: Remove this when Edge fixes its support for text anchors, see SC-3434\n  function fixTextAnchors(svg) {\n    var elementsWithAnchors = svg.parentElement.querySelectorAll('[text-anchor]');\n\n    Array.prototype.forEach.call(elementsWithAnchors, function (element) {\n      var anchor = element.getAttribute('text-anchor'),\n          x      = parseFloat(element.getAttribute('x')),\n          textWidthInPixels = element.getComputedTextLength();\n\n      function setX(val) {\n        var DECIMAL_PLACES = 2;\n        element.setAttribute('x', val.toFixed(DECIMAL_PLACES));\n      }\n\n      if (anchor === 'middle') {\n        setX(x - textWidthInPixels / 2);\n      }\n      else if (anchor === 'end') {\n        setX(x - textWidthInPixels);\n      }\n\n      element.removeAttribute('text-anchor');\n    });\n  }\n\n  // This will roughly help us group similar types of element clicks\n  function getAriaOrNativeRole(elem) {\n    var role = elem.getAttribute('role'),\n      tag;\n    if (!role) {\n      // No role: use tag name\n      tag = elem.localName;\n      if (tag === 'input') {\n        // Tag name is input, use @type\n        role = elem.getAttribute('type');\n      }\n      else if (tag === 'g' || tag === 'div') {\n        // Tag name is g|div, use 'group'\n        role = 'group';\n      }\n    }\n    return role;\n  }\n\n  return {\n    byId: byId,\n    invalidateId: invalidateId,\n    getRect: getRect,\n    getRectById: getRectById,\n    setAttributes: setAttributes,\n    getCurrentSVGElementTransforms: getCurrentSVGElementTransforms,\n    getNumberFromString: getNumberFromString,\n    getEventTarget: getEventTarget,\n    cancelEvent: cancelEvent,\n    fixTextAnchors: fixTextAnchors,\n    getAriaOrNativeRole: getAriaOrNativeRole\n  };\n});\n\n","// Fix urls and localize strings in markup\nsitecues.define('run/bp/view/markup-finalizer',['run/locale'], function(locale) {\n  function removeHash(loc) {\n    return loc.replace(/\\#.*/, '');\n  }\n\n  // Relative URLs must be full URLS that a different base doesn't mess them up!\n  // Without this fix, markup such as xlink:href=\"#foo\" or filter=\"url(#foo)\" will not work in Firefox\n  // or recent Chrome, when the source document uses a base.\n  // Even if the base points to the default base, we still need to convert hashes, otherwise a page\n  // such as http://wokiss.pl/szkolenia.html will have an invisible badge in some browsers.\n  // Note: the base can be set via <base> tag or http header.\n  function convertRelativeUrlsToAbsolute(text) {\n    var MATCH_URLS = /(href=\"|url\\()(?:#)/g,\n      pageUrlMinusHash = removeHash(document.location.href);\n\n    return text.replace(MATCH_URLS, function (totalMatch, attributeName) {\n      return attributeName + pageUrlMinusHash + '#';\n    });\n  }\n\n  return function(markup) {\n    var withAllAbsoluteUrls = convertRelativeUrlsToAbsolute(markup),\n      localized = locale.localizeStrings(withAllAbsoluteUrls);\n\n    return localized;\n  };\n});\n\n","sitecues.define('run/bp/view/styles',['run/bp/helper', 'run/platform', 'run/conf/site'],\n  function (helper, platform, site) {\n\n  var\n    isInitialized,\n\n    isAnimationDebuggingOn = false,\n\n    palette,\n    hasCustomPalette,\n    customBadgePalette,\n\n    doWebKitPrefix,\n\n    MAX_ZINDEX       = 2147483647,\n\n    BASE_SHEET_ID    = 'sitecues-js-bp-css',\n\n    HIDE_IN_PRINT_MEDIA =\n      // Turn off toolbar, dimmer, lens and zoom\n      // TODO needs more work to reset body width if page sets it to something different\n      '@media print { ' +\n      '.scp-toolbar, #scp-bp-container, #sitecues-background-dimmer, #sitecues-hlb-wrapper { display: none !important; } ' +\n      'body { transform: none !important; width: auto !important; } ' +\n      '}',\n\n    BASE_CSS;\n\n  function toCSS(jsonObject) {\n\n    var styles = HIDE_IN_PRINT_MEDIA;\n\n    var isTransformPrefixNeeded = document.createElement('p').style.transform === undefined;\n\n    for (var selector in jsonObject) {\n      if (jsonObject.hasOwnProperty(selector)) {\n        styles += selector + ' {\\n';\n        for (var attribute in jsonObject[selector]) {\n          if (jsonObject[selector].hasOwnProperty(attribute)) {\n            var value = jsonObject[selector][attribute];\n            if (isTransformPrefixNeeded) {\n              if (attribute === 'transform' || attribute === 'transition' ||\n                attribute === 'transform-origin') {\n                // TEMPORARY DEBUGGING CODE\n                if (SC_DEV && isAnimationDebuggingOn && attribute === 'transition') {\n                  value = value.replace('.', ''); // Slow down transition\n                }\n                if (doWebKitPrefix) {\n                  attribute = '-webkit-' + attribute;\n                  value = value.replace('transform', '-webkit-transform');\n                }\n              }\n            }\n            styles += '  ' + attribute + ': ' + value + ';\\n';\n          }\n        }\n        styles += '}\\n';\n      }\n    }\n\n    return styles;\n  }\n\n  function initBaseCss() {\n    BASE_CSS = {\n      /**\n       General CSS rules for panel\n\n       Basic structure of panel:\n       <sc #scp-bp-container>\n       <sc #scp-close-button>\n       <sc .scp-feature-content>\n       <svg #scp-svg>\n       <defs>\n       <g #scp-main>\n       #scp-zoom-slider\n       #scp-speech›\n       ...\n       <g #scp-secondary>     // Secondary panel that slides down\n       <g .scp-feature-content>\n       <g .scp-tips> etc.\n       <sc-cards>\n       <sc-card>\n       <sc-card>\n       ...\n\n       Classes important for CSS:\n       - On #scp-bp-container\n       .scp-is-badge: BP is badge\n       .scp-is-panel: BP is panel\n       .scp-want-badge: BP is badge or shrinking into one\n       .scp-want-panel: BP is panel or expanding into one\n       .scp-is-panel-only  // Only display in panel mode or when becoming panel\n       .scp-keyboard: Keyboard mode\n       - Elsewhere:\n       .scp-secondary-only   // Only display in more panel\n       .scp-feature-content // Only display in feature panel (reachable for more panel)\n       .scp-hand-cursor: show a hand (aka pointer) cursor over this element\n       .scp-hidden-target: a click target that is hidden (e.g. a rect that covers more area than the visible part of the target)\n\n\n       ARIA roles:\n       - dialog, button, checkbox (speech button), slider, link, presentation (means don't expose to screen reader)\n       ARIA modes:\n       - Used for CSS: aria-checked, aria-disabled\n       - Not used for CSS: aria-activedescendant (focused item ID), aria-valuenow, aria-valuemin, aria-valuemax, aria-label, aria-labelledby\n       */\n\n      '#scp-bp-container,#scp-bp-container textarea': {\n        // We used to do #scp-bp-container *, but this could be dangerously slow\n        'box-sizing': 'content-box !important'  // In case the web page overrode it for anything\n      },\n\n      /***************** Loading/badge  ****************/\n\n      // If there is an old badge image, do not show it -- we will show new BP-based badge in place of it\n      'img#sitecues-badge, #sitecues-badge>img': {\n        'visibility': 'hidden !important',\n        'opacity': '0 !important'\n      },\n\n      // When panel is closed, we use position: absolute\n      // When open, we use position: fixed\n      '#sitecues-badge>#scp-bp-container': {\n        'position': 'absolute'\n      },\n\n      // Fade in the badge when it appears\n      '#scp-bp-container': {\n        'position': 'fixed',\n        'direction': 'ltr !important',\n        'z-index': MAX_ZINDEX,\n        'transition': 'opacity 1.5s',\n        'transform-origin': '0 0',\n        'text-align': 'left', // To prevent style pollution found on http://codecanyon.net/\n//          'will-change': 'transform',   // Removing helps Chrome not get blurry on sitecues.com after zoom\n        'outline': 0, // don't show default dotted focus outline\n        '-webkit-user-select': 'none',\n        '-moz-user-select': 'none',\n        '-ms-user-select': 'none'\n      },\n\n      '#scp-svg': {\n        'direction': 'ltr !important',\n        'max-width': 'none',\n        'overflow': 'hidden',\n        'position': 'absolute'\n      },\n\n      // The new badge is hidden until sitecues is loaded\n      // The old badge is visible until sitecues is loaded\n      '#scp-bp-container.scp-loading,#sitecues-badge[aria-busy=\"false\"]>img': {\n        'opacity': '0 !important',\n\n        // We force the <img> placeholder to have a display of block so the wrapper height\n        // is the same as the <img> height.  vertical-align:top was tried, tested, but\n        // it did not work on faast.org.  Below is a link to information about the problem\n        // and solutions.\n        // http://stackoverflow.com/questions/11447707/div-container-larger-than-image-inside\n        'display': 'block'\n      },\n\n      '#scp-bp-container:not(.scp-loading)': {\n        'opacity': '1 !important'\n      },\n\n      // .scp-toolbar means it's a toolbar\n      '.scp-toolbar': {\n        'position': 'fixed !important',\n        'top': 0,\n        'left': 0,\n        'width': '100%',\n        'height': '38px !important',\n        'margin': '0 !important',  // Prevent page style pollution\n        'box-sizing': 'border-box',\n        'box-shadow': '1px 1px 15px 0 rgba(9, 9, 9, .5)',\n        'padding': '6px 0 8px calc(50% - 66px)',\n        'background-color': customBadgePalette.toolbar || '#f7fcff',  // Ensure our own theme engine doesn't turn the toolbar dark\n        'z-index': MAX_ZINDEX,\n        'direction': 'ltr !important'\n      },\n\n      '.scp-toolbar > #scp-bp-container': {\n        'background-color': 'transparent !important',\n        'margin': '0 !important'  // Prevent page style pollution\n      },\n\n      // Move the body down by the height of the toolbar\n      'html[data-sitecues-toolbar]': {\n        'padding-top': '38px !important'\n      },\n\n      /********** Transform animation speed **********/\n\n      // TODO: Transitions are pretty efficient for opacity, but it may be worth trading\n      //       that for simplicity (using JS animations for EVERYTHING).\n      '#scp-main > *, .scp-wave': {\n        'transition': 'fill .2s, opacity .2s'\n      },\n\n      '#scp-bottom-text': {\n        'transition': 'opacity 1s',\n        'visibility': 'hidden'\n      },\n\n      '.scp-is-panel text': {\n        'font-family': 'Arial',\n        'font-size': '29px',\n        'font-weight': 'bold'\n      },\n\n      /* Text label animation for main panel labels */\n      /* The problem with the text scale transition is jerkiness, so for now we delay text labels until panel is large */\n      /* One way to fix this might be to render text into a canvas element, or maybe there's another font that doesn't do this */\n      '.scp-is-panel #scp-bottom-text': {\n        'visibility': 'visible !important',\n        'opacity': '1 !important'\n      },\n\n      /************** Shadow *********************/\n\n      '#scp-shadow': {\n        'position': 'absolute',\n        'top': '-437px',\n        'width': '513px',\n        'height': '564px',\n        'background-image': 'url(data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20820%20902%22%20preserveAspectRatio%3D%22xMinYMin%22%3E%3Cdefs%3E%3Cfilter%20id%3D%22shadowblur%22%3E%20%3CfeGaussianBlur%20in%3D%22SourceGraphic%22%20stdDeviation%3D%225%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cpath%20filter%3D%22url%28%23shadowblur%29%22%20d%3D%22m808%2C888c0%2C6%20-5%2C11%20-11%2C11H11m797%2C-11v-888%22%20stroke%3D%22%23222%22%20stroke-width%3D%222%22%20fill%3D%22none%22%2F%3E%3C%2Fsvg%3E)'\n      },\n\n      '#scp-shadow-container': {\n        'display': 'none',\n        'opacity': 0,\n        'pointer-events': 'none'\n      },\n\n      '.scp-want-panel #scp-shadow-container': {\n        'transition': 'opacity 1s',\n        'display': 'block'\n      },\n\n      '.scp-is-panel #scp-shadow-container': {\n        'opacity': 1\n      },\n\n      /************ Small vs. large  *************/\n\n      '.scp-want-panel > #scp-svg': {\n        'opacity': '1 !important'\n      },\n\n      '.scp-want-panel:not(.scp-is-panel) .scp-hand-cursor': {\n        'pointer-events': 'none'   // Fix for SC-2542: don't process mouseover hovers while expanding toward large state\n      },\n\n      '.scp-want-panel .scp-panel-only': { // element is visible in the large state of the badge-panel\n        'opacity': '1 !important'\n      },\n\n      '.scp-want-panel #scp-mouseover-target': {\n        'display': 'none'  // Don't let badge mouseover target interfere with actual use of panel\n      },\n\n      /**************** Waves ************************/\n\n      '.scp-wave,.scp-head': {\n        'pointer-events': 'none'\n      },\n\n      /* Waves use gray off state if not hovering and showing real settings (not first time badge) */\n      '.scp-realsettings #scp-speech[aria-checked=\"false\"]:not(.scp-dim-waves) > .scp-wave': {\n        /* First time we're small we always show on state because it's more inviting. However, going from small to large the first time, we're going from fake on to real off. Transition gently, don't draw attention to that. */\n        'fill': '#aaa' /* Gray */\n      },\n\n      '.scp-dim-waves> #scp-wave1': {\n        'opacity': '.3'\n      },\n\n      '.scp-dim-waves > #scp-wave2': {\n        'opacity': '.38'\n      },\n\n      '.scp-dim-waves > #scp-wave3': {\n        'opacity': '.44'\n      },\n\n      /******************* More **********************/\n\n      '.scp-classic-true #scp-more-arrow': {\n        'display': 'none'\n      },\n\n      '.scp-classic-false #scp-question': {\n        'display': 'none'   // Classic mode: weak browsers and sites incompatible with themes -- provide help only\n      },\n\n      '#scp-more-button-opacity': {\n        'opacity': 0,\n        'pointer-events': 'all'\n      },\n\n      '.scp-transition-opacity-fast' : {\n        'transition': 'opacity 0.4s',\n        'opacity': 1\n      },\n\n      '#scp-secondary, .scp-secondary-feature': {\n        'display': 'none'  /* Do this here to prevent flashing in case content loads before secondary.css */\n      },\n\n      /******** Mouse targets must be hidden but still able to handle events *************/\n\n      '.scp-hidden-target': {\n        'opacity': 0\n      },\n\n      /*************** Focus **************************/\n\n      /* Do not use outline because it ends up being larger than the visible content, at least in Firefox */\n      '#sitecues-badge:focus,#scp-bp-container:focus,#scp-bp-container *:focus': {\n        'outline': '0 !important'\n      },\n\n      '#sitecues-badge[aria-expanded=\"false\"]:focus > .scp-is-badge #scp-badge-focus-rect': {\n        'stroke': 'rgba(82, 168, 236, 0.8)',\n        'stroke-width': '24px'\n      },\n\n      '#scp-focus-outline': {\n        'box-shadow': '0 0 4px 6px rgba(82,168,236,0.8)',\n        'border-radius': '4px',\n        'display': 'none',\n        'position': 'absolute',\n        'pointer-events': 'none',\n        'z-index': 99999\n      },\n\n      /*** Firefox focus rules, since getBoundingClientRect() is broken for SVG */\n      // Firefox focus for SVG\n      '.scp-is-panel [data-show-focus=\"stroke-child\"]:not([data-own-focus-ring]) rect,.scp-is-panel [data-show-focus=\"stroke-child\"]:not([data-own-focus-ring])>.scp-hidden-target': {\n        'stroke': 'rgba(82,168,236,.8)',\n        'stroke-width': '8px',\n        'opacity': 1,\n        'display': 'block',\n        'fill': 'transparent',\n        'z-index': -1,\n        'filter': 'url(#scp-focusblur)'\n      },\n\n      // Firefox focus for HTML\n      '.scp-is-panel [data-show-focus=\"box-shadow\"]:not([data-own-focus-ring])': {\n        'box-shadow': '0 0 10px 3px rgb(82,168,236)'\n      },\n\n      '.scp-is-panel.scp-keyboard:not(.scp-secondary-expanding) > #scp-focus-outline[data-show]': {\n        'display': 'block'\n      },\n\n      // The feedback text area has its own focus ring so that it can show behind the feedback button :/ !\n      '#scp-feedback-input-rect[data-show-focus]': {   // Using id selector which is faster than [data-own-focus-ring][data-show-focus]\n        'stroke': 'rgba(82,168,236,.8)',\n        'stroke-width': '6px',\n        'filter': 'url(#scp-focusblur)',\n        '-webkit-filter': 'url(#scp-focusblur)'\n      },\n\n      /*************** Clipping rules for badge **************************/\n      // When the badge is fully collapsed, we clip it so that the invisible parts\n      // of the SVG do not take mouse events.\n      // The clipping is computed in placement.js\n      // This rule undoes the placement.js clipping when the BP is not currently fully collapsed.\n      '#scp-bp-container:not(.scp-is-badge)': {\n        'clip': 'auto !important'\n      },\n\n      // ---- Badge colors (normal or object-based palette) ----\n      // For instructions on setting up a palette, see https://equinox.atlassian.net/wiki/display/EN/sitecues+config+options\n      '#scp-head': {\n        'fill': customBadgePalette.head || '#000'\n      },\n\n      '.scp-A-button': {\n        'fill': customBadgePalette.A || '#000'\n      },\n\n      '#scp-zoom-slider-thumb': {\n        'fill': customBadgePalette.sliderThumb || '#447AC4'\n      },\n\n      '#scp-zoom-slider-bar': {\n        'fill': customBadgePalette.sliderBar || '#383838'\n      },\n\n      '#scp-wave1': {\n        'fill': customBadgePalette.wave1On || '#80A9F8'\n      },\n\n      '#scp-wave2': {\n        'fill': customBadgePalette.wave2On || '#6B9AE0'\n      },\n\n      '#scp-wave3': {\n        'fill': customBadgePalette.wave3On || '#447AC4'\n      },\n\n      // ----- Pre-packaged palettes -----\n      // .scp-palette-n  = palette: 'normal'\n      // .scp-palette-rb = palette: 'reverse-blue'\n      // .scp-palette-ry = palette: 'reverse-yellow'\n\n      // -- Reverse blue ---\n      '.scp-palette-rb #scp-zoom-slider-thumb': {\n        'fill': '#447AC4'\n      },\n\n      '.scp-palette-rb #scp-wave1': {\n        'fill': '#80A9F8'\n      },\n\n      '.scp-palette-rb #scp-wave2': {\n        'fill': '#6B9AE0'\n      },\n\n      '.scp-palette-rb #scp-wave3': {\n        'fill': '#447AC4'\n      },\n\n      '.scp-palette-rb .scp-A-button, .scp-palette-rb #scp-head, .scp-palette-rb #scp-zoom-slider-bar': {\n        'fill': '#fff'\n      },\n\n      '.scp-palette-rb.scp-toolbar': {\n        'background-color': '#080300'\n      },\n\n      // -- Reverse yellow ---\n      '.scp-palette-ry #scp-wave1': {\n        'fill': '#FFE460'\n      },\n\n      '.scp-palette-ry #scp-wave2': {\n        'fill': '#FFCC00'\n      },\n\n      '.scp-palette-ry #scp-wave3': {\n        'fill': '#FDAC00'\n      },\n\n      '.scp-palette-ry #scp-zoom-slider-thumb': {\n        'fill': '#FFCD00'\n      },\n\n      '.scp-palette-ry .scp-A-button, .scp-palette-ry #scp-head, .scp-palette-ry #scp-zoom-slider-bar': {\n        'fill': '#fff'\n      },\n\n      '.scp-palette-ry.scp-toolbar': {\n        'background-color': '#080300'\n      },\n\n      // -- Expanded panel colors --\n      // Panel must go back to normal colors when expanded\n      // This is currently true for all palettes\n      '.scp-want-panel .scp-A-button, .scp-want-panel #scp-head, .scp-want-panel  #scp-zoom-slider-bar': {\n        'fill': '#000'\n      },\n\n      '.scp-want-panel #scp-zoom-slider-thumb': {\n        'fill': '#447AC4'\n      },\n\n      '.scp-want-panel #scp-wave1': {\n        'fill': '#80A9F8'\n      },\n\n      '.scp-want-panel #scp-wave2': {\n        'fill': '#6B9AE0'\n      },\n\n      '.scp-want-panel #scp-wave3': {\n        'fill': '#447AC4'\n      },\n\n      '.scp-is-panel .scp-A-button:hover': {\n        'fill': '#447AC4'\n      },\n\n      '.scp-is-panel #scp-zoom-slider-thumb:hover': {\n        'fill': '#6B9AE0'\n      },\n\n      // General way of showing the content only if sitecues-badge is also shown.\n      // Note: the page must also have the following rule:\n      // .sitecues-only { visibility: hidden; opacity: 0; }\n      '.sitecues-only': {\n        'visibility': 'visible',\n        'opacity': 1\n      }\n    };\n  }\n\n  function createStyleSheet(sheetId, cssDefs) {\n    var sheet = document.createElement('style');\n    sheet.id = sheetId;\n    sheet.innerHTML = toCSS(cssDefs);\n    document.head.appendChild(sheet);\n  }\n\n  function init() {\n    palette = site.get('palette');\n    hasCustomPalette = typeof palette === 'object';\n    customBadgePalette = (hasCustomPalette && palette.badge) || {};\n    doWebKitPrefix = platform.browser.isSafari;\n    initBaseCss();\n\n    if (!isInitialized) {\n      isInitialized = true;\n      createStyleSheet(BASE_SHEET_ID, BASE_CSS);\n    }\n  }\n\n  if (SC_DEV) {\n    sitecues.toggleSlowBPAnimations = function () {\n      isAnimationDebuggingOn = !isAnimationDebuggingOn;\n      document.head.removeChild(helper.byId(BASE_SHEET_ID));\n      createStyleSheet(BASE_SHEET_ID, BASE_CSS);\n    };\n  }\n\n  return {\n    init: init\n  };\n});\n\n","// todo:\n// 1. move this code to .svg file so it's easier to edit\n/*\nThe purpose of some elements:\n- #scp-zoom-slider-target used for slider size manipulation while dragging the slider thumb or other actions\n- #scpspeechtarget adds animation styles for speech icon waves\n-\n */\nsitecues.define('run/bp/view/svg',['run/bp/view/markup-finalizer', 'run/bp/view/styles'], function(finalizer, styles) {\n  /*jshint multistr: true */\n\n  var svg = '\\\n<sc id=\"scp-focus-outline\" role=\"presentation\"></sc>\\\n<sc id=\"scp-shadow-container\" role=\"presentation\" style=\"position:absolute;width:513px;height:630px;overflow:hidden\">\\\n  <sc id=\"scp-shadow\"></sc>\\\n</sc>\\\n\\\n<svg id=\"scp-svg\" role=\"group\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 810 300\" preserveAspectRatio=\"xMinYMin\" data-sc-reversible=\"false\" data-metric=\"panel\">\\\n<defs>\\\n  <g id=\"scp-small-A-def\">\\\n    <path d=\"m37 .2l23 62h-14l-5 -14h-23l-5 14h-14l23 -62h14zm1 38l-9 -23h0l-8 23h16z\"/>\\\n    <rect class=\"scp-hidden-target scp-hand-cursor\" x=\"-22\" y=\"-35\" width=\"102\" height=\"134\"/>\\\n  </g>\\\n  <g id=\"scp-large-A-def\">\\\n    <path d=\"m54 0l33 89h-20l-7 -20h-33l-7 20h-20l34 -89h20zm1 55l-11 -32h0l-12 33h23z\"/>\\\n    <rect class=\"scp-hidden-target scp-hand-cursor\" x=\"-22\" y=\"-20\" width=\"140\" height=\"132\"/>\\\n  </g>\\\n  <path id=\"scp-zoom-slider-bar-def\" d=\"m278 3v27c0 2 -1 3 -3 3h-273c-2 0 -3 -1 -3 -3v-6c0 -1 1 -2 2 -3l273 -22c1 0 3 1 3 3z\"/>\\\n  <path id=\"scp-zoom-slider-thumb-def\" d=\"m11,64l-10,-15v-41c0,-2 3,-7 5,-7h15c1,0 5,3 5,7v41l-10,15c0,0 -2.5,2 -5,0\"/>\\\n  <path id=\"scp-head-def\" d=\"m76 45c0 1 2 4 -2 5c-1 0 -2 .5 -4 .5c-1 0 -2 1 -1 2c0 1 0 2 -2 3c1 0 2 0 2 1c0 1 -1 1 -1 3c0 1 3 5 2 8c0 3 -10 2 -20 2c0 0 -3 11 10 13c7 1 14 7 14 16h-74c0 -5 0 -12 8 -14c0 0 14 -5 14 -14c1 -13 -9 -17 -11 -27c-5 -21 6 -39 29 -39c8 0 13 2 15 4c10 5 12 16 12 22c0 3 -2 6 .5 8c8 6 8 6 9 7z\"/>\\\n  <path id=\"scp-wave1-def\" d=\"m105 26c0 0 26 25 1 52c-3 3 -9 2 -11 1c-2 -1 -4 -4 -2 -6c0 0 17 -18 0 -41c-1 -2 0 -5 2 -6c2 -1 8 -2 11 1z\"/>\\\n  <path id=\"scp-wave2-def\" d=\"m134 14c37 41 0 74 0 74c-3 3 -9 2 -11 1c-2 -1 -4 -4 -2 -6c27 -35 0 -64 0 -64l0 0c-1 -2 0 -5 2 -6c2 -1 9 -1 11 1z\"/>\\\n  <path id=\"scp-wave3-def\" d=\"m167 2c0 0 48 47 0 97c-3 3 -9 2 -11 1c-2 -1 -3 -5 -2 -6c36 -47 0 -87 0 -87c-1 -2 0 -5 2 -6c2 -1 9 -2 11 1z\"/>\\\n  <g id=\"scp-bottom-def\">\\\n    <rect x=\"0\" y=\"134\" width=\"808\" stroke=\"#C0BFBF\" stroke-width=\"1\" height=\"1\" fill=\"none\"/>\\\n    <path transform=\"translate(0,1)\" d=\"M806,186c0,6-5,11-11,11H12C6,196,1,192,1,187v-42 c0-6,0-11,0-11h806c0,0,0,5,0,11V186\" fill=\"#EEE\"/>\\\n  </g>\\\n  <path id=\"scp-outline-def\" d=\"M 808 187c0 6-5 11-11 11H11.5 c-6 0-11-5-11-11V0c0 0 5 0 11 0h786c6 0 11 0 11 0V187\" stroke=\"#999\" stroke-width=\"1.5\"/>\\\n  <g id=\"scp-rating-star-def\">\\\n    <path d=\"M30 45L48 54L44 35L59 21L39 18L30 0L21 18L1 21L16 35L12 54L30 45\"/>\\\n    <rect class=\"scp-hidden-target scp-hand-cursor\" width=\"66\" height=\"62\"/>\\\n  </g>\\\n  <filter id=\"scp-focusblur\">\\\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"2.5\"/>\\\n  </filter>\\\n  <path id=\"scp-arrow\" d=\"m18,-1.9c-1.3,1.4 -15.6,15 -15.6,15c-.7,.7 -1.7,1.2 -2.7,1.2c-1,0 -1.89999,-.4 -2.7,-1.2c0,0 -14.2,-13.6 -15.6,-15c-1.3,-1.4 -1.4,-3.9 0,-5.3c1.4,-1.5 3.5,-1.6 5.2,0l13,12.5l13,-12.5c1.8,-1.6 3.8,-1.5 5.2,0c1.3,1.8 1.3,4 0,5.3l.2,0z\"/>\\\n</defs>\\\n<rect id=\"scp-badge-bg\" fill=\"white\" stroke-width=\"0\" x=\"0\" y=\"0\" width=\"630\" height=\"124\" opacity=\"0\"/>\\\n<rect id=\"scp-badge-focus-rect\" fill=\"transparent\" stroke-width=\"0\" x=\"10\" y=\"10\" width=\"620\" height=\"114\" rx=\"15\" ry=\"15\" filter=\"url(#scp-focusblur)\"/>\\\n<g id=\"scp-main\" aria-label=\"{{sitecues_main_panel}}\">\\\n  <rect id=\"scp-main-content-fill\" role=\"presentation\" fill=\"white\" stroke-width=\"0\" x=\"1\" y=\"1\" width=\"806\" height=\"134\" class=\"scp-panel-only\" opacity=\"0\"/>\\\n  <use id=\"scp-small-A\" xlink:href=\"#scp-small-A-def\" y=\"48\" role=\"button\" aria-label=\"{{zoom_out}}\" class=\"scp-A-button\"/>\\\n  <g id=\"scp-zoom-slider-bar\" role=\"slider\" aria-valuemin=\"1\" aria-valuemax=\"3\" aria-valuenow=\"1\" aria-labelledby=\"scp-zoom-label\" data-thumb-mover=\"scp-zoom-slider-thumb\">\\\n    <use xlink:href=\"#scp-zoom-slider-bar-def\" x=\"80\" y=\"60\"/>\\\n    <rect id=\"scp-zoom-slider-target\" role=\"presentation\" class=\"scp-hidden-target scp-hand-cursor\" x=\"80\" y=\"44\" width=\"280\" height=\"67\"/>\\\n  </g>\\\n  <use id=\"scp-zoom-slider-thumb\" class=\"scp-hand-cursor\" xlink:href=\"#scp-zoom-slider-thumb-def\" role=\"presentation\" aria-controls=\"scp-zoom-slider-bar\" y=\"48\" x=\"60\"/>\\\n  <use id=\"scp-large-A\" xlink:href=\"#scp-large-A-def\" x=\"380\" y=\"21\" role=\"button\" aria-label=\"{{zoom_in}}\" class=\"scp-A-button\"/>\\\n  <line id=\"scp-vert-divider\" class=\"scp-panel-only\" opacity=\"0\" stroke=\"#888\" stroke-width=\"2\" x1=\"500\" y1=\"31\" x2=\"500\" y2=\"99\"/>\\\n  <g id=\"scp-speech\" role=\"checkbox\" aria-checked=\"false\" aria-label=\"{{speech}}\"> <!-- ARIA Toggle button not working well with NVDA screen reader -->\\\n    <use id=\"scp-head\" role=\"presentation\" xlink:href=\"#scp-head-def\" x=\"530\" y=\"11\"/>\\\n    <use id=\"scp-wave1\" role=\"presentation\" xlink:href=\"#scp-wave1-def\" class=\"scp-wave\" x=\"530\" y=\"11\"/>\\\n    <use id=\"scp-wave2\" role=\"presentation\" xlink:href=\"#scp-wave2-def\" class=\"scp-wave\" x=\"530\" y=\"11\"/>\\\n    <use id=\"scp-wave3\" role=\"presentation\" xlink:href=\"#scp-wave3-def\" class=\"scp-wave\" y=\"11\" x=\"530\"/>\\\n    <rect id=\"scp-speech-target\" role=\"presentation\" x=\"530\" y=\"5\" width=\"193\" height=\"115\" class=\"scp-hidden-target scp-hand-cursor\"/>\\\n  </g>\\\n  <g id=\"scp-bottom\" class=\"scp-panel-only\" opacity=\"0\">\\\n    <use id=\"scp-bottom-mousetarget\" role=\"presentation\" xlink:href=\"#scp-bottom-def\"/>\\\n    <g id=\"scp-bottom-text\" role=\"presentation\" opacity=\"0\">\\\n      <text id=\"scp-zoom-label\" x=\"25\" y=\"178\"><tspan id=\"scp-zoom-value\" role=\"presentation\">{{zoom_off}}</tspan></text>\\\n      <text id=\"scp-speech-label\" x=\"581\" y=\"178\" data-x-start=\"581\" data-x-end=\"795\">\\\n        {{speech}} {{off}}\\\n      </text>\\\n    </g>\\\n    <rect opacity=\"0\" x=\"0\" y=\"195\" width=\"808\" height=\"64\"/>\\\n  </g>\\\n</g>\\\n<g id=\"scp-secondary-anchor\" role=\"presentation\" />\\\n<use id=\"scp-main-outline\" role=\"presentation\" xlink:href=\"#scp-outline-def\" class=\"scp-panel-only\" fill=\"none\" opacity=\"0\"/>\\\n<g id=\"scp-more-button-opacity\" role=\"presentation\" transform=\"translate(400,198)\">\\\n  <g id=\"scp-more-button-container\" role=\"presentation\">\\\n    <g id=\"scp-more-button-group\" data-hover=\"scale(1.2)\" class=\"scp-hand-cursor\" role=\"button\" aria-label=\"{{more_features}}\">\\\n      <circle fill=\"#FFF\" stroke=\"#777\" stroke-width=\"5\" stroke-miterlimit=\"10\" cx=\"0\" cy=\"0\" r=\"34\"/>\\\n      <use id=\"scp-more-arrow\" role=\"presentation\" fill=\"#777\" xlink:href=\"#scp-arrow\"/>\\\n      <path id=\"scp-question\" role=\"presentation\" fill=\"#777\" stroke=\"#777\" stroke-width=\"2\" d=\"M0,-16c-3.4 0-6 1-7.5 2.6-1.6 1.6-2.2 3.6-2.4 5.1l4 .5c.2-1 .5-2 1.2-2.8 .8-.8 2-1.5 4.6-1.5 2.6 0 4.1 .5 4 1.4 .8 .7 1.1 1.6 1.1 2.6 0 3.3-1.4 4.2-3.4 6-2 1.8-4.6 4.3-4.6 9v1h4v-1c0-3.3 1.2-4.2 3.2-6 2-1.8 4.8-4.3 4.8-9 0-2-.7-4.1-2.4-5.6-1.7-1.6-4.3-2.4-7.6-2.4zm-2.8 28v4h4v-4h-4z\"></path>\\\n      <circle cx=\"0\" cy=\"0\" r=\"36\" class=\"scp-hidden-target\"/>\\\n    </g>\\\n  </g>\\\n</g>\\\n<rect id=\"scp-mouseover-target\" role=\"presentation\" x=\"-100\" y=\"-40\" width=\"820\" height=\"200\" opacity=\"0\"/>\\\n</svg>\\\n\\\n<sc id=\"scp-html-secondary-anchor\" role=\"presentation\" style=\"display:none\"></sc>'; // Hack to make sure innerHTML doesn't remove any important last element\n\n  return function() {\n    styles.init();\n    return finalizer(svg);\n  };\n});\n\n","sitecues.define('run/util/array-utility',[], function () {\n\n  'use strict';\n\n  // Return an array with the members of arr1 that aren't in arr2, and the members of arr2 that aren't in arr1\n  // NOTE: if elements aren't unique in an array, they will be repeated in the difference\n  function symmetricDifference(arr1, arr2) {\n    var difference,\n      array1 = from(arr1),\n      array2 = from(arr2);\n    \n    if (array1.length) {\n      difference = array2.filter(function (member) {\n        if (typeof member !== 'undefined') {\n          var index = array1.indexOf(member);\n          if (index !== -1) {\n            array1.splice(index, 1);\n            return false;\n          }\n          return true;\n        }\n      });\n      difference = difference.concat(array1);\n    }\n    else {\n      difference = array2;\n    }\n    \n    return difference;\n  }\n\n  // Takes any number of arrays and returns the union of all sets, i.e. an array with the unique members of each array\n  function union() {\n    var\n      set        = new Set(),\n      arrays     = from(arguments),\n      arrayCount = arrays.length;\n\n    for (var i = 0; i < arrayCount; i++) {\n      var\n        array     = arrays[i],\n        arraySize = array.length;\n      for (var j = 0; j < arraySize; j++) {\n        set.add(array[j]);\n      }\n    }\n\n    return fromSet(set);\n  }\n\n  // Returns an array with elements that are in all of the passed arrays\n  function intersection() {\n    var\n      arrays = arguments,\n      i      = arrays.length;\n    return Array.prototype.filter.call(arrays[0], function (elem) {\n      while (--i) {\n        var arr = arrays[i];\n        if (arr.indexOf(elem) === -1) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n\n  // Only add element if it isn't currently in the array. Return original array\n  function addUnique(arr, element) {\n    if (arr.indexOf(element) === -1) {\n      arr.push(element);\n    }\n    return arr;\n  }\n\n  // Returns a new array with only the unique elements in @arr\n  function unique(original) {\n    var\n      results = [],\n      i       = original.length;\n    while (i--) {\n      if (results.indexOf(original[i]) === -1) {\n        results.unshift(original[i]);\n      }\n    }\n    return results;\n  }\n\n  // Removes all elements matching @element from the @array, returns a new array\n  function remove(array, element) {\n    var index;\n    do {\n      index = array.indexOf(element);\n      if (index !== -1) {\n        array.splice(index, 1);\n      }\n    } while (index !== -1);\n    return array;\n  }\n\n  function fromSet(set) {\n    var arr = [];\n    set.forEach(function (member) {\n      arr.push(member);\n    });\n    return arr;\n  }\n\n  function from(arrayLike) {\n    return Array.prototype.slice.call(arrayLike, 0);\n  }\n\n  function wrap(data) {\n    return Array.isArray(data) ? data : [data];\n  }\n\n  return {\n    remove    : remove,\n    addUnique : addUnique,\n    unique    : unique,\n    symmetricDifference : symmetricDifference,\n    union : union,\n    intersection : intersection,\n    fromSet : fromSet,\n    from    : from,\n    wrap    : wrap\n  };\n});\n","/*\n* Inline-Style\n*\n* This module is responsible for watching inline style mutations of elements modified by Sitecues in order to accurately\n* calculate the `intended style` of an element, i.e. the style an element would have if Sitecues had not manipulated its inline value.\n*\n* This is important for a couple reasons:\n A complete reset of Sitecues should restore all the original styles. The problem with our past solution, caching an element's style value before setting\n our own style, is that it doesn't allow for dynamic re-setting of the style during the lifetime of the document, so we end up overwriting\n the updated style with our cached value.\n\n Even without a complete reset, we frequently want to restore individual elements to their intended state for certain operations.\n For example zoom resets the transform and width of the body element to an empty string when it recomputes the original body dimensions,\n instead of restoring values that were potentially already defined. This makes that process very easy now: inlineStyle.restore(body, ['width', 'transform'])\n\n If instead we actually do want to restore only the prior value of a style, rather than its intended style (for example, if we had set overflow-x on the document element and need to\n override that value briefly), you can do this: inlineStyle.restoreLast(docElem, ['overflow-x'])\n* */\nsitecues.define(\n  'run/inline-style/inline-style',[\n    'mini-core/native-global',\n    'run/util/array-utility',\n    'run/util/object-utility'\n  ],\n  function (\n    nativeGlobal,\n    arrayUtil,\n    objectUtil\n  ) {\n  'use strict';\n\n  var proxyMap,\n      kebabCaseCache,\n      assignmentDictionary,\n      assignmentRecords,\n      lastStyleMap,\n      intendedStyleMap,\n      updateTimer,\n      styleParser,\n      // Arbitrarily long timeout between updating the intended style.\n      // This isn't an especially well tuned number, we just don't need it to update very often\n      UPDATE_TIMEOUT = 300,\n      cssNumbers = {\n        \"animation-iteration-count\" : true,\n        \"column-count\"              : true,\n        \"fill-opacity\"              : true,\n        \"flex-grow\"                 : true,\n        \"flex-shrink\"               : true,\n        \"font-weight\"               : true,\n        \"line-height\"               : true,\n        \"opacity\"                   : true,\n        \"order\"                     : true,\n        \"orphans\"                   : true,\n        \"widows\"                    : true,\n        \"z-index\"                   : true,\n        \"zoom\"                      : true\n      };\n\n\n  // This function replicates jQuery's coercion of numeric style values to unit strings when appropriate\n  function fixUnits(property, value) {\n    return typeof value === 'number' && value !== 0 && !cssNumbers[property] ? value + 'px' : value;\n  }\n\n  function arrayAssignment(element, styleInfo, styleField) {\n    var property = toKebabCase(styleInfo[0]);\n    element[styleField].setProperty(property, fixUnits(property, styleInfo[1]), styleInfo[2] || '');\n  }\n\n  function objectAssignment(element, styleInfo, styleField) {\n    Object.keys(styleInfo).forEach(function (prop) {\n      var property = toKebabCase(prop);\n      element[styleField].setProperty(property, fixUnits(property, styleInfo[prop]));\n    });\n  }\n\n  function stringAssignment(element, styleInfo, styleField) {\n    element[styleField].cssText = styleInfo;\n  }\n\n  // @param elmts     : the elements to apply inline styles to\n  // @param styleInfo : accepts a string, array or object in the following formats:\n    /*\n     * { property : value, ... }\n     * 'property: value; ...'\n     * ['property', 'value', 'importance']\n     * */\n  // @param callback  : if a callback is defined, instead of inserting a style proxy for each element, cache their intended styles, apply our style values,\n  // run the callback function, and then restore the intended styles. By doing this in a synchronous block we can guarantee that no other scripts will have an opportunity\n  // to assign a new value\n  function overrideStyle(elmts, styleInfo) {\n    var assignmentFn  = getAssignmentFunction(styleInfo),\n        elements      = arrayUtil.wrap(elmts);\n\n    elements.forEach(function (element) {\n      var currentStyles = getCurrentStyles(element);\n\n      if (isStyleProxied(element)) {\n        updateLastStyles(element, styleInfo, currentStyles);\n      }\n      else {\n        lastStyleMap.set(element, objectUtil.assign({}, currentStyles));\n        intendedStyleMap.set(element, objectUtil.assign({}, currentStyles));\n        insertStyleProxy(element);\n      }\n\n      assignmentFn(element, styleInfo, '_scStyle');\n    });\n  }\n\n  function toKebabCase(str) {\n    var memoizedValue = kebabCaseCache[str];\n    if (typeof memoizedValue !== 'string') {\n      memoizedValue = kebabCaseCache[str] = str.replace(/([A-Z])/g, function (g) { return '-' + g[0].toLowerCase(); });\n    }\n    return memoizedValue;\n  }\n\n  function getIntendedStyles(element) {\n    updateIntendedStyles();\n    return intendedStyleMap.get(element);\n  }\n\n  function getCurrentStyles(element) {\n    return parseCss(getCssText(element));\n  }\n\n  function getLastStyles(element) {\n    updateIntendedStyles();\n    return lastStyleMap.get(element);\n  }\n\n  function getStyleType(styleInfo) {\n    return Array.isArray(styleInfo) ? 'array' : typeof styleInfo;\n  }\n\n  function getAssignmentFunction(styleInfo) {\n    return assignmentDictionary[getStyleType(styleInfo)];\n  }\n\n  function setStyle(elmts, styleInfo) {\n    var assignmentFn = getAssignmentFunction(styleInfo),\n        elements     = arrayUtil.wrap(elmts);\n\n    elements.forEach(function (element) {\n      assignmentFn(element, styleInfo, 'style');\n    });\n  }\n\n  function removeProperty(element, property) {\n    getStyle(element).removeProperty(toKebabCase(property));\n  }\n\n  function clearStyle(element) {\n    element.removeAttribute('style');\n  }\n\n    // This function exists mainly because we need a linting rule against /.style[^\\w]/ to ensure that other modules do not interact directly\n    // with elements' style object directly.\n   /* NOTE: It is important to use `setStyle` to set style values for `original elements`, defined as elements in the DOM that were not\n    * inserted by Sitecues. Though this method can return the style object of an element for conveniently reading and writing from\n    * Sitecues elements, it must NOT be used to get the style object of original elements for the intention of setting style values */\n  function getStyle(element) {\n    var styleProperty = getDirectStyleProperty(element);\n    return element[styleProperty];\n  }\n\n  function queueAssignmentRecord(element, styleInfo) {\n    assignmentRecords.push({\n      element   : element,\n      styleInfo : styleInfo\n    });\n\n    if (!updateTimer) {\n      updateTimer = nativeGlobal.setTimeout(function () {\n        updateIntendedStyles();\n      }, UPDATE_TIMEOUT);\n    }\n  }\n\n  // when we override a proxied element, we need to update the last style cache\n  // for element, saving the current field values before the overriding values are assigned\n  // Fields that are untouched by this new override retain their existing last value\n  function updateLastStyles(element, styleInfo, currentStyles) {\n    var lastStyles = getLastStyles(element),\n        styleType  = getStyleType(styleInfo),\n        styleObj   = getStyle(element);\n\n    function updateProperty(prop) {\n      var property = toKebabCase(prop);\n      saveStyleValue(styleObj, property, lastStyles);\n    }\n\n    switch (styleType) {\n      case 'array':\n        updateProperty(styleInfo[0]);\n        break;\n\n      case 'object':\n        Object.keys(styleInfo).forEach(updateProperty);\n        break;\n\n      case 'string':\n        lastStyles = currentStyles;\n        break;\n    }\n\n    lastStyleMap.set(element, lastStyles);\n  }\n\n  function updateIntendedStyles() {\n    assignmentRecords.forEach(function (record) {\n      var cssObject,\n        element          = record.element,\n        styleInfo        = record.styleInfo,\n        // cssText was assigned in this case\n        isCssOverwritten = typeof styleInfo === 'string',\n        intendedStyles   = isCssOverwritten ? {} : intendedStyleMap.get(element) || {},\n        lastStyles       = isCssOverwritten ? {} : lastStyleMap.get(element) || {};\n\n      if (isCssOverwritten) {\n        cssObject = parseCss(styleInfo);\n      }\n      else {\n        // This gives us kebab-case property names\n        cssObject = parseCss(stringifyCss(styleInfo));\n      }\n\n      Object.keys(cssObject).forEach(function (property) {\n        var declaration = cssObject[property];\n        intendedStyles[property] = objectUtil.assign({}, declaration);\n        // We don't want a reversion to the `last styles`, the inline values of an element cached before its latest override, to clobber\n        // dynamic updates to its intended styles.\n        lastStyles[property]     = objectUtil.assign({}, declaration);\n      });\n\n      intendedStyleMap.set(element, intendedStyles);\n      lastStyleMap.set(element, lastStyles);\n    });\n\n    assignmentRecords = [];\n    clearTimeout(updateTimer);\n    updateTimer = null;\n  }\n\n  function restoreLast(element, props) {\n    var lastStyles = getLastStyles(element);\n\n    // Styles only need to be restored if we have overridden them.\n    if (!lastStyles) {\n      return;\n    }\n\n    var\n      style      = getStyle(element),\n      properties = arrayUtil.wrap(props).map(toKebabCase);\n\n    properties.forEach(function (property) {\n      restoreStyleValue(style, property, lastStyles);\n    });\n  }\n\n  // @param property must be kebab case in order to look up the cached styles\n  function restoreStyleValue(style, property, cachedStyles) {\n    var value, priority,\n      declaration = cachedStyles[property];\n    if (declaration && declaration.value) {\n      value    = declaration.value;\n      priority = declaration.priority;\n      style.setProperty(property, value, priority);\n    }\n    else {\n      style.removeProperty(property);\n    }\n  }\n\n  // @param property must be kebab case in order to look up the cached styles\n  function saveStyleValue(style, property, cachedStyles) {\n    var value    = style.getPropertyValue(property) || '',\n        priority = style.getPropertyPriority(property) || '';\n    cachedStyles[property] = {\n      value    : value,\n      priority : priority\n    };\n  }\n\n  /*\n  * If this function is called with an undefined `props` parameter, de-proxy the element's style property\n  * */\n  function restore(element, props) {\n    var properties,\n      style          = getStyle(element),\n      intendedStyles = getIntendedStyles(element);\n\n    // Styles only need to be restored if we have overridden them.\n    if (!intendedStyles) {\n      return;\n    }\n\n    if (props) {\n      properties = arrayUtil.wrap(props).map(toKebabCase);\n      properties.forEach(function (property) {\n        restoreStyleValue(style, property, intendedStyles);\n      });\n      // Only restore the specified properties\n      return;\n    }\n\n    var cssText = stringifyCss(intendedStyles);\n\n    if (cssText) {\n      style.cssText = cssText;\n    }\n    else {\n      clearStyle(element);\n    }\n\n    delete element.style;\n    delete element._scStyle;\n    delete element._scStyleProxy;\n  }\n\n  function styleProxyGetter(property) {\n    /*jshint validthis: true */\n    // TODO: We should return a proxied version of setProperty / removeProperty\n    if (typeof this._scStyle[property] === 'function') {\n      return this._scStyle[property].bind(this._scStyle);\n    }\n    return this._scStyle[property];\n    /*jshint validthis: false */\n  }\n\n  function styleProxySetter(property, value) {\n    /*jshint validthis: true */\n    var record = {};\n    record[property] = value;\n    queueAssignmentRecord(this, record);\n    this._scStyle[property] = value;\n    /*jshint validthis: false */\n  }\n\n  // This inserts a proxy to catch intended style changes set by other scripts, allowing those intended\n  // styles to be re-applied after Sitecues styles are removed.\n  function insertStyleProxy(element) {\n    var proxy = proxyMap.get(element);\n\n    if (element.style === proxy) {\n      return;\n    }\n\n    if (!proxy) {\n      proxy = createProxy(element);\n    }\n\n    element._scStyle      = element.style;\n    element._scStyleProxy = proxy;\n\n    Object.defineProperty(element, 'style', {\n      configurable : true,\n      // note : get & set function declarations / expressions de-optimize their containing\n      // function. Don't put more in this function than needs to happen\n      get : function () { return element._scStyleProxy; },\n      // element.style = cssText is equivalent to element.style.cssText = cssText\n      set : function (cssText) {\n        queueAssignmentRecord(element, cssText);\n        element._scStyle.cssText = cssText;\n      }\n    });\n  }\n\n  function createProxy(element) {\n    var styleChain        = element.style,\n        styleProxy        = {},\n        proxiedProperties = {};\n\n    function interceptProperty(property) {\n      if (proxiedProperties[property]) {\n        return;\n      }\n\n      var boundGetter = nativeGlobal.bindFn.call(styleProxyGetter, element, property),\n          boundSetter = nativeGlobal.bindFn.call(styleProxySetter, element, property);\n\n      proxiedProperties[property] = true;\n\n      Object.defineProperty(styleProxy, property, {\n        get : boundGetter,\n        set : boundSetter\n      });\n    }\n\n    while (styleChain) {\n      Object.getOwnPropertyNames(styleChain).forEach(interceptProperty);\n      styleChain = Object.getPrototypeOf(styleChain);\n    }\n\n    proxyMap.set(element, styleProxy);\n    return styleProxy;\n  }\n\n  function isStyleProxied(element) {\n    return element.style === element._scStyleProxy;\n  }\n\n  function getDirectStyleProperty(element) {\n    return isStyleProxied(element) ? '_scStyle' : 'style';\n  }\n\n  function getCssText(element) {\n    return getStyle(element).cssText;\n  }\n\n  function stringifyCss(cssObject) {\n    styleParser.cssText = '';\n\n    Object.keys(cssObject).forEach(function (prop) {\n      var value, priority,\n        //setProperty only takes kebab-case\n        property     = toKebabCase(prop),\n        propertyData = cssObject[prop];\n\n      if (propertyData && typeof propertyData === 'object') {\n        value    = cssObject[prop].value;\n        priority = cssObject[prop].priority;\n      }\n      else {\n        value    = propertyData;\n        priority = '';\n      }\n\n      styleParser.setProperty(property, value, priority);\n    });\n\n    return styleParser.cssText;\n  }\n\n  // Returns an object keyed with style properties to a property data object containing value and priority\n  // @return { property : { value : foo, priority : 'important' } }\n  function parseCss(cssText) {\n    var cssObj = {};\n    styleParser.cssText = cssText;\n\n    for (var i = 0; i < styleParser.length; i++) {\n      var property = styleParser[i];\n      saveStyleValue(styleParser, property, cssObj);\n    }\n\n    return cssObj;\n  }\n\n  function init() {\n    // element -> intended css object\n    intendedStyleMap     = new WeakMap();\n    // element -> last css object\n    lastStyleMap         = new WeakMap();\n    // element -> style proxy object\n    proxyMap             = new WeakMap();\n    assignmentRecords    = [];\n    styleParser          = document.createElement('div').style;\n    assignmentDictionary = {\n      'array'  : arrayAssignment,\n      'object' : objectAssignment,\n      'string' : stringAssignment\n    };\n    kebabCaseCache = {};\n  }\n\n  getStyle.override       = overrideStyle;\n  getStyle.set            = setStyle;\n  getStyle.restore        = restore;\n  getStyle.restoreLast    = restoreLast;\n  getStyle.removeProperty = removeProperty;\n  getStyle.clear          = clearStyle;\n  getStyle.init           = init;\n\n  return getStyle;\n});\n","/**\n * PLACEMENT -- on screen and in DOM\n *\n * --- What? ---\n *\n * Ensure that the BP always has both:\n * - The right parent (this switches depending on BP state)\n * - Correct size and position (must originate from in-page badge)\n *\n * --- When? ---\n *\n * 1. At initialization time (goes inside badge)\n * 2. Before expansion (goes inside html)\n * 3. After shrinking (goes back inside badge)\n *\n * --- Where? ---\n *\n * There are three important elements at work here:\n *\n * 1. Badge element (#sitecues-badge) --\n *    This is a badge that is placed in the page by the site owner.\n *    Element:\n *      - Old way: use an <img> -- still supported for now\n *      - New way: use an empty container that we will fill with the sitecues badge\n *    Position:      whatever site owner chooses\n *    Parent:        whatever site owner chooses\n *    Display type:  whatever site owner chooses\n *    Accessibility: Uses role=\"button\" and placed in the tab order of the page via tabindex=\"0\"\n *\n * 2. BP element (#scp-bp-container)\n *    Container that moves around the page and parents all of the BP content\n *    Element:      <div> inserted by bp.js\n *    Position:     absolute (TODO will be static when it goes inside parent?)\n *    Parent: it switches parents depending on whether it is small or not:\n *    - Parented by the badge when it's small (badge state) -- this allows it to scale and move with the page\n *      Special default badge case: always parented by badge (which is outside of the <body>) and doesn't switch on expansion.\n *      (Note: if the #sitecues-badge is an <img> we make it a previous sibling of that, because <img>s can't parent)\n *      TODO previous sibling is breaking page layout\n *    - Parented by the <html> element when it's not small so that it doesn't change size or position while it's being used.\n *    Display type: block\n *    Accessibility: treated as application dialog; receives focus in keyboard mode\n *\n *  3. SVG Element (#scp-svg)\n *    This is all the BP content. We need this element to change it's width/height as appropriate (TODO when?)\n *    Element: <svg> inserted by bp.js\n *    Position: static\n *    Parent: #scp-bp-container\n *    Accessibility: uses ARIA to describe controls\n */\nsitecues.define(\n  'run/bp/view/badge/placement',[\n    'run/bp/model/state',\n    'run/bp/constants',\n    'run/bp/helper',\n    'run/platform',\n    'run/events',\n    'run/inline-style/inline-style'\n  ],\n  function (\n    state,\n    BP_CONST,\n    helper,\n    platform,\n    events,\n    inlineStyle\n  ) {\n  'use strict';\n\n  var BADGE_PARENT = BP_CONST.BADGE_MODE,\n      HTML_PARENT  = BP_CONST.PANEL_MODE,\n      currentBPParent,\n      badgeElement,\n      badgeRect = {},\n      badgeGeometry,\n      bpElement,\n      svgElement,\n      currentZoom = 1,\n      isInitialized,\n\n      // The width/height of the <SVG>\n      // Note: this currently stays the same in badge vs panel sizes even though the panel stretches,\n      // because of transparent space to the right/bottom of the visible BP\n      svgAspectRatio,\n      documentElement = document.documentElement,\n\n      SHOULD_FIX_USE_ELEMENTS;\n\n  // Allow animations just before panel expands\n  function disableAnimations() {\n    svgElement.removeAttribute('class');\n  }\n\n  // Reparent panel container to badgeElement so that page badge grows and moves\n  // in-place inside the page where it is attached.\n  // Also, position and size the bpContainer and set height and width of the SVG\n  function switchToBadgeParent() {\n    var styles = {\n      tranform: ''\n    };\n    // Remove transform/translate so that badge is fully returned to origin state\n    inlineStyle.set(bpElement, styles);\n\n    badgeElement.appendChild(bpElement);\n\n    currentBPParent = BADGE_PARENT;\n\n    repositionBPOverBadge();\n    fitSVGtoBadgeRect();\n  }\n\n  // Reparent panel container to <html> so that panel stays constant size and position during zooming/panning\n  function switchToHtmlParent() {\n\n    if (bpElement.parentElement === documentElement) {\n      return;\n    }\n\n    // HTML_PARENT\n    // Case 3. Insert outside body (as a child of <html>)\n    documentElement.insertBefore(bpElement, documentElement.childNodes[0]);\n\n    currentBPParent = HTML_PARENT;\n\n    // The BP must be positioned over the #sitecues-badge\n    repositionBPOverBadge();\n    fitSVGtoBadgeRect();\n  }\n\n  // Edge and IE11 on Windows 10 fix\n  // Once the BP is moved, these browsers are not re-recognizing the @xlink:href on <use> elements\n  // if they are moved. However, toggling a space in front of the attribute value fixes the issue.\n  function fixUseElementsInIE() {\n\n    if (SHOULD_FIX_USE_ELEMENTS) {\n\n      var useElements = svgElement.getElementsByTagName('use'),\n        numUseElements = useElements.length,\n        useIndex = 0,\n        useElement;\n      for (; useIndex < numUseElements; useIndex++) {\n        useElement = useElements[useIndex];\n        // Toggle space in front of href attribute to get\n        // IE to 'wake up' and understand it again\n        var href = useElement.getAttribute('xlink:href'),\n          newHref = href.charAt(0) === ' ' ? href.substr(1) : ' ' + href;\n        useElement.setAttribute('xlink:href', newHref);\n      }\n    }\n  }\n\n  // Move the BP object so that the top, left sits exactly over the badge rectangle top, left\n  // This is only called when the BP is small (about to expand or finished collapsing)\n  function repositionBPOverBadge() {\n\n    // Current badge rectangle in screen coordinates\n    var newBadgeRect   = helper.getRect(badgeElement),\n\n        // Get the amount of zoom being applied to the badge\n        appliedZoom = getAppliedBPZoom(),\n\n        badgeComputedStyle = window.getComputedStyle(badgeElement),\n\n        // Adjust for padding\n        paddingLeft = getPadding('Left'),\n        paddingTop  = getPadding('Top'),\n\n        isToolbarBadge = state.get('isToolbarBadge');\n\n    function getPadding(property) {\n      return parseFloat(badgeComputedStyle['padding' + property]) * appliedZoom;\n    }\n\n    // Used for setting the bpContainer left, top, width, and height\n    function setBPProperty(prop) {\n      var styles = {};\n      styles[prop] = (badgeRect[prop] / appliedZoom) + 'px';\n      inlineStyle.set(bpElement, styles);\n    }\n\n    // If the badge is currently dimensionless, use the cached badge dimensions\n    if (rectHasNoArea(newBadgeRect)) {\n      // We saved the badge rect when it was a child of the documentElement, so we multiply by the current zoom\n      newBadgeRect.height = badgeGeometry.cachedRect.height * appliedZoom;\n      newBadgeRect.width  = badgeGeometry.cachedRect.width  * appliedZoom;\n    }\n\n    if (currentBPParent === BADGE_PARENT) {\n\n      // Not a toolbar badge and in body (inside of #sitecues-badge)\n      // It's already inside of the #sitecues-badge, which is in the right place on the page,\n      // and we only need transform translate to move it from there for padding and vertical offset.\n      // By being a child of #sitecues-badge, it will automatically be positioned within that.\n      newBadgeRect.left = 0;\n      newBadgeRect.top  = 0;\n\n    }\n\n    // Adjust for top whitespace in SVG badge (it's there because it turns into an outline on expansion)\n    if (!isToolbarBadge) {\n      newBadgeRect.top -= BP_CONST.BADGE_VERTICAL_OFFSET;\n    }\n\n    badgeRect.left   = newBadgeRect.left + paddingLeft;\n    badgeRect.top    = newBadgeRect.top  + paddingTop;\n\n    // A toolbar badge's size remains the same for the lifetime of the page, so we use the cached version of size in that case\n    if (!badgeRect.width || !isToolbarBadge) {\n      badgeRect.width  = newBadgeRect.width  - paddingLeft - getPadding('Right');\n      badgeRect.height = newBadgeRect.height - paddingTop  - getPadding('Bottom');\n    }\n\n    // Set left and top for positioning.\n    setBPProperty('width');\n    setBPProperty('height');\n    var styles = {\n      top  : 0,\n      left : 0,\n      transform: 'translate(' + badgeRect.left / appliedZoom + 'px,' + badgeRect.top / appliedZoom + 'px)'\n    };\n    inlineStyle.set(bpElement, styles);\n  }\n\n  // This makes the collapsed svg large enough so that even with\n  // all the whitespace it stretches to cover the badge\n  // So it should be the actual svg width / badge width\n  function fitSVGtoBadgeRect() {\n\n    var svgWidth  = badgeRect.width * getRatioOfSVGToVisibleBadgeSize(badgeRect) / getAppliedBPZoom(),\n        svgHeight = svgWidth / svgAspectRatio;\n\n    inlineStyle.set(svgElement, {\n      width  : svgWidth + 'px',\n      height : svgHeight + 'px'\n    });\n\n    // Do not animate the adjustment of the SVG to fit the size of the badge\n    // We only animate large-scale size changes (badge->panel or panel->badge)\n    disableAnimations();\n\n    // Oh, IE (Edge, we know you're still really IE).\n    fixUseElementsInIE();\n  }\n\n  function getWaveHeight() {\n    return helper.getRectById(BP_CONST.WAVE_3_ID).height;\n  }\n\n  function getRatioOfSVGToVisibleBadgeSize(badgeRect) {\n    // This is the ratio of the height allotted by the badge to the visible height.\n    // It is what we need to multiply the SVG height by to get the final desired height.\n    var ratioOfSVGToVisibleBadgeSize = state.get('ratioOfSVGToVisibleBadgeSize');\n\n    if (ratioOfSVGToVisibleBadgeSize) {\n      return ratioOfSVGToVisibleBadgeSize;\n    }\n\n    // First get the height for the third wave in the speech button, useful for measurements\n    // It is the tallest and rightmost element\n    var badgeRectWidth   = badgeRect.width,\n        waveHeight;\n\n    // Set default height and width, because this normalizes cross browser inconsistencies\n    // for SVG sizing.  Basically, if no height or width are set explicitly, then the viewBox\n    // attribute effects the values of the boundingClient height and width of the SVG in Chrome,\n    // but not IE.  Therefore, setting these values allows getRatioOfSVGToVisibleBadgeSize() to return the proper\n    // values no matter the browser.\n    inlineStyle.set(svgElement, {\n      width  : badgeRectWidth + 'px',\n      height : badgeRectWidth / svgAspectRatio + 'px'\n    });\n    waveHeight = getWaveHeight() || badgeGeometry.waveHeight;\n\n    ratioOfSVGToVisibleBadgeSize = badgeRect.height / waveHeight;\n\n    state.set('ratioOfSVGToVisibleBadgeSize', ratioOfSVGToVisibleBadgeSize);\n\n    return ratioOfSVGToVisibleBadgeSize;\n  }\n\n  function addClipRectStyleFix () {\n    var badgeRect    = helper.getRect(badgeElement),\n\n        // A magic number to fix SC-2759.  Underlying issue is probably\n        // rectangle calculations are a bit off...\n        // TODO: Figure out why we are using magic numbers\n        EXTRA_PIXELS_HEIGHT = 5,\n        EXTRA_PIXELS_WIDTH  = 10;\n\n    if (rectHasNoArea(badgeRect)) {\n      badgeRect = badgeGeometry.cachedRect;\n    }\n    inlineStyle(bpElement).clip = 'rect(0,' + (badgeRect.width  + EXTRA_PIXELS_WIDTH) + 'px,' + (badgeRect.height + EXTRA_PIXELS_HEIGHT) + 'px,0)';\n  }\n\n  function onZoomChange(zoomLevel) {\n    currentZoom = zoomLevel;\n  }\n\n  function getAppliedBPZoom() {\n    var isBPInBody  = state.get('isPageBadge') && currentBPParent === BADGE_PARENT;\n    return isBPInBody ? currentZoom : 1;\n  }\n\n  function executeWhileElementIsRendered(element, fn) {\n    var isReparented,\n        inlineTransform = inlineStyle(element).transform,\n        nextSibling     = element.nextSibling,\n        parent          = element.parentElement,\n        rect            = helper.getRect(element);\n\n    // If the element isn't displayed, translate it out of the viewport and attach it to the document element.\n    // This way we can be confident that an ancestor of the element isn't hiding it\n    // This doesn't guarantee that a stylesheet isn't hiding the element, but it is sufficient for our current purposes\n    if (rectHasNoArea(rect)) {\n      inlineStyle(element).transform = 'translate(-99999px,-99999px)';\n      documentElement.appendChild(element);\n      isReparented = true;\n    }\n\n    fn();\n\n    if (isReparented) {\n      inlineStyle(element).transform = inlineTransform;\n      if (nextSibling) {\n        parent.insertBefore(element, nextSibling);\n      }\n      else {\n        parent.appendChild(element);\n      }\n    }\n  }\n\n  // This method caches the dimensions of the badge, and if it is not currently visible\n  // temporarily appends the badge directly to the document element to prevent its ancestors from hiding it.\n  // This ensures that we have a fallback size reference when we need to reposition the bp SVG.\n  // Otherwise, if we collapse the panel when the badge element has no area\n  // the panel will disappear entirely!\n  function initBadgeGeometry() {\n    badgeElement.appendChild(bpElement);\n\n    events.emit('bp/did-insert-bp-element');\n\n    executeWhileElementIsRendered(badgeElement, function () {\n      var cachedRect = helper.getRect(badgeElement),\n          contentBox = Object.create(cachedRect),\n          computedStyle = getComputedStyle(badgeElement),\n          paddingTop    = parseFloat(computedStyle.paddingTop),\n          paddingBottom = parseFloat(computedStyle.paddingBottom),\n          paddingRight  = parseFloat(computedStyle.paddingRight),\n          paddingLeft   = parseFloat(computedStyle.paddingLeft);\n\n      contentBox.width  -= paddingLeft + paddingRight;\n      contentBox.height -= paddingTop  + paddingBottom;\n\n      inlineStyle.set(bpElement, {\n        width  : contentBox.width,\n        height : contentBox.height\n      });\n\n      inlineStyle.set(svgElement, {\n        width  : contentBox.width + 'px',\n        height : (contentBox.width / svgAspectRatio) + 'px'\n      });\n\n      badgeGeometry = {\n        cachedRect : cachedRect,\n        waveHeight : getWaveHeight()\n      };\n    });\n\n  }\n\n  function rectHasNoArea(rect) {\n    return !rect.width || !rect.height;\n  }\n\n  /**\n   * [init initializes the placement of the bpElement, svgElement, and badgeElement]\n   * @param  {[DOM element]} badge       [Either placeholder or badge we create with ID 'sitecues-badge']\n   * @param  {[DOM element]} bpContainer [SVG container <div> with ID 'scp-bp-container']\n   * @param  {[DOM element]} svg         [SVG with ID 'scp-svg']\n   */\n  function init(badge, bpContainer, svg) {\n\n    if (isInitialized) {\n      return;\n    }\n\n    isInitialized = true;\n\n    SHOULD_FIX_USE_ELEMENTS = platform.browser.isMS && platform.os.majorVersion >= 10;\n\n    // Compute the aspect ratio (the width:height ratio required for the <svg>)\n    var viewBoxRect = svg.viewBox.baseVal;\n\n    // Set module scoped variables.\n    badgeElement = badge;\n    bpElement    = bpContainer;\n    svgElement   = svg;\n\n    svgAspectRatio = viewBoxRect.width / viewBoxRect.height;\n\n    //Store initial badge dimensions and SVG scale while we know they're available\n    initBadgeGeometry();\n\n    // Initially, BP must always be contained by #sitecues-badge\n    switchToBadgeParent();\n\n    // For some reason, without this fix elements around the badge\n    // do not get mouse events because the sizing of something is off.\n    // See SC-2759.\n    addClipRectStyleFix();\n\n    // Listen for change events for page badges\n    if (state.get('isPageBadge')) {\n\n      // Page badges must switch back and forth dynamically\n      events.on('bp/will-expand', switchToHtmlParent);\n      events.on('bp/did-shrink', switchToBadgeParent);\n      events.on('zoom', onZoomChange);\n    }\n    else {\n      window.addEventListener('resize', repositionBPOverBadge);\n    }\n  }\n\n  return {\n    init: init\n  };\n});\n\n","/**\n * Expand or contract the BP\n */\nsitecues.define(\n  'run/bp/view/size-animation',[\n    'run/bp/model/state',\n    'run/bp/constants',\n    'run/bp/helper',\n    'run/platform',\n    'run/events',\n    'mini-core/native-global',\n    'run/inline-style/inline-style'\n  ],\n  function (\n    state,\n    BP_CONST,\n    helper,\n    platform,\n    events,\n    nativeGlobal,\n    inlineStyle\n  ) {\n  'use strict';\n\n  var requestFrameFn = window.requestAnimationFrame,\n      cancelFrameFn  = window.cancelAnimationFrame,\n      expandEasingFn   = function (t) { return (--t)*t*t+1;}, // https://gist.github.com/gre/1650294\n      collapseEasingFn = function (t) { return t; },          // Linear looks better for collapse animation\n      animationStartTime,\n      animationId,\n      MINIMUM_DISTANCE_FROM_EDGE  = 20,\n      MINIMUM_DISTANCE_FROM_EDGE_TOP = 2, // More forgiving on top side because of toolbar\n      ZOOM_MIN = 1,\n      ZOOM_RANGE = 2,\n\n      // What we're transitioning from and to\n      // Note that if you exit/enter the panel in the middle of animation you can\n      // end up transitioning as badge -> badge, or panel -> panel\n      currentlyTransitioningFrom          = BP_CONST.BADGE_MODE,\n      currentlyTransitioningTo            = null,  // Not currently transitioning to anything\n\n\n      // The minimum amount we want to increase the badge size\n      // when transitioning to the panel.  Basically, the panel\n      // should be BP_CONST.IDEAL_PANEL_WIDTH by BP_CONST.IDEAL_PANEL_HEIGHT\n      // or 1.2x the size of the badge.\n      MINIMUM_PANEL_SIZE_INCREASE = 1.2,\n      panelScaleFromBadge,\n      badgeScaleFromPanel,\n      transformElementId          = BP_CONST.BP_CONTAINER_ID,\n\n      // The stable target badge width\n      targetBadgeWidth,\n\n      // Amount of zoom currently applied to the badge\n      currentZoom = 1,\n\n      // Convenience methods\n      byId = helper.byId,\n      getRect = helper.getRect;\n\n  function isToolbarBadge() {\n    return state.get('isToolbarBadge');\n  }\n\n  function getSvgElement() {\n    return byId(BP_CONST.SVG_ID);\n  }\n\n  function getBadgeElement() {\n    return byId(BP_CONST.BADGE_ID);\n  }\n\n  /**\n   * getDifferenceObject builds and returns an object that represents the differences\n   * between two objects.  The two objects must contain only numbers or objects as values\n   * for properties.\n   *\n   * @example\n   *\n   *      PARAM 1               PARAM 2                 OUTPUT\n   *\n   *    {                     {                      {\n   *      'a': 4,              'a': 10,                'a': 6,\n   *      'b': {       =>       'b': {          =      'b': {\n   *        'c': 1                'c': 5                 'c': 4\n   *      }                     }                      }\n   *    }                     }                      }\n   *\n   * @param  {Object} obj1 [Object whose values are numbers or objects]\n   * @param  {Object} obj2 [Object whose values are numbers or objects]\n   * @return {Object}      [Object whose values are numbers or objects]\n   */\n  function getDifferenceObject (obj1, obj2) {\n\n    var result = {},\n        obj1Prop,\n        obj2Prop;\n\n    for (var prop in obj1) {\n\n      if (obj1.hasOwnProperty(prop)) {\n\n        obj1Prop = obj1[prop];\n        obj2Prop = obj2[prop];\n\n        if (typeof obj1Prop === 'number') {\n\n          result[prop] = obj2Prop - obj1Prop;\n\n        } else {\n\n          result[prop] = getDifferenceObject(obj1Prop, obj2Prop);\n\n        }\n\n      }\n    }\n\n    return result;\n\n  }\n\n  /**\n   * getPossibleOutlineRects returns the visible panel rectangle to be.  This is useful in our\n   * calculation for determining where the panel should be animated to when expanding.\n   * The actual containers of the UI (and even the UI to some degree) are much larger\n   * than what the appearance suggests.\n   * @param  {number} targetDimensions The target width and height for the SVG_ID element.\n   * @return {Object}           The bounding client rect of the MAIN_OUTLINE_ID element after\n   *                            panel expansion.\n   */\n  function getPossibleOutlineRects (targetDimensions) {\n\n    var currentSVGWidth       = helper.getRectById(BP_CONST.SVG_ID).width,\n        targetSVGWidth        = targetDimensions.width,\n        increaseFactor        = targetSVGWidth / currentSVGWidth,\n        currentOutlineRect    = helper.getRectById(BP_CONST.MAIN_OUTLINE_ID),\n        remainingTime         = 1 - state.get('currentMode'),\n        possibleOutlineRects;\n\n    if (isToolbarBadge()) {\n      // Centered toolbar gets centered expansion treatment\n      possibleOutlineRects = {\n        'center'  : getScaledRect(currentOutlineRect, 0.68 * remainingTime, 0, increaseFactor)\n      };\n    }\n    else {\n      possibleOutlineRects = {\n        '25%0%'   : getScaledRect(currentOutlineRect, 0.25 * remainingTime, 0, increaseFactor),\n        'topLeft' : getScaledRect(currentOutlineRect, 0, 0, increaseFactor),\n        '75%0%'   : getScaledRect(currentOutlineRect, 0.75 * remainingTime, 0, increaseFactor),\n        'topRight': getScaledRect(currentOutlineRect, 1, 0, increaseFactor),\n        'botRight': getScaledRect(currentOutlineRect, 0, 1, increaseFactor),\n        'botLeft' : getScaledRect(currentOutlineRect, 1, 1, increaseFactor)\n      };\n    }\n\n    return possibleOutlineRects;\n  }\n\n  /**\n   * getScaledRect scales a rectangle from an origin\n   * @param  {Object} rect    Rectangle\n   * @param  {number} originX  0 - 1\n   * @param  {number} originY  0 - 1\n   * @param  {number} scale    How much we scale the rectangle\n   * @return {Object}         Rectangle\n   */\n  function getScaledRect (rect, originX, originY, scale) {\n\n    var scaledWidth  = rect.width  * scale,\n        scaledHeight = rect.height * scale,\n        resultRect   = {};\n\n    resultRect.left   = rect.left - (scaledWidth  * originX) / 2;\n    resultRect.top    = rect.top  - (scaledHeight * originY) / 2;\n    resultRect.width  = scaledWidth;\n    resultRect.height = scaledHeight;\n    resultRect.right  = resultRect.left + scaledWidth;\n    resultRect.bottom = resultRect.top  + scaledHeight;\n\n    return resultRect;\n\n  }\n\n  function isRectLeftOfViewport (rect) {\n    return rect.left < MINIMUM_DISTANCE_FROM_EDGE;\n  }\n\n  function isRectRightOfViewport (rect) {\n    return rect.right > window.innerWidth - MINIMUM_DISTANCE_FROM_EDGE;\n  }\n\n  function isRectAboveViewport (rect) {\n    return rect.top < MINIMUM_DISTANCE_FROM_EDGE_TOP;\n  }\n\n  function isRectBelowViewport (rect) {\n    return rect.bottom > window.innerHeight - MINIMUM_DISTANCE_FROM_EDGE;\n  }\n\n  /**\n   * [isRectOutsideViewport determines if the provided rectangle will be outside the viewport]\n   * @param  {[Object]} rect [Bounding Client Rectangle]\n   * @return {[Boolean]}     [True if rect is outside viewport]\n   */\n  function isRectOutsideViewport (rect) {\n    return isRectLeftOfViewport(rect)  ||\n           isRectRightOfViewport(rect) ||\n           isRectAboveViewport(rect)   ||\n           isRectBelowViewport(rect);\n  }\n\n  /**\n   * [moveRectIntoViewport returns a rectangle that is guarenteed to be within the viewport]\n   * @param  {Object} rect [Rectangle]\n   * @return {Object}      [Rectangle]\n   */\n  function moveRectIntoViewport (rect) {\n\n    if (isRectLeftOfViewport(rect)) {\n      rect.left = MINIMUM_DISTANCE_FROM_EDGE;\n    }\n\n    if (isRectAboveViewport(rect)) {\n      rect.top = MINIMUM_DISTANCE_FROM_EDGE;\n    }\n\n    if (isRectRightOfViewport(rect)) {\n      rect.left = window.innerWidth - rect.width - MINIMUM_DISTANCE_FROM_EDGE * 2;\n    }\n\n    if (isRectBelowViewport(rect)) {\n      rect.top = window.innerHeight - rect.height - MINIMUM_DISTANCE_FROM_EDGE * 2;\n    }\n\n    return rect;\n  }\n\n  /**\n   * [getTargetSize computes and returns the size of whatever we are animating to]\n   * @return {Object} [width and height]\n   */\n  function getTargetSize () {\n    return state.isPanelRequested() ? getTargetPanelSize() : getTargetBadgeSize();\n  }\n\n  function getTargetPanelSize() {\n\n    var svgRect             = getRect(getSvgElement()),\n        portionRemaining    = 1 - state.get('currentMode'),\n        newPanelWidth       = Math.max(BP_CONST.IDEAL_PANEL_WIDTH, svgRect.width * MINIMUM_PANEL_SIZE_INCREASE * portionRemaining),\n        newPanelHeight      = newPanelWidth * BP_CONST.IDEAL_PANEL_HEIGHT / BP_CONST.IDEAL_PANEL_WIDTH;\n\n    return {\n      width : newPanelWidth,\n      height: newPanelHeight\n    };\n  }\n\n  function getAspectRatio() {\n    var viewBoxRect = getSvgElement().viewBox.baseVal;\n    return viewBoxRect.width / viewBoxRect.height;\n  }\n\n  function getAppliedBadgeZoom() {\n    return state.get('isPageBadge') ? currentZoom : 1;\n  }\n\n  function getTargetBadgeSize() {\n    if (!targetBadgeWidth || !state.get('isToolbarBadge')) {\n      targetBadgeWidth = getTargetBadgeWidth(getAppliedBadgeZoom());\n    }\n    return {\n      width: targetBadgeWidth,\n      height: targetBadgeWidth / getAspectRatio()\n    };\n  }\n\n  function getTargetBadgeWidth(zoomMult) {\n    var badgeElement = getBadgeElement(),\n      badgeRect = getRect(badgeElement),\n      badgeComputedStyles = window.getComputedStyle(badgeElement),\n      extraWidth = (parseFloat(badgeComputedStyles.paddingLeft) + parseFloat(badgeComputedStyles.paddingRight)) * zoomMult,\n      badgeRectWidth = badgeRect.width - extraWidth;\n    return badgeRectWidth * state.get('ratioOfSVGToVisibleBadgeSize');\n  }\n\n  /**\n   * [getTargetBadgePosition computes and returns the desired badge position]\n   * @return {Object} [top and left]\n   */\n  function getTargetBadgePosition () {\n\n    var FUDGE_FACTOR        = -0.5, // This makes it  not jerk to a new spot, not sure why\n        isPageBadge         = state.get('isPageBadge'),\n        badgeElement        = getBadgeElement(),\n        badgeComputedStyles = window.getComputedStyle(badgeElement),\n        badgeRect           = getRect(badgeElement),\n        completedZoom       = currentZoom,\n        paddingTop          = parseFloat(badgeComputedStyles.paddingTop),\n        paddingLeft         = parseFloat(badgeComputedStyles.paddingLeft),\n        top,\n        left;\n\n    // Badge implemented by customer\n    if (isPageBadge) {\n\n      top  = badgeRect.top  + (paddingTop  * completedZoom) - BP_CONST.BADGE_VERTICAL_OFFSET + FUDGE_FACTOR;\n      left = badgeRect.left + (paddingLeft * completedZoom) + FUDGE_FACTOR;\n\n    // Floating badge\n    } else {\n      top  = paddingTop;\n      left = paddingLeft;\n    }\n\n    return {\n      'top' : Math.ceil(top),\n      'left': Math.ceil(left)\n    };\n  }\n\n  /**\n   * [getTargetPosition gets all desired outline boundlingClientRects based on the\n   * current SVG_ID height and width.  It checks if any of them would be inside the\n   * viewport.  The first that does is the boundingClientRect of the outlineRect.]\n   * @param  {Object} targetDimensions [Height and width of the SVG_ID]\n   * @return {Object}                  [top and left]\n   */\n  function getTargetPanelPosition () {\n\n    var targetSize   = getTargetSize(),\n        outlineRects = getPossibleOutlineRects(targetSize),\n        rect,\n        currentRect,\n        resultRect;\n\n    if (isToolbarBadge()) {\n      return outlineRects.center;\n    }\n\n    for (rect in outlineRects) {\n      if (outlineRects.hasOwnProperty(rect)) {\n        currentRect = outlineRects[rect];\n        if (!isRectOutsideViewport(currentRect)) {\n          resultRect = currentRect;\n          if (SC_DEV) { console.log('Panel position using origin: ' + rect); }\n          break;\n        }\n      }\n    }\n\n    // Must animate into the viewport.\n    if (!resultRect) {\n      if (SC_DEV) { console.log('Panel position forced into viewport.'); }\n      resultRect = moveRectIntoViewport(outlineRects.topLeft);\n    }\n\n    return resultRect;\n\n  }\n\n  function getTargetTransformPosition () {\n\n    if (state.isPanelRequested()) {\n      return getTargetPanelPosition();\n    }\n\n    return getTargetBadgePosition();\n\n  }\n\n  /**\n   * [getTargetSVGElementTransforms returns the transforms for multiple SVG elements]\n   * @return {Object} [Keys are the IDs for SVG elements, Values are their transforms]\n   */\n  function getTargetSVGElementTransforms () {\n\n    function copyObj (obj) {\n      return nativeGlobal.JSON.parse(nativeGlobal.JSON.stringify(obj));\n    }\n\n    var isPanelRequested = state.isPanelRequested(),\n        transforms       = isPanelRequested ? BP_CONST.TRANSFORMS.PANEL   : BP_CONST.TRANSFORMS.BADGE,\n        sliderWidth      = isPanelRequested ? BP_CONST.LARGE_SLIDER_WIDTH : BP_CONST.SMALL_SLIDER_WIDTH,\n        percentage       = (currentZoom - ZOOM_MIN) / ZOOM_RANGE,\n        result           = copyObj(transforms);\n\n    result[BP_CONST.ZOOM_SLIDER_THUMB_ID].translateX += percentage * sliderWidth;\n\n    return result;\n\n  }\n\n  // TODO just move this right into the SVG? Why not just have it in the markup\n  function firstTimeRender() {\n\n    var SLIDER_BAR_ID       = BP_CONST.ZOOM_SLIDER_BAR_ID,\n        SLIDER_THUMB_ID     = BP_CONST.ZOOM_SLIDER_THUMB_ID,\n        badgeTransforms     = BP_CONST.TRANSFORMS.BADGE,\n        TRANSFORM_STRING    = 'transform',\n        TRANSLATE_STRING    = 'translate(',\n        SCALE_STRING        = 'scale(',\n        CLOSING_PAREN       = ') ',\n        sliderBarTransforms = badgeTransforms[SLIDER_BAR_ID],\n        sliderBarTransform  = sliderBarTransforms.translateX + CLOSING_PAREN +\n                              SCALE_STRING     + sliderBarTransforms.scaleX + ',' + sliderBarTransforms.scaleY,\n        isRealSettings      = state.get('isRealSettings'),\n        sliderThumbTranslateX = isRealSettings ? badgeTransforms[SLIDER_THUMB_ID].translateX : BP_CONST.TRANSFORMS.FAKE_BADGE_TRANSLATEX;\n\n    function getTranslateX(id) {\n      return badgeTransforms[id].translateX;\n    }\n\n    function setTransform (id, value) {\n      byId(id).setAttribute(TRANSFORM_STRING, TRANSLATE_STRING + (value || getTranslateX(id)) + CLOSING_PAREN);\n    }\n\n    setTransform(BP_CONST.SMALL_A_ID);\n    setTransform(BP_CONST.LARGE_A_ID);\n    setTransform(BP_CONST.SPEECH_ID);\n    setTransform(BP_CONST.VERT_DIVIDER_ID);\n\n    setTransform(SLIDER_BAR_ID, sliderBarTransform);\n    setTransform(SLIDER_THUMB_ID, sliderThumbTranslateX);\n  }\n\n  function getCurrentTransformPosition () {\n\n    var transform = inlineStyle(byId(transformElementId)).transform,\n        position  = {},\n        transformValues,\n        translateLeft,\n        translateTop;\n\n    if (transform === 'none' || transform === '') {\n\n      position.left = 0;\n      position.top  = 0;\n\n    } else {\n\n      transformValues = transform.split(',');\n      translateLeft   = transformValues[0];\n      translateTop    = transformValues[1].split('scale')[0];\n\n      position.left   = helper.getNumberFromString(translateLeft);\n      position.top    = helper.getNumberFromString(translateTop);\n\n    }\n\n    return position;\n\n  }\n\n  function getCurrentSize () {\n\n    var svgRect = getRect(getSvgElement());\n\n    return {\n      'width' : svgRect.width,\n      'height': svgRect.height\n    };\n\n  }\n\n  function getCurrentScale () {\n\n    var transformStyle = inlineStyle(byId(transformElementId)).transform,\n        transformValues;\n\n    if (transformStyle.indexOf('scale') !== -1) {\n\n      transformValues = transformStyle.split('scale');\n\n      return helper.getNumberFromString(transformValues[1]);\n\n    }\n\n    return 1;\n  }\n\n  function setSize (size, crispFactor) {\n    inlineStyle.set(getSvgElement(), {\n    // Height and Width\n      width  : (size.width * crispFactor) + 'px',\n      height : (size.height * crispFactor) + 'px'\n    });\n  }\n\n  function setTransform (left, top, transformScale) {\n    inlineStyle(byId(transformElementId)).transform = 'translate(' + left + 'px' + ' , ' + top + 'px' + ') ' + 'scale(' + transformScale + ')';\n  }\n\n  /**\n   * [setSVGElementTransforms sets the transform attribute of all SVG elements that need to\n   * be translated and scaled]\n   * @param {Object} startingSVGElementTransforms  [Object representing the translation and\n   *                                                  scale of the SVG elements before any animation]\n   * @param {Object} svgElementTransformDifference [Object representing the difference elements\n   *                                                  must translate and scale]\n   * @param {Float}  animationTime                 [0 - 1, the fraction the animation is at]\n   */\n  function setSVGElementTransforms (startingSVGElementTransforms, svgElementTransformDifference, animationTime) {\n    var translateX,\n      transformStr,\n        scaleX,\n        scaleY,\n        currentStartingValue,\n        currentDifferenceValue,\n        id;\n\n    for (id in startingSVGElementTransforms) {\n\n      if (startingSVGElementTransforms.hasOwnProperty(id)) {\n\n        currentStartingValue   = startingSVGElementTransforms[id];\n        currentDifferenceValue = svgElementTransformDifference[id];\n\n        translateX = currentStartingValue.translateX + currentDifferenceValue.translateX * animationTime;\n        transformStr = 'translate(' + translateX + ')';\n\n        if (currentStartingValue.scaleX) {\n\n          scaleX = currentStartingValue.scaleX + currentDifferenceValue.scaleX * animationTime;\n          scaleY = currentStartingValue.scaleY + currentDifferenceValue.scaleY * animationTime;\n\n          transformStr += ' scale(' + scaleX + ',' + scaleY + ')';\n\n        }\n\n        byId(id).setAttribute('transform', transformStr);\n      }\n    }\n\n  }\n\n  //  https://equinox.atlassian.net/wiki/display/EN/BP2%3A+Implementation+Details\n  function getTargetScale (endingSizeToStartingSizeRatio, crispFactor) {\n\n    var isPanelRequested = state.isPanelRequested(),\n\n        BADGE_TO_PANEL           = 0,\n        TWEEN_TO_PANEL_CRISPED   = 1,\n        TWEEN_TO_PANEL_UNCRISPED = 2,\n\n        PANEL_TO_BADGE           = 3,\n        TWEEN_TO_BADGE_CRISPED   = 4,\n        TWEEN_TO_BADGE_UNCRISPED = 5,\n\n        scalingFunction;\n\n    if (isPanelRequested) {\n\n      if (state.isBadge()) {\n\n        scalingFunction = BADGE_TO_PANEL;\n\n      } else {\n\n        if (currentlyTransitioningFrom === BP_CONST.PANEL_MODE) {\n          scalingFunction = TWEEN_TO_PANEL_UNCRISPED;\n        }\n\n        if (currentlyTransitioningFrom === BP_CONST.BADGE_MODE) {\n          scalingFunction = TWEEN_TO_PANEL_CRISPED;\n        }\n\n      }\n\n    } else {\n\n      if (state.isPanel()) {\n\n        scalingFunction = PANEL_TO_BADGE;\n\n      } else {\n\n        if (currentlyTransitioningFrom === BP_CONST.PANEL_MODE) {\n          scalingFunction = TWEEN_TO_BADGE_UNCRISPED;\n        }\n\n        if (currentlyTransitioningFrom === BP_CONST.BADGE_MODE) {\n          scalingFunction = TWEEN_TO_BADGE_CRISPED;\n        }\n\n      }\n\n\n    }\n\n    switch (scalingFunction) {\n\n      case BADGE_TO_PANEL:\n\n        panelScaleFromBadge = endingSizeToStartingSizeRatio / crispFactor;\n\n        return panelScaleFromBadge;\n\n      case TWEEN_TO_PANEL_CRISPED:\n\n        return panelScaleFromBadge;\n\n      case TWEEN_TO_PANEL_UNCRISPED:\n\n        return 1;\n\n      case PANEL_TO_BADGE:\n\n        badgeScaleFromPanel = endingSizeToStartingSizeRatio;\n\n        return  badgeScaleFromPanel;\n\n      case TWEEN_TO_BADGE_CRISPED:\n\n        return getCurrentScale() * endingSizeToStartingSizeRatio;\n\n      case TWEEN_TO_BADGE_UNCRISPED:\n\n        return badgeScaleFromPanel;\n\n    }\n\n  }\n\n  /**\n   * performAnimation begins the animation. We must animate the following:\n   *   - position\n   *   - size\n   *   - transforms (translateX and scale)\n   */\n  function performAnimation() {\n\n    var isPanelRequested              = state.isPanelRequested(),\n\n      startingPosition              = getCurrentTransformPosition(),\n      startingSize                  = getCurrentSize(),\n      startingSVGElementTransforms  = helper.getCurrentSVGElementTransforms(),\n      startingScale,\n\n      endingPosition                = getTargetTransformPosition(),\n      endingSize                    = getTargetSize(),\n      endingSVGElementTransforms    = getTargetSVGElementTransforms(),\n      endingScale,\n\n      positionDifference            = getDifferenceObject(startingPosition, endingPosition),\n      svgElementTransformDifference = getDifferenceObject(startingSVGElementTransforms, endingSVGElementTransforms),\n      scaleDifference,\n\n      fullAnimationDuration         = isPanelRequested ? BP_CONST.EXPAND_ANIMATION_DURATION_MS : BP_CONST.SHRINK_ANIMATION_DURATION_MS,\n\n      startCrispFactor,\n\n      percentEnlarged               = state.get('currentMode'),\n      percentAnimationComplete      = isPanelRequested ? percentEnlarged : 1 - percentEnlarged;\n\n    function animationTick () {\n\n      var timeSinceFirstAnimationTick = Date.now() - animationStartTime,\n          animationEasingFn           = isPanelRequested ? expandEasingFn : collapseEasingFn,\n          normalizedAnimationTime     = Math.min(1, animationEasingFn(timeSinceFirstAnimationTick / fullAnimationDuration)),\n          currentMode                 = isPanelRequested ? normalizedAnimationTime : 1 - normalizedAnimationTime,\n          isAnimationEnding           = normalizedAnimationTime === 1;\n\n      state.set('currentMode', currentMode);\n\n      // Don't set width and height of <svg>, but instead use scale transform\n      // To quote from http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/\n      // To achieve silky smooth animations you need to avoid work, and the best way to do that is to only change properties\n      // that affect compositing -- transform and opacity.\n      setTransform(\n        (startingPosition.left + positionDifference.left * normalizedAnimationTime),\n        (startingPosition.top  + positionDifference.top  * normalizedAnimationTime),\n        (startingScale         + scaleDifference         * normalizedAnimationTime)\n      );\n\n      setSVGElementTransforms(startingSVGElementTransforms, svgElementTransformDifference, normalizedAnimationTime);\n\n      if (isAnimationEnding) {\n\n        // The final size must be IDEAL_PANEL_WIDTH x IDEAL_PANEL_HEIGHT\n        // We use scale to make up the difference so that all HTML BP content is also sized properly (not just SVG)\n        var currentSize = getCurrentSize(),\n          ratioFromIdealSize = isPanelRequested ? BP_CONST.IDEAL_PANEL_WIDTH / currentSize.width : 1;\n        setSize(getCurrentSize(), ratioFromIdealSize);\n\n        setTransform(\n          (startingPosition.left + positionDifference.left * normalizedAnimationTime),\n          (startingPosition.top  + positionDifference.top  * normalizedAnimationTime),\n          isPanelRequested ? 1 / ratioFromIdealSize : 1\n        );\n\n        endAnimation();\n\n        return;\n      }\n\n      animationId = requestFrameFn(animationTick);\n\n    }\n\n    // Chrome is affected by the size of the source of what's scaled\n    // It ends up being faster when the source is smaller, but less crisp\n    function getStartCrispFactor() {\n      if (!platform.browser.isChrome) {\n        return 1;  // Don't need to play games with crisping other than in Chrome\n      }\n\n      return platform.isRetina() ? 1.5 : 3;\n    }\n\n    if (isPanelRequested && state.isBadge()) {\n\n      startCrispFactor = getStartCrispFactor();\n\n      setSize(startingSize, startCrispFactor);\n\n      setTransform(\n        startingPosition.left,\n        startingPosition.top,\n        1 / startCrispFactor\n      );\n\n    }\n\n    startingScale   = getCurrentScale();\n    endingScale     = getTargetScale(endingSize.width / startingSize.width, startCrispFactor);\n    scaleDifference = endingScale - startingScale;\n\n    // The animation start time will be NOW minus how long the previous animation duration.\n    animationStartTime = Date.now() - percentAnimationComplete * fullAnimationDuration;\n\n    animationId = requestFrameFn(animationTick);\n\n  }\n\n  function endAnimation () {\n\n    var isPanelRequested = state.isPanelRequested();\n\n    cancelAnimation();\n\n    getBadgeElement().setAttribute('aria-expanded', isPanelRequested);\n\n    state.set('currentMode', currentlyTransitioningTo);\n    currentlyTransitioningFrom = currentlyTransitioningTo;\n    currentlyTransitioningTo = null;\n\n    events.emit(isPanelRequested ? 'bp/did-expand' : 'bp/did-shrink');\n\n    require([ 'run/bp/view/view' ], function(view) {\n      view.update();\n    });\n  }\n\n  function cancelAnimation() {\n    cancelFrameFn(animationId);\n  }\n\n  function onZoomChange(zoomLevel) {\n    currentZoom = zoomLevel;\n  }\n\n  function animate() {\n\n    if (currentlyTransitioningTo === state.get('transitionTo')) {\n      // Already where we've been requested to be\n      // This prevents us from starting a new animation of the same kind when we've already started one\n      return;\n    }\n\n    if (state.isExpanding() || state.isShrinking()) {\n\n      // There is room to animate, not already at the size limit of where we're transitioning to\n      performAnimation();\n    }\n\n    currentlyTransitioningTo = state.get('transitionTo');\n  }\n\n\n  function init() {\n    firstTimeRender();\n\n    events.on('bp/will-expand bp/will-shrink', cancelAnimation);\n\n    events.on('zoom/begin', function () {\n      animationStartTime = 0;\n    });\n\n    events.on('zoom', onZoomChange);\n\n  }\n\n  return {\n    init: init,\n    animate: animate\n  };\n\n});\n\n","sitecues.define('run/bp/view/panel/panel-classes',['run/bp/constants', 'run/bp/model/state'], function(BP_CONST, state) {\n\n  /**\n   *** Getters ***\n   */\n\n  // These classes add styles based on the current state of the panel\n  function getViewClasses() {\n\n    var classBuilder = '',\n      isSecondary = state.isSecondaryPanelRequested(); // Is or will be secondary panel\n\n    // In enlarged view we always show the real settings.\n    // See badge.js for more about real vs fake settings.\n    classBuilder += ' scp-realsettings';\n\n    if (state.isPanel()) {\n      // *** scp-panel ***\n      // The panel is fully enlarged and ready to accept mouse input\n      classBuilder += ' ' + BP_CONST.IS_PANEL;\n    }\n\n    // *** scp-want-panel ***\n    // Sets larger panel sizes on everything.\n    // It can take time to take effect because of the animation properties.\n    classBuilder += ' ' + BP_CONST.WANT_PANEL + (isSecondary ? ' scp-want-secondary' : ' ' + BP_CONST.MAIN_ID);\n\n    if (state.get('isKeyboardMode')) {\n      // *** scp-keyboard ***\n      // Keyboard mode is enabled and therefore current focus outline must be visible\n      classBuilder += ' scp-keyboard';\n    }\n\n    classBuilder += ' scp-classic-' + state.get('isClassicMode');\n\n    return classBuilder + getSecondaryPanelClasses();\n  }\n\n  /*\n   A feature panel is a special panel that is triggered from the secondary panel. It can be one of four things right now:\n   Settings\n   Tips\n   Feedback\n   About\n\n   These can only be shown when the panel is large.\n   */\n\n  // TODO Ideally this belongs in the bp-secondary/ folder only if isSecondaryPanel, but since require() is async it wouldn't really be worth it\n  function getSecondaryPanelClasses() {\n    var panelName = state.getSecondaryPanelName(),\n      className =' scp-panel-' + panelName;\n    if (state.get('isSecondaryPanel')) {\n      className += ' scp-is-secondary';\n      if (state.get('isFeedbackSent')) {\n        className += ' scp-feedback-sent';\n      }\n    }\n    if (state.get('isSecondaryExpanding')) {\n      className  += ' scp-secondary-expanding';  // Growing in visual height\n    }\n\n    return className;\n  }\n\n  return {\n    getViewClasses: getViewClasses\n  };\n\n});\n\n","/**\n * Badge, toolbar and panel base view\n */\nsitecues.define('run/bp/view/badge/badge-classes',[\n  'run/bp/constants',\n  'run/bp/model/state'\n], function(BP_CONST,\n            state) {\n\n  /**\n   *** Public ***\n   */\n\n  function getPaletteClass() {\n    var paletteKey = state.get('paletteKey'),\n      paletteName = BP_CONST.PALETTE_NAME_MAP[paletteKey || 'normal'];\n\n    return ' scp-palette' + paletteName;\n  }\n\n  function getViewClasses() {\n\n    var classBuilder = BP_CONST.WANT_BADGE;\n\n    if (state.isBadge()) {\n      classBuilder += ' ' + BP_CONST.IS_BADGE;\n    }\n\n    if (SC_EXTENSION || state.get('isRealSettings')) {\n      // *** scp-realsettings ***\n      // Show the real settings for the badge (not the fake ones)\n      // Why it's used:\n      // The initial badge is easier-to-see, more attractive and more inviting when speech is on and zoom is\n      // somewhere in the middle. Therefore the initial badge uses fake settings.\n      // However, once the user has ever expanded the badge or used sitecues we show the real settings.\n      classBuilder += ' scp-realsettings';\n    }\n\n    return classBuilder;\n  }\n\n  return {\n    getViewClasses: getViewClasses,\n    getPaletteClass: getPaletteClass\n  };\n});\n\n","/*\n * Allow listening to changes in browser location that occur via history APIc\n */\n\nsitecues.define(\n  'run/history-change-events',[\n    'mini-core/native-global'\n  ],\n  function (\n    nativeGlobal\n  ) {\n  'use strict';\n\n  var listeners,\n    origPath;\n\n  function getPath() {\n    return document.location.pathname;\n  }\n\n  function trigger() {\n    var index = 0,\n      newPath = getPath(),\n      numListeners = listeners.length;\n\n    for (index; index < numListeners; index ++) {\n      listeners[index](origPath, newPath);\n    }\n\n    origPath = newPath;\n  }\n\n  function triggerIfPathChanged() {\n    var currPath = getPath();\n    if (origPath !== currPath) {\n      trigger();\n    }\n  }\n\n  function onClick() {\n    nativeGlobal.setTimeout(triggerIfPathChanged, 0);\n  }\n\n  function on(fn) {\n    if (!listeners) {\n      listeners = [];\n      origPath = getPath();\n      // The popstate event is fired when the user uses the browser's back/forward command\n      // Unfortunately this is not fired when the user clicks on a link that causes a JS-based history change\n      // via the history API\n      window.addEventListener('popstate', trigger);\n      // Listening to click and then checking for the a location change\n      // allows us to notice history changes via pushState()\n      // See http://stackoverflow.com/questions/4570093/how-to-get-notified-about-changes-of-the-history-via-history-pushstate\n      // The click event is also fired for links triggered via Enter key\n      // We must to click via capturing listener in case page cancels\n      window.addEventListener('click', onClick, true);\n    }\n    listeners.push(fn);\n  }\n\n  function off(fn) {\n    var index = listeners.indexOf(fn);\n    if (index >= 0) {\n      listeners = listeners.splice(index, 1);\n    }\n  }\n\n  return {\n    on   : on,\n    off  : off\n  };\n});\n","/**\n * Badge, toolbar and panel base view\n */\nsitecues.define(\n  'run/bp/view/view',[\n    'run/bp/constants',\n    'run/bp/helper',\n    'run/bp/view/svg',\n    'run/bp/view/badge/placement',\n    'run/bp/model/state',\n    'run/conf/preferences',\n    'run/bp/view/size-animation',\n    'run/locale',\n    'run/conf/site',\n    'run/bp/view/panel/panel-classes',\n    'run/bp/view/badge/badge-classes',\n    'run/events',\n    'run/history-change-events',\n    'run/inline-style/inline-style'\n  ],\n  /*jshint -W072 */ //Currently there are too many dependencies, so we need to tell JSHint to ignore it for now\n  function (\n    BP_CONST,\n    helper,\n    bpSVG,\n    placement,\n    state,\n    pref,\n    sizeAnimation,\n    locale,\n    site,\n    panelClasses,\n    badgeClasses,\n    events,\n    historyChange,\n    inlineStyle\n  ) {\n  /*jshint +W072 */\n  'use strict';\n\n  var byId = helper.byId,\n    bpContainer,\n    badgeElement,\n    svgElement;\n\n  /*\n   *** Private ***\n   */\n\n  function getBpContainerElement() {\n    return byId(BP_CONST.BP_CONTAINER_ID);\n  }\n\n  // The bpContainer lives just inside the badge placeholder, contains all the visible BP content, and can change size\n  function createBpContainer() {\n    // Create the svg container\n    var bpContainerElem = document.createElement('sc');\n\n    // Set attributes\n    helper.setAttributes(bpContainerElem, BP_CONST.PANEL_CONTAINER_ATTRS);\n\n    bpContainerElem.innerHTML = bpSVG();\n\n    return bpContainerElem;\n  }\n\n  // Can get SVG element whether currently attached to document or not\n  function getSVGElement(bpContainer) {\n    // Don't use helper.byId() because the element isn't inserted in DOM yet.\n    return bpContainer.querySelector('#' + BP_CONST.SVG_ID);\n  }\n\n  // Update accessibility attributes\n  function updateAria(isPanel) {\n    // Let the user know that the button is expandable\n    badgeElement.setAttribute('aria-expanded',isPanel);\n\n    // Hide the inner contents of the button when it's just a button\n    getBpContainerElement().setAttribute('aria-hidden', !isPanel);\n  }\n\n  // If the settings are not undefined it means sitecues has been turned on before\n  function hasSitecuesEverBeenOn() {\n    return pref.has('zoom') || pref.has('ttsOn');\n  }\n\n  // Insert badge label into an element (using aria-label didn't work as NVDA cut off the label text at 100 characters)\n  // The badge label will be absolutely positioned offscreen in order to not affect layout\n  function addLabel(badgeOrToolbarElement) {\n    var badgeLabelElement = document.createElement('sc');\n    badgeLabelElement.innerHTML = locale.translate(BP_CONST.STRINGS.BADGE_LABEL);\n\n    inlineStyle.set(badgeLabelElement, {\n      position : 'absolute',\n      left     : '-9999px'\n    });\n\n    badgeOrToolbarElement.appendChild(badgeLabelElement);\n  }\n\n  /**\n   *** Public ***\n   */\n\n  // Rerender the panel with the current model (state).\n  // isNewPanel is true when a new view is shown within the panel (different widgets are present)\n  function update(isNewSubpanel) {\n\n    // Get the view classes that will create the desired appearance\n    var isOrWillBePanel = state.isPanelRequested(),\n      classes = isOrWillBePanel ? panelClasses.getViewClasses() : badgeClasses.getViewClasses();\n\n    // This will cause the CSS to update\n    bpContainer.setAttribute('class', classes);\n\n    if (!isOrWillBePanel) {\n      updateBadgePalette();\n    }\n\n    // If we are expanding or contracting, aria-expanded is true (enables CSS and communicates with screen readers)\n    updateAria(isOrWillBePanel);\n\n    // Animate to new size (only if new state requires a different size)\n    sizeAnimation.animate();\n\n    // Fire new panel event if appropriate\n    if (isNewSubpanel) {\n      events.emit('bp/did-open-subpanel');\n    }\n  }\n\n  function updateBadgePalette() {\n    var currentBadgeClassAttr = badgeElement.getAttribute('class') || '',\n      newBadgeClassAttr = currentBadgeClassAttr.replace(/scp-palette-[a-z]+/, '') + ' ' + badgeClasses.getPaletteClass();\n    badgeElement.setAttribute('class', newBadgeClassAttr);\n  }\n\n  // Location of page has changed via history API.\n  // We must update our hashes so that they are not pointing to the wrong place,\n  // otherwise the badge/panel will show up empty (SC-3797)\n  function updateSvgHashes(oldPath, newPath) {\n    function updateAttribute(element, attribute) {\n      var oldValue = element.getAttribute(attribute),\n        newValue = oldValue.replace(oldPath + '#', newPath + '#');\n\n      element.setAttribute(attribute, newValue);\n    }\n\n    function updateElements(selector, attribute) {\n      var elements = svgElement.querySelectorAll(selector),\n        index = elements.length;\n\n      while (index --) {\n        updateAttribute(elements[index], attribute);\n      }\n\n    }\n    updateElements('use', 'xlink:href');\n    updateElements('a', 'href');\n    updateElements('[filter]', 'filter');\n  }\n\n  // This function augments the badge placement element, which is passed in.\n  // This is an element that will have <svg> and other markup inserted inside of it.\n  //\n  // It binds the permanent event handlers. It positions the elements so they appear directly over\n  // the websites placeholder.  It sets the SVG height and width so that it visually covers the\n  // placeholder/badgeElement.  It binds event handlers to append the BPContainer to <html> or\n  // the badgeElement (switching parent).\n  function init(badgePlacementElem) {\n\n    // Create the container and insert the SVG\n    badgeElement = badgePlacementElem;\n    bpContainer = createBpContainer();\n    svgElement = getSVGElement(bpContainer);\n\n    historyChange.on(updateSvgHashes);\n\n    // Real settings or fake initial settings?\n    if (!SC_EXTENSION) {\n      // Use fake settings if undefined -- user never used sitecues before.\n      // This will be turned off once user interacts with sitecues.\n      state.set('isRealSettings', site.get('alwaysRealSettings') || hasSitecuesEverBeenOn());\n    }\n\n    // Set attributes\n    helper.setAttributes(badgeElement, BP_CONST.BADGE_ATTRS);\n\n    // Label it\n    addLabel(badgeElement);\n\n    // Append the container to the badgeElement and fit to the space available\n    placement.init(badgeElement, bpContainer, svgElement);\n\n    // Get size animations ready so that the badge can gracefully grow into a panel\n    sizeAnimation.init();\n\n    // Set badge classes. Render the badge. Render slider.\n    update();\n  }\n\n  return {\n    init: init,\n    update: update\n  };\n});\n\n","/*\n * Replacement for addEventListener that by default\n * - uses passive events\n * - uses capturing events\n * Supports options object, with the following options:\n * {\n *   passive: boolean,   (default is true, in contrast to addEventListener)\n *   capture: boolean    (default is true, in contrast to addEventListener)\n * }\n */\n\nsitecues.define('run/dom-events',[], function () {\n  var isPassiveSupported = false;\n\n  function getThirdParam(opts) {\n    opts = opts || {};\n\n    var isCapturing = opts.capture !== false,\n      isPassive = opts.passive !== false;\n\n    if (isPassiveSupported) {\n      return {\n        capture: isCapturing,\n        passive: isPassive // Default to true of not defined\n      };\n    }\n\n    return isCapturing;\n  }\n\n  function on(target, type, fn, opts) {\n    target.addEventListener(type, fn, getThirdParam(opts));\n  }\n\n  function off(target, type, fn, opts) {\n    target.removeEventListener(type, fn, getThirdParam(opts));\n  }\n\n  function init() {\n    try {\n      var opts = Object.defineProperty({}, 'passive', {\n        get: function() {\n          isPassiveSupported = true;\n        }\n      });\n      window.addEventListener('test', null, opts);\n    } catch (e) {}\n  }\n\n  return {\n    on   : on,   // Note: use { passive: false } if you ever need to cancel the event!\n    off  : off,\n    init: init\n  };\n\n});\n","/*\nBP Controller\n */\nsitecues.define(\n  'run/bp/controller/expand-controller',[\n    'run/bp/constants',\n    'run/bp/model/state',\n    'run/bp/helper',\n    'run/metric/metric',\n    'run/ab-test/ab-test',\n    'run/conf/preferences',\n    'run/conf/site',\n    'run/bp/view/view',\n    'run/events',\n    'run/dom-events',\n    'mini-core/native-global'\n  ],\n  function (\n    BP_CONST,\n    state,\n    helper,\n    metric,\n    abTest,\n    pref,\n    site,\n    view,\n    events,\n    domEvents,\n    nativeGlobal\n  ) {\n  'use strict';\n\n  // How long we wait before expanding BP\n  var hoverIfNoMoveTimer,  // If mouse stays still inside badge, open\n    hoverIfStayInsideTimer,  // If mouse stays inside badge pr toolbar, open\n    isInitialized,\n    // We ignore the first mouse move when a window becomes active, otherwise badge opens\n    // if the mouse happens to be over the badge/toolbar\n    doIgnoreNextMouseMove = true,\n    DEFAULT_SENSITIVITY = 1,\n    sensitivity; /* How much more or less sensitive is the badge than usual, e.g. 1.5 = 50% more sensitive */\n\n  function getBadgeElement() {\n    return helper.byId(BP_CONST.BADGE_ID);\n  }\n\n  function isInBadgeArea(evt, badgeRect) {\n    return evt.clientX >= badgeRect.left && evt.clientX <= badgeRect.right &&\n      evt.clientY >= badgeRect.top && evt.clientY <= badgeRect.bottom;\n  }\n\n  function  getVisibleBadgeRect() {\n    return helper.getRect(helper.byId(BP_CONST.MOUSEOVER_TARGET));\n  }\n\n  // When window is newly activated, ignore the automatic first mousemove that is generated\n  // that may happen to be over the badge/toolbar. Require that the user intentionally moves to the toolbar.\n  function onWindowFocus() {\n    doIgnoreNextMouseMove = true;\n  }\n\n  // Logic to determine whether we should begin to expand panel\n  function onMouseMove(evt) {\n\n    if (doIgnoreNextMouseMove) {\n      doIgnoreNextMouseMove = false;\n      return;\n    }\n\n    if (state.isExpanding()) {\n      return;  // Already expanding -> do nothing\n    }\n\n    cancelHoverIfNoMoveTimer();\n\n    // Is the event related to the visible contents of the badge?\n    // (as opposed to the hidden areas around the badge)\n    var badgeRect = getVisibleBadgeRect();\n\n    if (!isInBadgeArea(evt, badgeRect)) {\n      return;\n    }\n\n    // Check if shrinking and need to reopen\n    if (state.isShrinking()) {\n      changeModeToPanel();  // User changed their mind -- reverse course and reopen\n      return;\n    }\n\n    // Set timers to open the badge if the user stays inside of it\n    // We use two timers so that if the user actually stops, the badge opens faster (more responsive feeling)\n    // Hover if no move -- start a new timer every time mouse moves\n    hoverIfNoMoveTimer = nativeGlobal.setTimeout(changeModeToPanel, getHoverDelayNoMove());\n    if (!hoverIfStayInsideTimer) {\n      hoverIfStayInsideTimer = nativeGlobal.setTimeout(changeModeToPanel, getHoverDelayStayInside());\n    }\n  }\n\n  function getSensitivity() {\n    return sensitivity;\n  }\n\n  function getHoverDelayNoMove() {\n    return BP_CONST.HOVER_DELAY_NOMOVE_BADGE / sensitivity;\n  }\n\n  function getHoverDelayStayInside() {\n    // First interaction is most sensitive\n    if (abTest.get('extraSensitiveBadgeNewUser') && isFirstInteraction()) {\n      return BP_CONST.HOVER_DELAY_STAY_INSIDE_FIRST_TIME;\n    }\n\n    // Second or later interaction\n    return BP_CONST.HOVER_DELAY_STAY_INSIDE_BADGE / sensitivity;\n  }\n\n  function isFirstInteraction() {\n    // Once the badge opens the first time, we show the actual zoom and tts states\n    // Before that, we don't show real settings (we show a zoom of about 2 and TTS on)\n    return !state.get('isRealSettings');\n  }\n\n  /*\n   Show panel according to settings.\n   */\n  function expandPanel(isOpenedWithHover) {\n\n    if (state.isPanel()) {\n      return; // Already expanded or in the middle of shrinking\n    }\n\n    var isFirstBadgeUse = isFirstInteraction();\n    state.set('isFirstBadgeUse', isFirstBadgeUse);  // Will stay true throught this use of the badge\n\n    setPanelExpandedState(isOpenedWithHover);\n\n    events.emit('bp/will-expand');\n\n    new metric.BadgeHover({\n      isFirstBadgeUse: isFirstBadgeUse\n    }).send();\n\n    view.update();\n  }\n  function ensureFutureRealSettings() {   // Use real settings on next page load\n    // Save zoom level so that Sitecues does not see this as a first time user\n    if (!pref.has('zoom')) {\n      pref.set('zoom', 1);\n    }\n  }\n\n  function setPanelExpandedState(isOpenedWithHover) {\n    state.set('isSecondaryExpanded', false); // Only main panel expanded, not secondary\n    state.set('wasMouseInPanel', isOpenedWithHover);\n    state.set('transitionTo', BP_CONST.PANEL_MODE);\n    state.turnOnRealSettings();\n    ensureFutureRealSettings();\n  }\n\n  function changeModeToPanel(isOpenedWithKeyboard) {\n    cancelHoverTimers();\n    if (!state.get('isShrinkingFromKeyboard')) { // Don't re-expand while trying to close via Escape key\n      expandPanel(!isOpenedWithKeyboard);\n    }\n  }\n\n  function cancelHoverTimers() {\n    cancelHoverIfNoMoveTimer();\n    cancelHoverIfStayInsideTimer();\n  }\n\n  function cancelHoverIfNoMoveTimer() {\n    clearTimeout(hoverIfNoMoveTimer);\n    hoverIfNoMoveTimer = 0;\n  }\n\n  function cancelHoverIfStayInsideTimer() {\n    clearTimeout(hoverIfStayInsideTimer);\n    hoverIfStayInsideTimer = 0;\n  }\n\n  // When a click happens on the badge, it can be from one of two things:\n  // - A fake click event pushed by a screen reader when the user presses Enter -- in this case we should expand the panel\n  // - An actual click in the whitespace around the panel (before they moused over the visible area) -- we should ignore these\n  //   so that clicks around the panel don't accidentally open it.\n  function clickToOpenPanel(evt) {\n    if (state.isBadge()) {\n      var badgeElem = helper.byId(BP_CONST.BADGE_ID),\n        isBadgeFocused = document.activeElement === badgeElem,\n        target = evt.target,\n        isChildClicked = target && target.parentNode === badgeElem,\n        badgeRect = getVisibleBadgeRect(),\n        isClickInVisibleBadgeRect = isInBadgeArea(evt, badgeRect);\n      if (!isClickInVisibleBadgeRect) {\n        // Click is in the toolbar, outside of visible badge\n        // Focus should be in the document, otherwise HLB won't work (confusing)\n        if (isBadgeFocused) {\n          document.body.focus();\n        }\n        // Don't focus badge\n        evt.preventDefault();\n        return false;\n      }\n      else if (isBadgeFocused || isChildClicked) {   // Screen reader pseudo-click\n        // Click is in visible area and badge has focus --\n        // * or *\n        // Click in invisible child -- only screen readers can do this -- NVDA does it\n        // Go ahead and open the panel in focus/keyboard mode\n\n        // First ensure it has focus (it didn't in second case)\n        badgeElem.focus();\n\n        // Opened with click means opened with keyboard in screen reader\n        nativeGlobal.setTimeout(function() {\n          changeModeToPanel(true);\n          // Set screen reader flag for the life of this page view\n          state.set('isOpenedWithScreenReader', true);\n        }, 0);\n      }\n      else {\n        // Actual click -- not fake screen reader click, so no need to focus\n        changeModeToPanel();\n      }\n    }\n  }\n\n  function processBadgeActivationKeys(evt) {\n    var ENTER = 13, SPACE = 32;\n    if (state.isBadge() &&\n      (evt.keyCode === ENTER || evt.keyCode === SPACE)) {\n\n      evt.preventDefault();\n      changeModeToPanel(true); // Opened with keyboard\n    }\n  }\n\n  function didExpand() {\n    require(['bp-expanded/bp-expanded'], function (bpExpanded) {\n      bpExpanded.init();\n    });\n  }\n\n  function didZoom() {\n    require(['bp-expanded/controller/slider-controller'], function (sliderController) {\n      state.turnOnRealSettings();\n      sliderController.init();\n      view.update();\n    });\n  }\n\n  function didChangeSpeech(isOn) {\n    require(['bp-expanded/view/tts-button'], function(ttsButton) {\n      // Update the TTS button view on any speech state change\n      state.turnOnRealSettings();\n      ttsButton.init();\n      ttsButton.updateTTSStateView(isOn);\n      view.update();\n    });\n  }\n\n  /*\n   Private functions.\n   */\n\n  function init() {\n    if (!isInitialized) {\n      isInitialized = true;\n\n      sensitivity = site.get('badgeSensitivity') || DEFAULT_SENSITIVITY;\n\n      var badgeElement = getBadgeElement();\n      domEvents.on(badgeElement, 'keydown', processBadgeActivationKeys, { passive: false });\n      domEvents.on(badgeElement, 'mousedown', clickToOpenPanel, { passive: false });\n      domEvents.on(badgeElement, 'mousemove', onMouseMove);\n      domEvents.on(badgeElement, 'mouseleave', cancelHoverTimers);\n\n      domEvents.on(window, 'focus', onWindowFocus);\n      events.on('bp/did-expand', didExpand);\n      events.on('zoom', didZoom);\n      events.on('speech/did-change', didChangeSpeech);\n\n      // Turn on TTS button if the setting is on\n      if (pref.get('ttsOn')) {\n        didChangeSpeech(true);\n      }\n\n      if (SC_DEV) {\n        sitecues.toggleStickyPanel = function () {\n          var isSticky = !state.get('isStickyPanel');\n          state.set('isStickyPanel', isSticky);\n          return isSticky;\n        };\n      }\n    }\n  }\n\n  return {\n    init: init,\n    getSensitivity: getSensitivity,\n    expandPanel: expandPanel\n  };\n});\n\n","// Badge palette code.\n// Not included in the extension since that always uses the same colors in the toolbar.\nsitecues.define(\n  'run/bp/view/palette',[\n    'run/bp/model/state',\n    'run/conf/site',\n    'run/bp/constants',\n    'Promise'\n  ],\n  function(state, site, BP_CONST, Promise) {\n\n  // badgeFileName is optional, and used in the case of old <img> badge placeholders.\n  // In that case the filename defines which palette to use, e.g. sitecues-badge-reverse-blue.png\n  // If no badge file name, check the site preferences for a palette\n  // Otherwise use the default palette.\n  // Custom palettes are a different story ...\n  function getSimplePaletteType(badgeFileName) {\n    var paletteName = badgeFileName || site.get('palette') || '',\n      paletteMap = BP_CONST.PALETTE_NAME_MAP,\n      fullNames = Object.keys(paletteMap),\n      index = 0;\n\n    // Check for a string because site.get('palette')\n    // returns an Object if a custom palette is used.\n    if (typeof paletteName === 'string') {\n      for (; index < fullNames.length; index ++) {\n        var fullName = fullNames[index];\n        if (paletteName.indexOf(fullName) >= 0) {\n          return fullNames[index];\n        }\n      }\n    }\n\n    return '';\n  }\n\n  // initialize the badge color palette support\n  // @badgeFileName is optional -- provided when the badge is from an <img>, which clues us into the palette\n  function init(badgeFileName) {\n\n    var paletteKey = getSimplePaletteType(badgeFileName);\n\n    // Handle 'adaptive' palette\n    if (paletteKey === BP_CONST.PALETTE_NAME_ADAPTIVE) {\n      if (SC_EXTENSION || state.get('isToolbarBadge')) {\n        // Toolbars don't adapt to theme changes -- 'adaptive' is not valid in tat case\n        paletteKey = BP_CONST.PALETTE_NAME_NORMAL;\n      }\n      else {\n        return new Promise(function(resolve) {\n          require(['bp-adaptive/bp-adaptive'], function (bpAdaptive) {\n            state.set('defaultPaletteKey', BP_CONST.PALETTE_NAME_NORMAL);\n            bpAdaptive.initAdaptivePalette();\n            resolve();\n          });\n        });\n      }\n    }\n\n    state.set('defaultPaletteKey', paletteKey);\n    state.set('paletteKey', paletteKey);\n    return Promise.resolve();\n  }\n\n  return {\n    init: init\n  };\n});\n\n","/**\n * Page badge view. Not included in the extension since that always uses the toolbar.\n */\nsitecues.define(\n  'run/bp/view/badge/page-badge',[\n    'run/bp/view/view',\n    'run/bp/view/palette',\n    'Promise',\n    'run/inline-style/inline-style'\n  ],\n  function (\n    baseView,\n    palette,\n    Promise,\n    inlineStyle\n  ) {\n  'use strict';\n\n  // Make sure the badge has non-static positioning to make it easy to place\n  // the position: absolute sc-bp-container inside of it\n  function ensureNonStaticPositioning(badge) {\n\n    var existingPositionCss = getComputedStyle(badge).position;\n\n    if (existingPositionCss === 'static') {\n      inlineStyle(badge).position = 'relative';\n    }\n  }\n\n  function initBadgeView(badge, badgeFileName) {\n    return palette.init(badgeFileName)\n      .then(function() {\n        ensureNonStaticPositioning(badge);\n        baseView.init(badge);\n      });\n  }\n\n  function init(origBadgeElem) {\n    return new Promise(function(resolve) {\n      if (origBadgeElem.localName !== 'img') {\n        // Normal placeholder badge\n        return resolve({badgeElem: origBadgeElem});\n      }\n      // If a customer uses the <img> placeholder...\n      require(['bp-img-placeholder/bp-img-placeholder'], function (imagePlaceHolder) {\n        var newBadge = imagePlaceHolder.init(origBadgeElem);\n        resolve({\n          badgeElem: newBadge,\n          origSrc: origBadgeElem.src\n        });\n      });\n    }).then(function(badgeInfo) {\n      return initBadgeView(badgeInfo.badgeElem, badgeInfo.origSrc);\n    });\n  }\n\n  return {\n    init: init\n  };\n});\n\n","// Structure of BP:\n// bp.js -- initialization and common logic for badge and panel\n// badge.js -- logic specific to badge\n// panel.js -- logic specific to panel\n// placement.js -- logic related to placing the BP in the right place in the DOM and on the screen\n//\n// sitecues events used by BP\n//\n// Information:\n// bp/did-create   -- BP inserted in page\n// bp/did-complete -- BP ready for input\n// bp/will-expand  -- BP is about to expand\n// bp/did-expand   -- BP has finished expanding\n// bp/will-shrink  -- BP is about to shrink\n// bp/did-shrink   -- BP has finished shrinking\n\nsitecues.define(\n  'run/bp/bp',[\n    'run/events',\n    'run/bp/controller/expand-controller',\n    'run/bp/model/state',\n    'run/bp/helper',\n    'run/bp/constants',\n    'run/conf/site',\n    'run/bp/model/classic-mode',\n    'run/bp/view/badge/page-badge',\n    'Promise',\n    'mini-core/native-global',\n    'run/inline-style/inline-style'\n  ],\n  function (\n    events,\n    expandController,\n    state,\n    helper,\n    BP_CONST,\n    site,\n    classicMode,\n    pageBadgeView,\n    Promise,\n    nativeGlobal,\n    inlineStyle\n  ) {\n  'use strict';\n\n  /*\n   *** Public methods ***\n   */\n\n  // The htmlContainer has all of the SVG inside of it, and can take keyboard focus\n  var\n      hasFixedBody = false,\n      byId = helper.byId,\n      docElem,\n      badgeView;\n\n  /**\n   *** Start point ***\n   */\n\n  function getBadgeElement() {\n    return byId(BP_CONST.BADGE_ID);\n  }\n\n  function isToolbarUIRequested() {\n    return site.get('uiMode') === 'toolbar';\n  }\n\n  /**\n   * initializeBPFeature is the main initialization function that is run when the\n   * BP feature is ready to be enabled.  It creates the necessary elements,\n   * renders them, and emits events for the rest of the application too\n   */\n  function initBPView() {\n    if (!SC_EXTENSION && !isToolbarUIRequested()) {\n      var badgePlaceholderElem = getBadgeElement();\n\n      // Get site's in-page placeholder badge or create our own\n      if (badgePlaceholderElem) {\n        badgeView = pageBadgeView;\n        return pageBadgeView.init(badgePlaceholderElem);\n      }\n    }\n\n    // Toolbar mode requested or no badge (toolbar is default)\n    // Note: cannot use require().then because we use AMD clean in the extension\n    return new Promise(function(resolve) {\n      require(['bp-toolbar-badge/bp-toolbar-badge'], function (toolbarView) {\n        badgeView = toolbarView;\n        badgeView.init().then(resolve);\n      });\n    });\n  }\n\n  function initBPFeature() {\n    return initBPView()\n      .then(function() {\n        expandController.init();\n        events.on('zoom/begin', function () {\n          if (!hasFixedBody) {\n            fixDimensionsOfBody();\n            hasFixedBody = true;\n          }\n        });\n        return getViewInfo();\n      });\n  }\n\n  /*\n                         ********  INITIALIZATION **********\n\n      - Immediately initialize if the any of the following are true:\n        - If the document is interactive and the customer does not use the <img>\n        - If the document is complete\n      - If we can't immediately initialize, add the appropriate event listener\n        - If the customer uses the <img>, attach a load event listener to the <img>\n        - If the customer does NOT use the <img>, attach a readystatechange event listener to the document.\n  */\n\n  function isDocReady() {\n    if (!document.body) {\n      // Pages that contain parsing errors may not have a body --\n      // don't load Sitecues unless there is a body\n      return false;\n    }\n    var readyState = document.readyState;\n    return readyState === 'complete' || readyState === 'interactive';\n  }\n\n  // Init BP if the badge is ready and the document is 'interactive'|'complete'\n  // Return true if BP initialized\n  function docReady() {\n    if (isDocReady()) {\n      return Promise.resolve();\n    }\n\n    return new Promise(function(resolve) {\n      function onReadyStateChange() {\n        if (isDocReady()) {\n          resolve();\n          document.removeEventListener('readystatechange', onReadyStateChange);\n        }\n      }\n\n      document.addEventListener('readystatechange', onReadyStateChange);\n    });\n  }\n\n  function badgeReady() {\n    // If badge is already in the DOM, we can already init\n    var badgeElem = getBadgeElement();\n    if (badgeElem) {\n      return Promise.resolve();\n    }\n\n    // No badge yet -- wait until doc is interactive or complete\n    return docReady();\n  }\n\n  // The toolbar gets to init earlier than a site-provided badge\n  // It's safe to init as soon as the <body> is available\n  function bodyReady() {\n    var CHECK_BODY_INTERVAL = 250;\n    return new Promise(function(resolve) {\n      function checkBody() {\n        if (document.body) {\n          resolve();\n        } else {\n          nativeGlobal.setTimeout(checkBody, CHECK_BODY_INTERVAL);\n        }\n      }\n      checkBody();\n    });\n  }\n\n  // Classic mode is where the ? shows up instead of the down pointing arrow\n  // TODO remove one day, we hope\n  function initClassicMode() {\n    state.set('isClassicMode', classicMode());\n    sitecues.toggleClassicMode = function() {\n      state.set('isClassicMode', !state.get('isClassicMode'));\n    };\n  }\n\n  //It's possible that the transformations we apply to the body disrupt absolutely positioned elements\n  //contained by the initial containing block. This is a hacky solution to the problem, but it is much cheaper\n  //than analyzing the page and manually repositioning absolute elements.\n  //TODO: Check client site CNIB's absolutely positioned elements if this gets changed\n  function fixDimensionsOfBody() {\n    var body = document.body,\n        bodyStyle   = getComputedStyle(body),\n        docStyle    = getComputedStyle(docElem),\n        botMargin   = parseFloat(bodyStyle.marginBottom),\n        topMargin   = bodyStyle.marginTop,\n        leftMargin  = bodyStyle.marginLeft,\n        rightMargin = bodyStyle.marginRight;\n\n    if (parseFloat(bodyStyle.height) < parseFloat(docStyle.height)) {\n      inlineStyle.override(body, {\n        height : docStyle.height\n      });\n    }\n    if (botMargin !== 0) {\n      //marginBottom doesn't override bottom margins that are set with the shorthand 'margin' style,\n      //so we get all the margins and set our own inline shorthand margin\n      inlineStyle.override(body, {\n        margin : topMargin + ' ' + rightMargin + ' 0px ' + leftMargin\n      });\n    }\n  }\n\n  function getViewInfo() {\n    var badgeElem = document.getElementById('sitecues-badge'),\n      rect = badgeElem ? badgeElem.getBoundingClientRect() : {};\n\n    if (!rect.height) {\n      return {\n        isBadgeHidden: true\n      };\n    }\n\n    var isToolbar = state.get('isToolbarBadge'),\n      hasCustomPalette = typeof site.get('palette') === 'object',\n      viewInfo = {\n        badgePalette: hasCustomPalette ? 'custom' : state.get('defaultPaletteKey') || BP_CONST.PALETTE_NAME_NORMAL\n      };\n\n    if (isToolbar) {\n      viewInfo.isToolbar = true;\n    }\n    else {\n      viewInfo.badgeHeight = Math.round(rect.height);\n      viewInfo.badgeTop = Math.round(rect.top - window.pageYOffset);\n      viewInfo.badgeLeft = Math.round(rect.left - window.pageXOffset);\n    }\n\n    viewInfo.sensitivity = expandController.getSensitivity();\n\n    return viewInfo;\n  }\n\n  /**\n   * init()\n   *\n   * @return Promise\n   *\n   * Looks for the badge element, or wait for it to load, and insert and display the BP based on it's position.\n   *    When this is called:\n   * There are many cases for badge markup or config, and we also can't be sure exactly when this function is called\n   * in the lifetime of the document.\n   *\n   * Conditions required before we create and display BP -- any of the following:\n   *   1. site.get('uiMode') = 'toolbar' AND document.body is available\n   *   2. Page readyState is 'interactive' AND badge element is found (also loaded if it was an <img>)\n   *   3. Page readyState is 'complete' (will use a toolbar if no badge element is found at this point)\n   *\n   * BP config/setup cases:\n   *   1. Toolbar config (e.g. sitecues everywhere) -- allowed to load early\n   *   2. Empty badge placeholder <div id=\"sitecues-badge\"> (normal in-page customer case)\n   *   3. Badge image present <img id=\"sitecues-badge\"> (old-school, these are deprecated)\n   *     a) Already loaded\n   *     b) Need to wait for <img>\n   *   4. Missing badge and document not complete -- need to wait to see if badge shows up\n   *   5. Missing badge and document complete (causes toolbar)\n   */\n  function init() {\n    docElem = document.documentElement;\n\n    // Get whether the BP will run in classic mode (still needed for MS Edge)\n    initClassicMode();\n\n    // ---- Look for toolbar config ----\n    if (isToolbarUIRequested()) {\n      // Case 1: toolbar config -- no need to wait for badge placeholder\n      if (SC_DEV) { console.log('Early initialization of toolbar.'); }\n      return bodyReady()\n        .then(initBPFeature);\n    }\n\n    // ---- Look for badge, fall back to toolbar if necessary ----\n\n    // Page may still be loading -- check if the badge is available\n    return badgeReady()\n      .then(initBPFeature);\n  }\n\n  return {\n    init: init\n  };\n});\n\n","/**\n * Track status of modifier keys\n * For now, we are only using this to track the Ctrl key (to help understand wheel events)\n */\nsitecues.define('run/modifier-key-state',[ 'run/dom-events', 'run/constants' ], function(domEvents, constants) {\n\n  var isCtrlKeyDownNow = false,\n    CTRL_KEY_CODE = constants.KEY_CODE.CTRL;\n  \n  function onKeyDown(event) {\n    if (event.keyCode === CTRL_KEY_CODE) {\n      isCtrlKeyDownNow = true;\n    }\n  }\n\n  function onKeyUp(event) {\n    if (event.keyCode === CTRL_KEY_CODE) {\n      isCtrlKeyDownNow = false;\n    }\n  }\n\n  function isCtrlKeyDown() {\n    return isCtrlKeyDownNow;\n  }\n\n  function init() {\n    domEvents.on(window, 'keydown', onKeyDown);\n    domEvents.on(window, 'keyup', onKeyUp);\n  }\n\n  return {\n    init : init,\n    isCtrlKeyDown: isCtrlKeyDown\n  };\n});\n\n","sitecues.define('run/shake/constants',[], function () {\n\n  return {\n    SESSION_SHAKE_COUNT_KEY: '-sc-mouseshake-count',\n    MOUSE_POSITIONS_ARRAY_SIZE: 12,       // Number of mouse positions stored\n    MIN_DIR_SWITCHES_FOR_SHAKE: 2,  // How many vertical/horizontal direction switches required to be considered a shake\n    MIN_SHAKE_DIST: 3,              // Minimum pixels moved to begin a mouse shake\n    MAX_DIST_NON_SHAKE_AXIS: 30,    // Max pixels moved on axis not being shaken (vertical/horizontal)\n    MIN_SHAKE_VIGOR_DECREASE: 4,    // Minimum speed of shake decrease\n    MAX_SHAKE_VIGOR_DECREASE: 32,   // Maximum speed of shake decrease\n    SHAKE_DECREASE_MULTIPLIER: 6,       // Magic value for shake decreases based on mouse speed\n    SHAKE_INCREASE_POWER: 1.2,      // Magic value for exponential shake increase based on mouse speed\n    MAX_SHAKE_VIGOR_INCREASE: 100,  // Max shake increase (out of total possible MAX_SHAKE_VIGOR)\n    MAX_SHAKE_VIGOR: 400,           // Max total shake vigor\n    MIN_MOVE_SIZE_FOR_SHAKE: 3,     // Pixel-size for irrelevant mousemove\n    MS_BETWEEN_SHAKE_EVENTS: 50,    // ms between internal shake events\n    MAX_TIME_BETWEEN_MOVES: 100,    // if more ms than this since last mouse move, reset\n    METRIC_THRESHOLD_SHAKE_PERCENT_RESET: 10, // Shake percent must dip below this amount before firing again\n    METRIC_THRESHOLD_SHAKE_PERCENT_FIRE: 50   // Only fire metric when shake vigor suddenly jumps over this % of MAX_SHAKE_VIGOR\n  };\n});\n","/**\n * Mouseshake feature\n * - Value of shake vigor at any one time is 0-MAX_SHAKE_VIGOR (internal value)\n * - Value of shake vigor percent is 0-100 (external value -- used to communicate with other modules)\n * - For now, only fires a metric so that we can measure the potential usefulness\n * - Ideas for use -- make mouse larger, make badge glow temporarily\n */\nsitecues.define('run/shake/shake',[\n  'run/metric/metric',\n  // 'run/events',\n  'run/dom-events',\n  'run/shake/constants',\n  'run/platform',\n  'mini-core/native-global'\n], function(metric,\n            // events,\n            domEvents,\n            constants,\n            platform,\n            nativeGlobal) {\n\n  'use strict';\n\n  var mousePositionsQueue = [],\n    lastShakeTimeout,\n    lastShakeVigor = 0,\n    lastShakeVigorPercent = 0,\n    canFireMetricAgain = true,\n    MIN_DIR_SWITCHES_FOR_SHAKE = constants.MIN_DIR_SWITCHES_FOR_SHAKE,\n    MOUSE_POSITIONS_ARRAY_SIZE = constants.MOUSE_POSITIONS_ARRAY_SIZE,\n    MIN_SHAKE_DIST = constants.MIN_SHAKE_DIST,\n    MAX_DIST_NON_SHAKE_AXIS = constants.MAX_DIST_NON_SHAKE_AXIS,\n    MAX_SHAKE_VIGOR = constants.MAX_SHAKE_VIGOR,\n    MIN_SHAKE_VIGOR_DECREASE = constants.MIN_SHAKE_VIGOR_DECREASE,\n    MAX_SHAKE_VIGOR_DECREASE = constants.MAX_SHAKE_VIGOR_DECREASE,\n    SHAKE_DECREASE_MULTIPLIER = constants.SHAKE_DECREASE_MULTIPLIER,\n    SHAKE_INCREASE_POWER = constants.SHAKE_INCREASE_POWER,\n    MAX_SHAKE_VIGOR_INCREASE = constants.MAX_SHAKE_VIGOR_INCREASE,\n    MIN_MOVE_SIZE_FOR_SHAKE = constants.MIN_MOVE_SIZE_FOR_SHAKE,\n    MAX_TIME_BETWEEN_MOVES = constants.MAX_TIME_BETWEEN_MOVES,\n    METRIC_THRESHOLD_SHAKE_PERCENT_FIRE = constants.METRIC_THRESHOLD_SHAKE_PERCENT_FIRE,\n    METRIC_THRESHOLD_SHAKE_PERCENT_RESET = constants.METRIC_THRESHOLD_SHAKE_PERCENT_RESET;\n\n  function reset() {\n    mousePositionsQueue = [];\n    clearTimeout(lastShakeTimeout);\n    if (lastShakeVigor > 0) {\n      lastShakeVigor = lastShakeVigorPercent = 0;\n      fireNotifications(0);\n    }\n  }\n\n  function onMouseLeave(evt) {\n    if (evt.target === document.documentElement) {\n      reset();\n    }\n  }\n\n  function getMovementSummary() {\n    var\n      prevMove = mousePositionsQueue[0],\n      xDir = mousePositionsQueue[1].x > prevMove.x ? 1 : -1,\n      yDir = mousePositionsQueue[1].y > prevMove.y ? 1 : -1,\n      totalDist = 0,\n      xDirectionSwitches = 0,\n      yDirectionSwitches = 0,\n      distanceRequirement = lastShakeVigor ? 0 : MIN_SHAKE_DIST,\n      minX = prevMove.x,\n      minY = prevMove.y,\n      maxX = minX,\n      maxY = minY;\n\n    mousePositionsQueue.slice(1).forEach(function(currMove) {\n      var\n        x = currMove.x,\n        y = currMove.y,\n        xDelta = x - prevMove.x,\n        xDist = Math.abs(xDelta),\n        yDelta = y - prevMove.y,\n        yDist = Math.abs(yDelta),\n        xDirection = xDist < distanceRequirement ? 0 : xDist / xDelta,\n        yDirection = yDist < distanceRequirement ? 0 : yDist / yDelta;\n\n      totalDist += xDist + yDist;\n\n      // Calculate horizontal direction switches\n      if (xDirection === -xDir) {\n        ++ xDirectionSwitches;\n        xDir = xDirection;\n      }\n\n      // Calculate vertical direction switches\n      if (yDirection === -yDir) {\n        ++ yDirectionSwitches;\n        yDir = yDirection;\n      }\n\n      if (x < minX) {\n        minX = x;\n      }\n      else if (x > maxX) {\n        maxX = x;\n      }\n\n      if (y < minY) {\n        minY = y;\n      }\n      else if (y > maxY) {\n        maxY = y;\n      }\n\n      prevMove = currMove;\n    });\n\n    return {\n      xSwitches: xDirectionSwitches,\n      ySwitches: yDirectionSwitches,\n      totalXDist: maxX - minX,\n      totalYDist: maxY - minY\n    };\n  }\n\n  function getShakeVigorIncrease() {\n    var\n      isShakeX,\n      isShakeY,\n      movementSummary = getMovementSummary(mousePositionsQueue);\n\n    function isMouseShake() {\n      if (lastShakeVigor) {\n        // Was already shaking -- make it easy to keep it going\n        return movementSummary.xSwitches >= MIN_DIR_SWITCHES_FOR_SHAKE ||\n          movementSummary.ySwitches >= MIN_DIR_SWITCHES_FOR_SHAKE;\n      }\n\n      // Possible new shake -- be more stringent\n      isShakeX = (movementSummary.xSwitches >= MIN_DIR_SWITCHES_FOR_SHAKE);\n      isShakeY = (movementSummary.ySwitches >= MIN_DIR_SWITCHES_FOR_SHAKE);\n      if (isShakeX && isShakeY) {\n        // Horizontal AND vertical shake => is a shake\n        return true;\n      }\n\n      if (isShakeX) {\n        // Horizontal only -- require small total vertical movement\n        return movementSummary.totalYDist < MAX_DIST_NON_SHAKE_AXIS;\n      }\n\n      if (isShakeY) {\n        // Vertical only -- require small total horizontal movement\n        return movementSummary.totalXDist < MAX_DIST_NON_SHAKE_AXIS;\n      }\n    }\n\n    if (isMouseShake()) {\n      var distanceFactor = Math.max(movementSummary.totalXDist, movementSummary.totalYDist);\n      return Math.min(Math.pow(distanceFactor, SHAKE_INCREASE_POWER), MAX_SHAKE_VIGOR_INCREASE); // Shake vigor grows exponentially with last move distance\n    }\n  }\n\n  function getShakeVigorDecrease(lastDistance) {\n    // Shake factor shrinks back down as mouse moves (faster as speed increases)\n    var unboundedResult = lastDistance * SHAKE_DECREASE_MULTIPLIER,\n      boundedResult = Math.max(Math.min(unboundedResult, MAX_SHAKE_VIGOR_DECREASE), MIN_SHAKE_VIGOR_DECREASE);\n\n    return boundedResult;\n  }\n\n  function processMouseMove(x, y, t) {\n    // Add move to queue\n    var currMove = { x: x, y: y, t: t },\n      numMoves = mousePositionsQueue.length,\n      lastMove = numMoves > 0 && mousePositionsQueue[numMoves - 1];\n\n    mousePositionsQueue.push(currMove);\n\n    var\n      lastDistance = lastMove ? getDistanceBetweenMoves(currMove, lastMove) : 0,\n      shakeVigor = getShakeVigor(numMoves, lastDistance),\n      shakeVigorPercent;\n\n    if (shakeVigor !== lastShakeVigor) {\n      shakeVigorPercent = Math.round(100 * shakeVigor / MAX_SHAKE_VIGOR);\n      fireNotifications(shakeVigorPercent);\n      lastShakeVigor = shakeVigor;\n      lastShakeVigorPercent = shakeVigorPercent;\n    }\n\n    // Shift oldest item out of moves queue\n    if (lastMove && numMoves > MOUSE_POSITIONS_ARRAY_SIZE) {\n      mousePositionsQueue.shift();\n    }\n  }\n\n  function onMouseMove(evt) {\n    var x = evt.screenX,\n      y = evt.screenY,\n      t = evt.timeStamp,\n      numMoves = mousePositionsQueue.length,\n      lastMove = numMoves > 0 && mousePositionsQueue[numMoves - 1];\n\n    if (lastMove && t - lastMove.t > MAX_TIME_BETWEEN_MOVES) {\n      mousePositionsQueue = []; // Start from scratch\n    }\n\n    nativeGlobal.setTimeout(function() {\n      processMouseMove(x, y, t);\n    }, 0);\n  }\n\n  // Rough approximation for faster math\n  function getDistanceBetweenMoves(move1, move2) {\n    return Math.abs(move2.x - move1.x) + Math.abs(move2.y - move1.y);\n  }\n\n  function getShakeVigor(numMoves, lastDistance) {\n    var shakeVigor,\n      isShakeIncreaseAllowed = numMoves >= MOUSE_POSITIONS_ARRAY_SIZE && (lastShakeVigor || lastDistance >= MIN_MOVE_SIZE_FOR_SHAKE),\n      shakeVigorIncrease = isShakeIncreaseAllowed && getShakeVigorIncrease(),\n      shakeVigorDelta = shakeVigorIncrease || - getShakeVigorDecrease(lastDistance);\n\n    shakeVigor = lastShakeVigor + shakeVigorDelta;\n\n    if (shakeVigor < 0) {\n      return 0;\n    }\n    else if (shakeVigor > MAX_SHAKE_VIGOR) {\n      return MAX_SHAKE_VIGOR;\n    }\n\n    return Math.floor(shakeVigor);\n  }\n\n  function fireNotifications(shakeVigorPercent) {\n    // Internal change event\n    // TODO add back once we use it\n    // if (!lastShakeTimeout) {\n      // lastShakeTimeout = nativeGlobal.setTimeout(function() {\n      //   fireShakeVigorChange(shakeVigorPercent);\n      // }, constants.MS_BETWEEN_SHAKE_EVENTS);\n    // }\n\n    // Debugging\n    // Too noisy for main build\n    // if (SC_DEV) {\n    //   console.log('Shake value: ' + shakeVigorPercent);\n    // }\n\n    // Metric\n    // Fires only when it goes over the threshold, to limit network requests\n    if (shakeVigorPercent >= METRIC_THRESHOLD_SHAKE_PERCENT_FIRE && canFireMetricAgain) {\n      canFireMetricAgain = false;\n      nativeGlobal.setTimeout(function() {\n        fireShakeVigorMetric(shakeVigorPercent);\n      }, 0);\n    }\n    else if (shakeVigorPercent < METRIC_THRESHOLD_SHAKE_PERCENT_RESET) {\n      canFireMetricAgain = true;\n    }\n  }\n\n  function fireShakeVigorMetric(shakeVigorPercent) {\n    var details = {\n      vigor: shakeVigorPercent,\n      sessionCount: incrementSessionShakes()\n    };\n\n    if (SC_DEV) {\n      console.log('Mouse shake metric fired: ', JSON.stringify(details));\n    }\n\n    new metric.MouseShake(details).send();\n  }\n\n  function incrementSessionShakes() {\n    if (!platform.isStorageUnsupported) {\n      var numShakes = sessionStorage.getItem(constants.SESSION_SHAKE_COUNT_KEY) || 0;\n      ++ numShakes;\n      sessionStorage.setItem(constants.SESSION_SHAKE_COUNT_KEY, numShakes);\n      return numShakes;\n    }\n  }\n\n  // Add back once we use it\n  // function fireShakeVigorChange(shakeVigorPercent) {\n  //   lastShakeTimeout = 0;\n  //   events.emit('run/mouseshake', shakeVigorPercent);\n  // }\n\n  function init() {\n    domEvents.on(document, 'mousemove', onMouseMove);\n    domEvents.on(document, 'mouseleave', onMouseLeave);\n  }\n\n  return {\n    init: init\n  };\n});\n\n","/*\n * Sitecues: run.js\n *   1. Initialize settings and locale\n *   2. Initialize BP\n *   3. Listen to anything that should wake up sitecues features\n *   4. Fire sitecues ready callback and page-visited metric\n */\nsitecues.define(\n  'run/run',[\n    'Promise',\n    'run/conf/preferences',\n    'run/conf/id',\n    'run/conf/site',\n    'run/conf/urls',\n    'run/exports',\n    'run/locale',\n    'run/metric/metric',\n    'run/platform',\n    'run/bp/bp',\n    'run/constants',\n    'run/events',\n    'run/dom-events',\n    'run/modifier-key-state',\n    'run/ab-test/ab-test',\n    'run/shake/shake',\n    'run/inline-style/inline-style'\n  ],\n  /*jshint -W072 */ //Currently there are too many dependencies, so we need to tell JSHint to ignore it for now\n  function (\n    Promise,\n    pref,\n    id,\n    site,\n    urls,\n    exports,\n    locale,\n    metric,\n    platform,\n    bp,\n    CORE_CONST,\n    events,\n    domEvents,\n    modifierKeyState,\n    abTest,\n    shake,\n    inlineStyle\n  ) {\n  /*jshint +W072 */\n  'use strict';\n\n  var\n    areZoomEnhancementsInitialized,\n    isZoomInitialized,\n    isSpeechInitialized,\n    isZoomOn,\n    isSpeechOn,\n    isSitecuesOn = false,\n    isKeyReleased,\n    isKeyHandlingInitialized,\n    wasSitecuesEverOn,\n    startSitecuesLoad,\n    // Keys that can init sitecues\n    INIT_CODES = CORE_CONST.INIT_CODES,\n    // Enums for sitecues loading states\n    state      = CORE_CONST.READY_STATE;\n\n  function performInitialLoadZoom(initialZoom) {\n    require([ 'page/zoom/zoom' ], function (zoomMod) {\n      zoomMod.init();\n      zoomMod.performInitialLoadZoom(initialZoom);\n    });\n  }\n\n  function initZoomEnhancingFeatures() {\n    require([ 'page/hpan/hpan', 'page/positioner/positioner', 'page/focus/focus', 'page/cursor/cursor' ], function (hpan, positioner, focus, cursor) {\n      hpan.init();\n      positioner.initFromZoom();\n      focus.init();\n      cursor.init();\n    });\n  }\n\n  function initSpeech() {\n    require([ 'audio/audio', 'page/page'  ], function (page, audio) {\n      page.init();\n      audio.init();\n    });\n  }\n\n  function initSitecuesOn() {\n    require([ 'page/page', 'page/highlight/highlight', 'page/keys/keys', 'page/highlight/move-keys'], function (page, highlight, keys, moveKeys) {\n      page.init();\n      highlight.init();\n      keys.init();\n      moveKeys.init();\n    });\n  }\n\n  function initThemes() {\n    require([ 'page/page', 'theme/theme', 'page/focus/focus', 'page/keys/keys' ], function (page, theme, focus, keys) {\n      page.init();\n      theme.init();\n      focus.init();\n      keys.init();\n    });\n  }\n\n  function initMouse() {\n    require([ 'page/page', 'page/cursor/cursor', 'page/keys/keys' ], function (page, cursor, keys) {\n      page.init();\n      cursor.init();\n      keys.init();\n    });\n  }\n\n  // Init features that require *either* zoom or speech to be on\n  function onFeatureSettingChange() {\n    var isOn = isZoomOn || isSpeechOn;\n    if (isOn !== isSitecuesOn) {\n      isSitecuesOn = isOn;\n      events.emit('sitecues/did-toggle', isSitecuesOn);\n    }\n    if (isOn && !wasSitecuesEverOn) {\n      initSitecuesOn();\n      wasSitecuesEverOn = true;\n    }\n  }\n\n  function onZoomChange(zoomLevel) {\n    isZoomOn = zoomLevel > 1;\n    onFeatureSettingChange();\n    if (isZoomOn && !areZoomEnhancementsInitialized) {\n      initZoomEnhancingFeatures();\n      areZoomEnhancementsInitialized = true;\n    }\n  }\n\n  function firePageVisitedMetric() {\n    var\n      initDetails = {\n        startSitecuesLoad: startSitecuesLoad,\n        startSitecuesInteractive: getCurrentTime(),\n        // TODO These should be moved into the page-visited metric that moved to the minicore\n        // startPageLoad: performance.timing.responseEnd - fetchStartTime,\n        // startPageInteractive: performance.timing.domInteractive - fetchStartTime,\n        nativeZoom: platform.nativeZoom,\n        isRetina: platform.isRetina(),\n        isStorageUnsupported: platform.isStorageUnsupported   // E.g. Safari private browsing\n      };\n\n    new metric.SitecuesReady(initDetails).send();\n  }\n\n  function getCurrentTime() {\n    return Math.floor(performance.now());\n  }\n\n\n  function onSitecuesReady() {\n    firePageVisitedMetric();\n\n    sitecues.readyState = state.COMPLETE;\n    //Freeze readyState on load\n    Object.defineProperty(sitecues, 'readyState', { writable : false });\n\n    if (typeof sitecues.onReady === 'function') {\n      sitecues.onReady.call(sitecues);\n    }\n    Object.defineProperty(sitecues, 'readyState', { writable: false }); // Do not allow reassignment, e.g. sitecues.readyState = 0;\n\n  createPageCssHook();\n}\n\n// Page can make any special badge callouts visible when data-sitecues-active=\"desktop\"\nfunction createPageCssHook() {\n  document.documentElement.setAttribute('data-sitecues-active', 'desktop');\n  }\n\n  // Initialize page feature listeners\n  // This means: if a setting or event changes that requires some modules, we load and initialize the modules\n  function initPageFeatureListeners() {\n    // -- Zoom --\n    // Previously saved values\n    var initialZoom = pref.get('zoom');\n    if (initialZoom > 1) {\n      performInitialLoadZoom(initialZoom);\n    }\n    // Monitor any runtime changes\n    events.on('zoom', onZoomChange);\n\n    // -- Speech --\n    pref.bindListener('ttsOn', function (isOn) {\n      isSpeechOn = isOn;\n      onFeatureSettingChange();\n      if (isOn && !isSpeechInitialized) {\n        initSpeech();\n        isSpeechInitialized = true;\n      }\n    });\n\n    // -- Themes --\n    if (platform.featureSupport.themes) {\n      pref.bindListener('themeName', function (themeName) {\n        if (themeName) {\n          initThemes();\n        }\n      });\n    }\n\n    // -- Mouse --\n    pref.bindListener('mouseSize', function (mouseSize) {\n      if (mouseSize) {   // If undefined we use the default as set by the zoom module\n        initMouse();\n      }\n    });\n\n    pref.bindListener('mouseHue', function (mouseHue) {\n      if (mouseHue <= 1) {  // if undefined || > 1, mouse hue is ignored, and we keep the default mouse hue\n        initMouse();\n      }\n    });\n\n    // -- Keys --\n    // Init keys module if sitecues was off but key is pressed that might turn it on\n    if (!isKeyHandlingInitialized) {\n      // Keys are not be initialized, therefore,\n      // we add our lightweight keyboard listener that only\n      // checks for a few keys like  +, - or alt+'\n      window.addEventListener('keydown', onPossibleTriggerKeyPress);\n    }\n    if (!isZoomInitialized) {\n      window.addEventListener('wheel', onPossibleScreenPinch);\n    }\n\n    modifierKeyState.init();\n\n    shake.init();\n\n    onSitecuesReady();\n  }\n\n  function isInitializerKey(event) {\n    var keyCode = event.keyCode;\n    return (INIT_CODES.indexOf(keyCode) >= 0);\n  }\n\n  // Check for keys that can trigger sitecues, such as cmd+, cmd-, alt+'\n  function onPossibleTriggerKeyPress(event) {\n    if (isInitializerKey(event)) {\n      if (event.ctrlKey || event.metaKey || event.altKey) {\n        // Don't allow default behavior of modified key, e.g. native zoom\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n      isKeyReleased = false;\n      window.addEventListener('keyup', onKeyUp);\n      require(['page/keys/keys'], function (keys) {\n        keys.init(event, isKeyReleased);\n      });\n    }\n  }\n\n  // Ctrl + wheel events (screen pinch) can trigger sitecues\n  function onPossibleScreenPinch(event) {\n    if (event.ctrlKey) {\n      // Don't allow default behavior of screen pinch, e.g. native zoom\n      event.preventDefault();\n      event.stopImmediatePropagation();\n      require(['page/zoom/zoom'], function (zoomMod) {\n        // TODO IE11: TypeError: Unable to get property 'init' of undefined or null reference\n        // {\"eventId\":\"10e771ce-97a8-4d53-985a-c4912485032a\",\"serverTs\":1463756071982,\"clientIp\":\"10.235.39.83\",\"siteKey\":\"s-0000ee0c\",\"isTest\":false,\"userId\":null,\"clientData\":{\"scVersion\":\"4.0.73-RELEASE\",\"metricVersion\":12,\"sessionId\":\"5fd5d275-5204-4e45-af83-c134e3c7bce8\",\"pageViewId\":\"ceb79818-a1bf-47ec-8b3e-6b3419796adc\",\"siteId\":\"s-0000ee0c\",\"userId\":\"6f90e948-9980-4e19-87e0-9ec50958db05\",\"pageUrl\":\"https://www.eeoc.gov/eeoc/publications/ada-leave.cfm\",\"browserUserAgent\":\"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET CLR 1.1.4322; InfoPath.3; .NET4.0C; .NET4.0E; Tablet PC 2.0; rv:11.0) like Gecko\",\"isClassicMode\":false,\"clientLanguage\":\"en-US\",\"source\":\"page\",\"isTester\":false,\"name\":\"error\",\"clientTimeMs\":1463756071497,\"zoomLevel\":1,\"ttsState\":false,\"details\":{\"message\":\"Unable to get property 'init' of undefined or null reference\",\"stack\":\"TypeError: Unable to get property 'init' of undefined or null reference\\n   at Anonymous function (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:128:442)\\n   at W (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:8:256)\\n   at O (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:9:31)\\n   at Anonymous function (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:10:28)\\n   at k (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:20:460)\\n   at Anonymous function (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:21:72)\\n   at Anonymous function (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:19:226)\\n   at Anonymous function (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:19:204)\\n   at a (https://js.sitecues.com/l/s;id=s-0000ee0c/js/sitecues.js:19:94)\"}}}\n        zoomMod.init(event);\n      });\n    }\n  }\n\n  function onKeyUp(event) {\n    if (isInitializerKey(event)) {\n      isKeyReleased = true;\n    }\n  }\n\n  function onZoomInitialized() {\n    isZoomInitialized = true;\n    window.removeEventListener('wheel', onPossibleScreenPinch);\n  }\n\n  function onKeyHandlingInitialized() {\n    isKeyHandlingInitialized = true;\n    window.removeEventListener('keydown', onPossibleTriggerKeyPress);\n    window.removeEventListener('keyup', onKeyUp);\n  }\n\n  function isOn() {\n    return isSitecuesOn;\n  }\n\n  function init() {\n    startSitecuesLoad = getCurrentTime();\n\n    // When keyboard listening is ready\n    events.on('keys/did-init', onKeyHandlingInitialized);\n    events.on('zoom/ready', onZoomInitialized);\n\n    // Set sitecues state flag to initializing\n    sitecues.readyState = state.INITIALIZING;\n\n    // Early synchronous initialization\n    site.init();  // Initialize configuration module\n    urls.init();  // Initialize API and services URLs\n    exports.init(isOn);\n\n    Promise.all([\n      pref.init(),\n      id.init()\n    ]).then(function () {\n      // Synchronous initialization\n      inlineStyle.init();\n      platform.init();\n      domEvents.init();\n      abTest.init();\n      metric.init();\n    }).then(function () {\n      return locale.init()\n        .then(bp.init)\n        .then(metric.initViewInfo)\n        .then(initPageFeatureListeners);\n    });\n  }\n\n  return {\n    isOn : isOn,\n    init : init\n  };\n});\n\n","\nsitecues.define(\"run\", function(){});\n","\nsitecues.require([\"run/errors\", \"run/run\"]);\n"]}